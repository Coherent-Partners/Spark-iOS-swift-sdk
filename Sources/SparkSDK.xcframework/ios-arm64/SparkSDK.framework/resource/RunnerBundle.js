/*! For license information please see RunnerBundle.js.LICENSE.txt */
!function(){var e={285:function(e,t,r){var n=r(108);e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var i=void 0,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],3:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,r){function n(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var s=e.apply(t,r);function a(e){n(s,o,i,a,l,"next",e)}function l(e){n(s,o,i,a,l,"throw",e)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,r){var n=e("./setPrototypeOf.js"),o=e("./isNativeReflectConstruct.js");function i(e,r,s){return o()?(t.exports=i=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(null,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{"./isNativeReflectConstruct.js":13,"./setPrototypeOf.js":18}],7:[function(e,t,r){var n=e("./toPropertyKey.js");function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}t.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":21}],8:[function(e,t,r){var n=e("./toPropertyKey.js");t.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":21}],9:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],10:[function(e,t,r){var n=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":18}],11:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],12:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],13:[function(e,t,r){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],14:[function(e,t,r){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],15:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],16:[function(e,t,r){var n=e("./typeof.js").default,o=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":3,"./typeof.js":22}],17:[function(e,t,r){var n=e("./typeof.js").default;function o(){"use strict";t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new k(n||[]);return s(i,"_invoke",{value:O(e,r,a)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var d={};function m(){}function y(){}function g(){}var v={};f(v,l,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(R([])));w&&w!==r&&i.call(w,l)&&(v=w);var _=g.prototype=m.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,s,a,l){var u=h(e[o],e,s);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,l)}))}l(u.arg)}var o;s(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}})}function O(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=A(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:$}}function $(){return{value:void 0,done:!0}}return y.prototype=g,s(_,"constructor",{value:g,configurable:!0}),s(g,"constructor",{value:y,configurable:!0}),y.displayName=f(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new j(p(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),f(_,c,"Generator"),f(_,l,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":22}],18:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],19:[function(e,t,r){var n=e("./arrayWithoutHoles.js"),o=e("./iterableToArray.js"),i=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return n(e)||o(e)||i(e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":2,"./iterableToArray.js":14,"./nonIterableSpread.js":15,"./unsupportedIterableToArray.js":23}],20:[function(e,t,r){var n=e("./typeof.js").default;t.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":22}],21:[function(e,t,r){var n=e("./typeof.js").default,o=e("./toPrimitive.js");t.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":20,"./typeof.js":22}],22:[function(e,t,r){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],23:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],24:[function(e,t,r){var n=e("./getPrototypeOf.js"),o=e("./setPrototypeOf.js"),i=e("./isNativeFunction.js"),s=e("./construct.js");function a(e){var r="function"==typeof Map?new Map:void 0;return t.exports=a=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":6,"./getPrototypeOf.js":9,"./isNativeFunction.js":12,"./setPrototypeOf.js":18}],25:[function(e,t,r){var n=e("../helpers/regeneratorRuntime")();t.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},{"../helpers/regeneratorRuntime":17}],26:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationToken=void 0;var s,a=(s=e("./error"))&&s.__esModule?s:{default:s},l=Symbol(),u=function(){function e(){(0,o.default)(this,e),this._cancelled=!1}return(0,i.default)(e,[{key:"throwIfCancelled",value:function(e,t){if(this.isCancelled())throw new a.default.ModelExecuteCancelled(e,t)}},{key:"isCancelled",value:function(){return!0===this._cancelled}},{key:l,value:function(){this._cancelled=!0}}]),e}(),c=function(){function e(){(0,o.default)(this,e),this._token=new u}return(0,i.default)(e,[{key:"getToken",value:function(){return this._token}},{key:"cancel",value:function(){this._token[l]()}}],[{key:"create",value:function(){return new e}}]),e}();r.CancellationToken=c},{"./error":30,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}],27:[function(e,t,r){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),i=o(e("@babel/runtime/helpers/typeof")),s=o(e("@babel/runtime/helpers/classCallCheck")),a=o(e("@babel/runtime/helpers/createClass")),l=o(e("@babel/runtime/regenerator")),u=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return c(t,e),t},p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},h=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.WasmRunner=r.ModelExecuteCancelled=r.CancellationToken=r.ColumnarSerializer=void 0;var d=e("@paralleldrive/cuid2"),m=h(e("path")),y=f(e("./utils")),g=f(e("./browser/logger")),v=h(e("./browser/template")),b=h(e("is-buffer")),w=h(e("./error")),_=f(e("unzipit")),x=e("./serializer/columnarSerializer");Object.defineProperty(r,"ColumnarSerializer",{enumerable:!0,get:function(){return x.ColumnarSerializer}});var j=e("./CancellationToken");Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return j.CancellationToken}});var O=e("./error");Object.defineProperty(r,"ModelExecuteCancelled",{enumerable:!0,get:function(){return O.ModelExecuteCancelled}});var A=function(e){return p(void 0,void 0,void 0,l.default.mark((function t(){var r,n,o,i,s,a,u,c,f,p,h;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.unzip(e);case 3:if(f=t.sent,p=f.entries,Object.keys(p).forEach((function(e){-1===e.indexOf("__MACOSX")&&(".js"===m.default.extname(e)&&(n=e),".wasm"===m.default.extname(e)&&(i=e),".data"===m.default.extname(e)&&(s=e),e.toLowerCase().indexOf("_static.json")>-1&&(c=e))})),n){t.next=8;break}throw new Error("Missing runtime file");case 8:if(i){t.next=10;break}throw new Error("Missing engine file");case 10:return t.next=12,p[n].text();case 12:return r=t.sent,t.next=15,p[i].arrayBuffer();case 15:if(o=t.sent,h={js:{url:URL.createObjectURL(new Blob([r],{type:"text/javascript"})),path:n},wasm:{url:URL.createObjectURL(new Blob([o],{type:"application/wasm"})),path:i}},!s){t.next=22;break}return t.next=20,p[s].arrayBuffer();case 20:a=t.sent,h.data={url:URL.createObjectURL(new Blob([a],{type:"application/octet-stream"})),path:s};case 22:if(!c){t.next=27;break}return t.next=25,p[c].text();case 25:u=t.sent,h.metadata={url:URL.createObjectURL(new Blob([u],{type:"application/json"})),path:c};case 27:return t.abrupt("return",h);case 30:throw t.prev=30,t.t0=t.catch(0),new Error(t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,30]])})))},E=function(e){return p(void 0,void 0,void 0,l.default.mark((function t(){var r,n,o,i,s,a,u,c,f,p,h,d;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=new Blob([new Uint8Array(e)]),t.prev=1,t.next=4,_.unzip(f);case 4:if(p=t.sent,h=p.entries,Object.keys(h).forEach((function(e){-1===e.indexOf("__MACOSX")&&(".js"===m.default.extname(e)&&(n=e),".wasm"===m.default.extname(e)&&(i=e),".data"===m.default.extname(e)&&(s=e),e.toLowerCase().indexOf("_static.json")>-1&&(c=e))})),n){t.next=9;break}throw new Error("Missing runtime file");case 9:if(i){t.next=11;break}throw new Error("Missing engine file");case 11:return t.next=13,h[n].text();case 13:return r=t.sent,t.next=16,h[i].arrayBuffer();case 16:if(o=t.sent,d={wasm:{url:URL.createObjectURL(new Blob([o],{type:"application/wasm"})),path:i},js:{url:URL.createObjectURL(new Blob([r],{type:"text/javascript"})),path:n}},!s){t.next=23;break}return t.next=21,h[s].arrayBuffer();case 21:a=t.sent,d.data={url:URL.createObjectURL(new Blob([a],{type:"application/octet-stream"})),path:s};case 23:if(!c){t.next=28;break}return t.next=26,h[c].text();case 26:u=t.sent,d.metadata={url:URL.createObjectURL(new Blob([u],{type:"application/json"})),path:c};case 28:return t.abrupt("return",d);case 31:throw t.prev=31,t.t0=t.catch(1),new Error(t.t0);case 34:case"end":return t.stop()}}),t,null,[[1,31]])})))},S=function(e){return p(void 0,void 0,void 0,l.default.mark((function t(){var r,n,o,i,s,a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.servicename,n=e.wasm,o=e.js,i=e.data,s=e.metadata,a={wasm:y.isFilePath(n,"wasm")?{url:new URL(n,window.location.origin).toString(),path:y.last(n.split("/"))}:{url:URL.createObjectURL(new Blob([n],{type:"application/wasm"})),path:"".concat(r,".wasm")},js:y.isFilePath(o,"js")?{url:new URL(o,window.location.origin).toString(),path:y.last(o.split("/"))}:{url:URL.createObjectURL(new Blob([o],{type:"text/javascript"})),path:"".concat(r,".js")}},i&&(a.data=y.isFilePath(i,"data")?{url:new URL(i,window.location.origin).toString(),path:y.last(i.split("/"))}:{url:URL.createObjectURL(new Blob([i],{type:"application/octet-stream"})),path:"".concat(r,".data")}),s&&(a.metadata=y.isFilePath(s,"json")?{url:new URL(s,window.location.origin).toString(),path:y.last(s.split("/"))}:{url:URL.createObjectURL(new Blob([s],{type:"application/json"})),path:"".concat(r,"_static.json")}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return p(void 0,void 0,void 0,l.default.mark((function n(){var o,i;return l.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r){n.next=5;break}return n.next=3,fetch(e.url).then((function(e){return p(void 0,void 0,void 0,l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.text());case 1:case"end":return t.stop()}}),t)})))})).then((function(e){return e.replace(t.path,t.url).replace('"'.concat(r.path,'"'),'"'.concat(r.url,'"')).replace('"'.concat(r.path,'"'),'"'.concat(r.url,'"')).replace("'".concat(r.path,"'"),"'".concat(r.url,"'")).replace("'".concat(r.path,"'"),"'".concat(r.url,"'"))}));case 3:return o=n.sent,n.abrupt("return",o);case 5:return n.next=7,fetch(e.url).then((function(e){return p(void 0,void 0,void 0,l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.text());case 1:case"end":return t.stop()}}),t)})))})).then((function(e){return e.replace(t.path,t.url)}));case 7:return i=n.sent,n.abrupt("return",i);case 9:case"end":return n.stop()}}),n)})))},R=function(){return p(void 0,void 0,void 0,l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.logger.info("CALLBACK NOT IMPLEMENTED");case 1:case"end":return e.stop()}}),e)})))},$=function(e){try{return JSON.parse(e)}catch(e){return void g.logger.error(e,"SAFE JSON PARSER FAILED")}},I=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,s.default)(this,e),y.isCompatible(),this.license=n,this.callback=r,this.models=[],this._logger=new g.default,y.isEmpty(t)||(Array.isArray(t)?this.models=t.map((function(e){return{id:e.id,url:e.url}})):"object"===(0,i.default)(t)&&(this.models=[{id:t.id,url:t.url}]))}return(0,a.default)(e,[{key:"setLogLevel",value:function(e){this._logger.setLogLevel(e)}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p(this,void 0,void 0,l.default.mark((function t(){var r=this;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.isEmpty(e)||(this.license=e),t.next=3,Promise.all(this.models.map((function(e){return p(r,void 0,void 0,l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._initializeModelInstance(e,this.license));case 1:case"end":return t.stop()}}),t,this)})))})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_initializeModelInstance",value:function(e,t){return p(this,void 0,void 0,l.default.mark((function r(){var n,o,s,a,u,c,f,h,d,m,w,_,x,j;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=Date.now(),g.logger.debug({modelid:e.id,ts:n},"_initializeModelInstance"),o=e.url,s=(0,b.default)(o),a="object"===(0,i.default)(o),!s){r.next=15;break}return r.next=8,E(o);case 8:d=r.sent,u=d.js,c=d.wasm,f=d.data,h=d.metadata,r.next=32;break;case 15:if(!a){r.next=25;break}return r.next=18,S(o);case 18:m=r.sent,u=m.js,c=m.wasm,f=m.data,h=m.metadata,r.next=32;break;case 25:return r.next=27,A(o);case 27:w=r.sent,u=w.js,c=w.wasm,f=w.data,h=w.metadata;case 32:if(!h){r.next=38;break}return r.next=35,fetch(h.url).then((function(e){return e.json()}));case 35:r.t0=r.sent,r.next=39;break;case 38:r.t0=void 0;case 39:return _=r.t0,r.next=42,k(u,c,f);case 42:return x=r.sent,g.logger.debug({modelid:e.id,timespent:Date.now()-n},"_initializeModelInstance.createWorker"),g.logger.debug({message:y.jsString2workerURL((0,v.default)(x,e.id,t,_))}),e.parents=this,e.worker=new Worker(y.jsString2workerURL((0,v.default)(x,e.id,t,_))),j=this._logger,e.worker.onmessage=function(t){var r;if(Array.isArray(t.data)||"Initialized"!==t.data)if(Array.isArray(t.data)||"stall"!==(null===(r=t.data)||void 0===r?void 0:r.type))Array.isArray(t.data)&&(y.isEmpty(e.results)&&(e.results={}),e.results[t.data[1]]=t.data[0]);else{var n=t.data.requestData,o="string"==typeof n.request_body?JSON.parse(n.request_body):n.request_body,i=n.service_uri,s=n.folder_name,a=n.service_name;p(this,void 0,void 0,l.default.mark((function r(){var n,u,c;return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n={service_uri:i,folder_name:s,service_name:a,context:t.data.context},r.next=4,e.parents.callback(n);case 4:return u=r.sent,o.request_meta||(o.request_meta={}),o.request_meta.version_id=u,r.next=9,e.parents.execute(o,u);case 9:c=r.sent,e.worker.postMessage([{service_uri:i,folder_name:s,service_name:a,response:c},"","dispatch"]),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),j.error(Object.assign(Object.assign({},r.t0),{message:r.t0.message}),"CHILD MODEL ERROR");case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))}else e.ready=!0},r.abrupt("return",new Promise((function(t,r){!function r(){setTimeout((function(){e.ready?(g.logger.debug({modelid:e.id,timespent:Date.now()-n},"_initializeModelInstance.complete"),t()):r()}),2)}()})));case 50:case"end":return r.stop()}}),r,this)})))}},{key:"_parseError",value:function(e){var t,r=null===(t=e.response_data)||void 0===t?void 0:t.errors.reduce((function(e,t){var r=t.source_path;if(!r)return e;var n,o=r.split("."),i=o.length-1;return o.forEach((function(o,s){if(0===s?(e[o]||(e[o]={}),n=e[o]):(n[o]||(n[o]=s===i?[]:{}),n=n[o]),s===i){if(!Array.isArray(n))throw new w.default.BrowserError("Parsing response error at errors ".concat(r));n.push({message:t.message})}})),e}),{});return{request_data:r}}},{key:"_getModel",value:function(e){var t=this.models.find((function(t){return t.id===e}));if(!t)throw new w.default.MissingModelError(e);if(!t.ready)throw new w.default.ModelInitializationError(e);return t}},{key:"isExist",value:function(e){try{return!!this._getModel(e)}catch(e){return!1}}},{key:"remove",value:function(e){return p(this,void 0,void 0,l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isExist(e)&&(this.models=this.models.filter((function(t){return t.id===e?(t.worker.terminate(),!1):t.id!==e})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"append",value:function(e){return p(this,void 0,void 0,l.default.mark((function t(){var r;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isExist(e.id)){t.next=2;break}return t.abrupt("return");case 2:return r={id:e.id,url:e.url,meta:{}},t.next=5,this._initializeModelInstance(r,this.license);case 5:this.models.push(r);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"execute",value:function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>3?arguments[3]:void 0;return p(this,void 0,void 0,l.default.mark((function s(){var a,u,c,f;return l.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=o||(null===(t=null==e?void 0:e.request_meta)||void 0===t?void 0:t.version_id)||(null===(r=e.request_meta)||void 0===r?void 0:r.version_uuid),(null==e?void 0:e.request_meta)||(e.request_meta={}),o&&(e.request_meta.version_id=a),this._logger.trace(e,"EXECUTING: ".concat(o)),u=i?i.getToken():void 0,!a){s.next=12;break}return n.log("version_uuid:",a,"meta:",null==e?void 0:e.request_meta,"id:",o),c=this._getModel(a),f=(0,d.createId)(),u&&u.throwIfCancelled(a,e),c.worker.postMessage([JSON.stringify(e),f]),s.abrupt("return",new Promise((function(t,r){var n=0;!function o(){setTimeout((function(){var i,s;try{u&&u.throwIfCancelled(a,e)}catch(e){r(e)}if(null===(i=c.results)||void 0===i?void 0:i[f]){var l=$(null===(s=c.results)||void 0===s?void 0:s[f]);l?(c.results[f]=void 0,t(l)):n<5e3?(n++,o()):r(new Error("Execution timeout"))}else n<5e3?(n++,o()):r(new Error("Execution timeout"))}),10)}()})));case 12:throw new w.default.ParameterRequiredError("request_meta.version_id",e);case 13:case"end":return s.stop()}}),s,this)})))}}]),e}();r.WasmRunner=I},{"./CancellationToken":26,"./browser/logger":28,"./browser/template":29,"./error":30,"./serializer/columnarSerializer":31,"./utils":32,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/typeof":22,"@babel/runtime/regenerator":25,"@paralleldrive/cuid2":38,"is-buffer":54,path:58,unzipit:69}],28:[function(e,t,r){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),i=o(e("@babel/runtime/helpers/classCallCheck")),s=o(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0}),r.logger=void 0;var a=function(){function e(t){(0,i.default)(this,e);var r=t?t.level:"info";this.setLogLevel(r)}return(0,s.default)(e,[{key:"_getLogFormat",value:function(e,t,r){return Object.assign({level:e||this._logLevel,time:Date.now(),msg:r},t)}},{key:"setLogLevel",value:function(e){if(!e)throw new Error("Log level is required with value like silent|trace|debug|info|warn|error|fatal");switch(e.toLowerCase()){case"silent":this._logLevel=99;break;case"trace":this._logLevel=10;break;case"debug":this._logLevel=20;break;case"info":default:this._logLevel=30;break;case"warn":this._logLevel=40;break;case"error":this._logLevel=50;break;case"fatal":this._logLevel=60}}},{key:"trace",value:function(e,t){this._logLevel<=10&&(e&&!t&&n.trace(this._getLogFormat(10,{},e)),e&&t&&n.trace(this._getLogFormat(10,e,t)))}},{key:"debug",value:function(e,t){this._logLevel<=20&&(e&&!t&&n.debug(this._getLogFormat(20,{},e)),e&&t&&n.debug(this._getLogFormat(20,e,t)))}},{key:"info",value:function(e,t){this._logLevel<=30&&(e&&!t&&n.info(this._getLogFormat(30,{},e)),e&&t&&n.info(this._getLogFormat(30,e,t)))}},{key:"warn",value:function(e,t){this._logLevel<=40&&(e&&!t&&n.warn(this._getLogFormat(40,{},e)),e&&t&&n.warn(this._getLogFormat(40,e,t)))}},{key:"error",value:function(e,t){this._logLevel<=50&&(e&&!t&&n.error(this._getLogFormat(50,{},e)),e&&t&&n.error(this._getLogFormat(50,e,t)))}},{key:"fatal",value:function(e,t){this._logLevel<=60&&(e&&!t&&n.error(this._getLogFormat(60,{},e)),e&&t&&n.error(this._getLogFormat(60,e,t)))}}]),e}();r.logger=new a,r.default=a},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"info";return"\n    ".concat(e,"\n\n    const LOG_LEVEL = '").concat(o,"';\n    const MODEL_ID = '").concat(t,"';\n    const metadata = ").concat(JSON.stringify(n),";\n\n    const license = '").concat(r,'\';\n\n    class MyEventEmitter{constructor(){this._events={},this._eventsOnce={}}on(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}once(e,t){this._eventsOnce[e]||(this._eventsOnce[e]=[]),this._eventsOnce[e].push(t)}removeListener(e,t){if(!this._events[e])throw new Error("Can\'t emit an event. Event doesn\'t exits."+e);this._events[e]=this._events[e].filter((e=>e!==t))}emit(e,t){var r=e=>{e(t)};this._events[e]&&this._events[e].forEach(r),this._eventsOnce[e]&&(this._eventsOnce[e].forEach(r),this._eventsOnce[e]=[])}}class Logger{constructor(e){var t=e?e.level:"info";this.setLogLevel(t)}_getLogFormat(e,t,r){return{versionid:MODEL_ID,level:e||this._logLevel,time:Date.now(),msg:r,...t}}setLogLevel(e){if(!e)throw new Error("Log level is required with value like silent|trace|debug|info|warn|error|fatal");switch(e.toLowerCase()){case"silent":this._logLevel=99;break;case"trace":this._logLevel=10;break;case"debug":this._logLevel=20;break;case"info":default:this._logLevel=30;break;case"warn":this._logLevel=40;break;case"error":this._logLevel=50;break;case"fatal":this._logLevel=60}}trace(e,t){this._logLevel<=10&&(e&&!t&&console.trace(this._getLogFormat(10,{},e)),e&&t&&console.trace(this._getLogFormat(10,e,t)))}debug(e,t){this._logLevel<=20&&(e&&!t&&console.debug(this._getLogFormat(20,{},e)),e&&t&&console.debug(this._getLogFormat(20,e,t)))}info(e,t){this._logLevel<=30&&(e&&!t&&console.info(this._getLogFormat(30,{},e)),e&&t&&console.info(this._getLogFormat(30,e,t)))}warn(e,t){this._logLevel<=40&&(e&&!t&&console.warn(this._getLogFormat(40,{},e)),e&&t&&console.warn(this._getLogFormat(40,e,t)))}error(e,t){this._logLevel<=50&&(e&&!t&&console.error(this._getLogFormat(50,{},e)),e&&t&&console.error(this._getLogFormat(50,e,t)))}fatal(e,t){this._logLevel<=60&&(e&&!t&&console.error(this._getLogFormat(60,{},e)),e&&t&&console.error(this._getLogFormat(60,e,t)))}}var logger=new Logger;LOG_LEVEL&&logger.setLogLevel(LOG_LEVEL);var wasm,wb,workerEventEmitter=new MyEventEmitter,ctx={},CALL_TYPE={0:"SparkService",1:"ExternalApi"},XcallResBuilder={Json:function(e,t,r,a,s,o){return JSON.stringify({metadata:{calltype:e,name:t,status:r,error_code:a,response_time:s},data:o||{}})},JsonV2:function(e,t,r,a,s,o,n){return JSON.stringify({...o,xcall_meta:{http_status_code:r,http_response_time:s,error_details:n}})},XML:()=>{}};function getContext(){return{...ctx,upStreamId:MODEL_ID}}function moduleInitialize(){Module().then((e=>{wasm=e,wb=e._construct();var t=new TextDecoder("utf-8"),r=0;e.dispatch=async(a,s,o)=>{var n=new Uint8Array(e.HEAPU8.subarray(s,s+o)),c=t.decode(n).slice(),i=JSON.parse(c),l=i.folder_name,_=i.service_name,u=i.service_uri,m=i.xcall_version;if(logger.trace({requestData:i,ctx:getContext(),EventType:"SparkService.Dispatch"},"Handle dispatch event"),a===r)return await new Promise(((e,t)=>{try{postMessage({requestData:i,context:getContext(),type:"stall"});var r="xcall-loopback-result-"+l+_+u;workerEventEmitter.once(r,(t=>{logger.trace({eventName:r,results:t},"Handle xcall-loopback-result event");var a="";switch(m){case 2:case 3:a=XcallResBuilder.JsonV2(CALL_TYPE[0],u||"folders/"+l+"/services/"+_,202,"",0,t);break;default:a=XcallResBuilder.Json(CALL_TYPE[0],u||"folders/"+l+"/services/"+_,202,"",0,t)}e(a)}))}catch(e){t(e)}}))},postMessage("Initialized")}))}async function runComputation(e){if(!e)return new Error("No Event was placed");var t=e.data[0],r="string"==typeof t?JSON.parse(t):t,a=e.data[1];if(void 0===wasm||void 0===wb)return new Error("WASM is not ready");ctx.headers||(ctx.headers={}),r?.request_meta?._ctx?.authorization&&(ctx.headers.authorization=r?.request_meta?._ctx?.authorization,delete r?.request_meta?._ctx?.authorization),r?.request_meta?._ctx?.secretkey&&(ctx.headers.secretkey=r?.request_meta?._ctx.secretkey,delete r?.request_meta?._ctx?.secretkey),r?.request_meta?._ctx?.["x-synthetic-key"]&&(ctx.headers["x-synthetic-key"]=r?.request_meta?._ctx?.["x-synthetic-key"],delete r?.request_meta?._ctx?.["x-synthetic-key"]),r?.request_meta?._ctx?.tenant&&(ctx.tenant=r?.request_meta?._ctx?.tenant,delete r?.request_meta?._ctx?.tenant),r?.request_meta?._ctx?.servicemap&&(ctx.servicemap=r?.request_meta?._ctx?.servicemap,delete r?.request_meta?._ctx.servicemap),r?.request_meta?._ctx?.upstreamVersionId&&(ctx.upstreamVersionId=r?.request_meta._ctx.upstreamVersionId,delete r.request_meta?._ctx?.upstreamVersionId),r?.request_meta?._ctx?.xcallChainId&&(ctx.xcallChainId=r?.request_meta?._ctx?.xcallChainId,delete r?.request_meta?._ctx.xcallChainId),r?.request_meta?._ctx?.correlationId&&(ctx.correlationId=r?.request_meta?._ctx.correlationId,delete r?.request_meta?._ctx.correlationId);var s=r?.request_meta?.service_category&&r?.request_meta?.service_category.split(",").some((e=>"metadata"===e.toLowerCase()))&&void 0!==metadata,o=(new TextEncoder).encode(t),n=wasm._malloc(o.length),c=o.BYTES_PER_ELEMENT;wasm.HEAP8.set(o,n/c);var i=wasm._malloc(8);logger.debug({ctx:ctx},"Context");var l=await wasm.ccall("node_calc_v3","number",["number","number","number","number"],[wb,n,o.length,i],{async:!0}),_=wasm.getValue(i,"i32"),u=new Uint8Array(wasm.HEAPU8.subarray(l,l+_)),m=new TextDecoder("utf-8").decode(u).slice();if(wasm._free(n),wasm._free(i),wasm._free(l),s){(m=JSON.parse(m)).response_data||(m.response_data={});var g=metadata?.ImageOutputs??[],d=g?g.reduce(((e,t)=>t?.ImageName?(e[t.ImageName]=t?.Base64Content||"",e):e),{}):{};return m.response_data.outputs={...m.response_data?.outputs,...metadata?.Outputs,...d},[JSON.stringify(m),a]}return logger.debug({ctx:ctx},"Context.Reset"),ctx={},logger.debug({ctx:ctx},"Context.Reset.Complete"),[m,a]}moduleInitialize(),onmessage=function(e){var t=e,r=t.data[0],a=t.data[1];if("dispatch"===t.data[2]){logger.trace(r,"dispatching");var s=r.folder_name,o=r.service_name,n=r.service_uri,{response:c}=r,i="xcall-loopback-result-"+s+o+n;workerEventEmitter.emit(i,c)}else runComputation(t).then((e=>{postMessage(e)})).catch((e=>{postMessage([JSON.stringify({executeError:e.message}),a])}))};\n\n')}},{}],30:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/wrapNativeSuper"));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.ModelExecuteCancelled=void 0;var f=function(e){(0,s.default)(r,e);var t=c(r);function r(e){return(0,o.default)(this,r),t.call(this,e)}return(0,i.default)(r,[{key:"v3",get:function(){return{error_category:this.name,error_type:this.type,message:this.message,severity:this.severity}}},{key:"modelInfo",get:function(){return{uuid:this.uuid,input:this.input}}}]),r}((0,u.default)(Error)),p=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).name="model_error",n.type="error.MODEL_ERROR",n.severity="low",n}return(0,i.default)(r)}(f),h=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,"Model ".concat(e," cannot be found"))).name="missing_model_error",n.uuid=e,n.type="error.MISSING_MODEL_ERROR",n.severity="low",n}return(0,i.default)(r)}(p),d=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,"Model ".concat(e," was not initialized"))).name="model_not_initialized_error",n.uuid=e,n.type="error.MODEL_NOT_INITIALIZED_ERROR",n.severity="low",n}return(0,i.default)(r)}(p),m=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.default)(this,r),(n=t.call(this,"WasmRunner failed to find ".concat(e," parameter"))).name="missing_parameter",n.parameter=e,n.type="error.MISSING_PARAMETER",n.severity="low",n.input=i,n}return(0,i.default)(r)}(f),y=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).name="browser_error",n.type="error.BROWSER_ERROR",n.severity="low",n}return(0,i.default)(r)}(f),g=function(e){(0,s.default)(r,e);var t=c(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.default)(this,r),(n=t.call(this,"".concat(e," support is required"))).name="not_supported_error",n.type="error.NOT_SUPPORTED",n.severity="high",n.uuid=i,n.input=s,n}return(0,i.default)(r)}(y),v=function(e){(0,s.default)(r,e);var t=c(r);function r(e,n,i){var s;return(0,o.default)(this,r),(s=t.call(this,"Model validation error")).name="validation_error",s.type="error.VALIDATION",s.severity="low",s.errors=e,s.rawResult=i,s.uuid=n,s}return(0,i.default)(r)}(p),b=function(e){(0,s.default)(r,e);var t=c(r);function r(e,n,i){var s;return(0,o.default)(this,r),(s=t.call(this,"Model execution error")).name="execution_error",s.type="error.EXECUTION",s.severity="low",s.errors=e,s.input=i,s.uuid=n,s}return(0,i.default)(r)}(p),w=function(e){(0,s.default)(r,e);var t=c(r);function r(e,n){var i;return(0,o.default)(this,r),(i=t.call(this,"Model execution cancelled")).name="execution_cancelled",i.type="error.EXECUTION",i.severity="low",i.input=n,i.uuid=e,i}return(0,i.default)(r)}(p);r.ModelExecuteCancelled=w,r.default={ModelError:p,ModelExecuteError:b,MissingModelError:h,ModelValidationError:v,ModelInitializationError:d,ParameterRequiredError:m,BrowserError:y,NotSupportedError:g,ModelExecuteCancelled:w}},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":16,"@babel/runtime/helpers/wrapNativeSuper":24}],31:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/toConsumableArray")),i=n(e("@babel/runtime/helpers/typeof")),s=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass"));Object.defineProperty(r,"__esModule",{value:!0}),r.ColumnarSerializer=void 0;var l,u=(l=e("memoizerific"))&&l.__esModule?l:{default:l};function c(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}var f=function(){function e(){(0,s.default)(this,e)}return(0,a.default)(e,[{key:"deserialize",value:function(t){return e.memoizedIsColumnar(t)?e._memoizedDeserializeInput(t):t}},{key:"serialize",value:function(t){return e.memoizedIsColumnar(t)?t:e._memoizeSerializeInput(t)}}],[{key:"isDeserializable",value:function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))}},{key:"isSingleObject",value:function(e){return Array.isArray(e)&&1===e.length&&e[0].every((function(e){return Array.isArray(e)}))}},{key:"_deserializeInput",value:function(t){for(var r=[],n=e.memoizedIsSingleObject(t),o=n?t[0][0]:t[0],i=n?t[0].slice(1):t.slice(1),s=0;s<i.length;s++){for(var a=i[s],l={},u=0;u<a.length;u++){if(void 0===o[u])throw new Error("Error: Empty column detected at row ".concat(s," and column ").concat(u));if("string"!=typeof o[u])throw new Error("Error: Column header must be a string");e.memoizedIsColumnar(a[u])?l[o[u]]=e._memoizedDeserializeInput(a[u]):Array.isArray(a[u])?l[o[u]]=a[u].map((function(t){return Array.isArray(t)?e._memoizedDeserializeInput(t):t})):l[o[u]]=a[u]}r.push(l)}return n?r[0]:r}},{key:"_serializeInput",value:function(t){var r=[],n=[];if(Array.isArray(t)){var s=!0;t.forEach((function(t,a){var l;"object"!==(0,i.default)(t)?(l=t,s=!1):(l=[],Array.isArray(t)?l=e._memoizeSerializeInput(t):c(t,(function(t,r){n.includes(t)||n.push(t);var o=n.indexOf(t);l[o]="object"===(0,i.default)(r)&&null!==r?e._memoizeSerializeInput(r):r}))),!s&&n.length>0?(r[a+1]=[[[].concat(n),Array.isArray(l)?(0,o.default)(l):l]],n.length=0):r[a+1]=Array.isArray(l)?(0,o.default)(l):l})),n.length>0?r[0]=[].concat(n):r=r.slice(1)}else{var a=[];c(t,(function(t,r){n.includes(t)||n.push(t);var o=n.indexOf(t);a[o]="object"===(0,i.default)(r)&&null!==r?e._memoizeSerializeInput(r):r})),r=[[[].concat(n),Array.isArray(a)?[].concat(a):a]]}return r}}]),e}();r.ColumnarSerializer=f,f._memoizedDeserializeInput=(0,u.default)(100)(f._deserializeInput),f.memoizedIsColumnar=(0,u.default)(100)(f.isDeserializable),f.memoizedIsSingleObject=(0,u.default)(100)(f.isSingleObject),f._memoizeSerializeInput=(0,u.default)(100)(f._serializeInput)},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/toConsumableArray":19,"@babel/runtime/helpers/typeof":22,memoizerific:56}],32:[function(e,t,r){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/typeof")),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isV3Input=r.last=r.addScript=r.isEmpty=r.fn2workerURL=r.jsString2workerURL=r.isCompatible=r.isWorkerSupported=r.isWasmSupported=r.isBrowser=r.isFilePath=r.isHttpURL=r.isPath=r.ENVIRONMENT_IS_NODE=r.ENVIRONMENT_IS_WEB=void 0;var l=a(e("fs")),u=a(e("url")),c=a(e("./error"));function f(){try{return window}catch(e){return!1}}function p(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,i.default)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}function h(){return window.Worker}r.ENVIRONMENT_IS_WEB="object"===("undefined"==typeof window?"undefined":(0,i.default)(window)),r.ENVIRONMENT_IS_NODE="object"===(void 0===t?"undefined":(0,i.default)(t))&&"object"===(0,i.default)(t.versions)&&"string"==typeof t.versions.node,r.isPath=function(e){return s(this,void 0,void 0,o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.default.promises.stat(e);case 3:return r=t.sent,t.abrupt("return",r.isFile());case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))},r.isHttpURL=function(e){var t;try{r.ENVIRONMENT_IS_NODE&&(t=new u.default.URL(e)),r.ENVIRONMENT_IS_WEB&&(t=new URL(e))}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol},r.isFilePath=function(e,t){var r=e.indexOf(".".concat(t));return r>-1&&r===e.length-".".concat(t).length},r.isBrowser=f,r.isWasmSupported=p,r.isWorkerSupported=h,r.isCompatible=function(){if(!f())throw new c.default.NotSupportedError("Javascript Browser Environment");if(!p())throw new c.default.NotSupportedError("WebAssembly");if(!h)throw new c.default.NotSupportedError("Web Worker")},r.jsString2workerURL=function(e){var t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)},r.fn2workerURL=function(e){var t=new Blob(["(".concat(e.toString(),")()")],{type:"text/javascript"});return URL.createObjectURL(t)};r.isEmpty=function(e){return[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length},r.addScript=function(e){var t=document.createElement("script");t.setAttribute("src",e),t.setAttribute("async","true"),document.body.appendChild(t)},r.last=function(e){if(!Array.isArray(e))throw new Error("Argument is not array");var t=e.length;if(0!==t)return e[t-1]},r.isV3Input=function(e){var t=!1;return e.hasOwnProperty("request_data")&&!Array.isArray(e.request_data.inputs)&&(t=!0),t}}).call(this)}).call(this,e("_process"))},{"./error":30,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/typeof":22,"@babel/runtime/regenerator":25,_process:60,fs:42,url:70}],33:[function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function l(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=o,r.bytes=i,r.hash=s,r.exists=a,r.output=l;const u={number:n,bool:o,bytes:i,hash:s,exists:a,output:l};r.default=u},{}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),o=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>o&n)}:{h:0|Number(e>>o&n),l:0|Number(e&n)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:a}=i(e[o],t);[r[o],n[o]]=[s,a]}return[r,n]}r.fromBig=i,r.split=s;r.toBig=(e,t)=>BigInt(e>>>0)<<o|BigInt(t>>>0);function a(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:0|o}}r.add=a;const l={fromBig:i,split:s,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,add5H:(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0,add5L:(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0)};r.default=l},{}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},{}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),o=e("./_u64.js"),i=e("./utils.js"),[s,a,l]=[[],[],[]],u=BigInt(0),c=BigInt(1),f=BigInt(2),p=BigInt(7),h=BigInt(256),d=BigInt(113);for(let e=0,t=c,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let o=u;for(let e=0;e<7;e++)t=(t<<c^(t>>p)*d)%h,t&f&&(o^=c<<(c<<BigInt(e))-c);l.push(o)}const[m,y]=o.default.split(l,!0),g=(e,t,r)=>r>32?o.default.rotlBH(e,t,r):o.default.rotlSH(e,t,r),v=(e,t,r)=>r>32?o.default.rotlBL(e,t,r):o.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,o=(t+2)%10,i=r[o],s=r[o+1],a=g(i,s,1)^r[n],l=v(i,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],o=e[3];for(let r=0;r<24;r++){const n=a[r],i=g(t,o,n),l=v(t,o,n),u=s[r];t=e[u],o=e[u+1],e[u]=i,e[u+1]=l}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=y[n]}r.fill(0)}r.keccakP=b;class w extends i.Hash{constructor(e,t,r,o=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){n.default.exists(this);const{blockLen:t,state:r}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const i=Math.min(t-this.pos,o-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){n.default.exists(this,!1),n.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,o=e.length;n<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return n.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(n.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return e||(e=new w(t,r,n,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=w;const _=(e,t,r)=>(0,i.wrapConstructor)((()=>new w(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const x=(e,t,r)=>(0,i.wrapXOFConstructorWithOpts)(((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0)));r.shake128=x(31,168,16),r.shake256=x(31,136,32)},{"./_assert.js":33,"./_u64.js":34,"./utils.js":37}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapXOFConstructorWithOpts=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto"),o=e=>e instanceof Uint8Array;r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=2*t,o=e.slice(n,n+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");r[t]=i}return r};function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=s(e)),!o(e))throw new Error("expected Uint8Array, got "+typeof e);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let o=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-o;e>=0&&e<t||(await(0,r.nextTick)(),o+=e)}},r.utf8ToBytes=s,r.toBytes=a,r.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!o(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new Error("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},{"@noble/hashes/crypto":35}],38:[function(e,t,r){const{createId:n,init:o,getConstants:i,isCuid:s}=e("./src/index");t.exports.createId=n,t.exports.init=o,t.exports.getConstants=i,t.exports.isCuid=s},{"./src/index":39}],39:[function(e,t,n){(function(r){(function(){const{sha3_512:n}=e("@noble/hashes/sha3"),o=(e=4,t=Math.random)=>{let r="";for(;r.length<e;)r+=Math.floor(36*t()).toString(36);return r};function i(e){let t=8n,r=0n;for(const n of e.values())r=(r<<t)+BigInt(n);return r}const s=(e="")=>i(n(e)).toString(36).slice(1),a=Array.from({length:26},((e,t)=>String.fromCharCode(t+97))),l=({globalObj:e=(void 0!==r?r:"undefined"!=typeof window?window:{}),random:t=Math.random}={})=>{const n=Object.keys(e).toString(),i=n.length?n+o(32,t):o(32,t);return s(i).substring(0,32)},u=e=>()=>e++,c=({random:e=Math.random,counter:t=u(Math.floor(476782367*e())),length:r=24,fingerprint:n=l({random:e})}={})=>function(){const i=(e=>a[Math.floor(e()*a.length)])(e),l=Date.now().toString(36),u=t().toString(36),c=o(r,e);return`${i+s(`${l+c+u+n}`).substring(1,r)}`},f=c();t.exports.getConstants=()=>({defaultLength:24,bigLength:32}),t.exports.init=c,t.exports.createId=f,t.exports.bufToBigInt=i,t.exports.createCounter=u,t.exports.createFingerprint=l,t.exports.isCuid=(e,{minLength:t=2,maxLength:r=32}={})=>{const n=e.length,o=/^[0-9a-z]+$/;try{if("string"==typeof e&&n>=t&&n<=r&&o.test(e))return!0}finally{}return!1}}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@noble/hashes/sha3":36}],40:[function(e,t,r){"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),c=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(c(e,a,a+s>l?l:a+s));return 1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var o,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);var a;return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],41:[function(e,t,r){},{}],42:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],43:[function(e,t,r){(function(t){(function(){"use strict";var t=e("base64-js"),o=e("ieee754");r.Buffer=a,r.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=s(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=a.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var o=function(e){if(a.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||F(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|p(e))}function f(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(o)return n?-1:D(e).length;t=(""+t).toLowerCase(),o=!0}}function d(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return k(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,o){var i,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){for(var f=!0,p=0;p<l;p++)if(u(e,i+p)!==u(t,p)){f=!1;break}if(f)return i}return-1}function v(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(F(a))return s;e[r+s]=a}return s}function b(e,t,r,n){return N(D(t,e.length-r),e,r,n)}function w(e,t,r,n){return N(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return w(e,t,r,n)}function x(e,t,r,n){return N(U(t),e,r,n)}function j(e,t,r,n){return N(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function O(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,l,u=e[o],c=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(l=(15&u)<<12|(63&i)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=f}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||void 0===n||"function"!=typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(z(i,Uint8Array)&&(i=a.from(i)),!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):d.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,o){if(z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),l=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),f=0;f<l;++f)if(u[f]!==c[f]){i=u[f],s=c[f];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function R(e,t,r){var n,o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);for(var i="",s=t;s<r;++s)i+=(n=e[s])<16?"0"+n.toString(16):n.toString(16);return i}function $(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,8),o.write(e,t,r,n,52,8),r+8}a.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);P(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);P(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return C(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return C(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=a.isBuffer(e)?e:a.from(e,n),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%l]}return this};var T=/[^+/0-9A-Za-z-_]/g;function D(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function U(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":40,buffer:43,ieee754:53}],44:[function(e,t,r){"use strict";var n=e("get-intrinsic"),o=e("./"),i=o(n("String.prototype.indexOf"));t.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},{"./":45,"get-intrinsic":48}],45:[function(e,t,r){"use strict";var n=e("function-bind"),o=e("get-intrinsic"),i=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||n.call(s,i),l=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}t.exports=function(e){var t=a(n,s,arguments);return l&&u&&l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};var f=function(){return a(n,i,arguments)};u?u(t.exports,"apply",{value:f}):t.exports.apply=f},{"function-bind":47,"get-intrinsic":48}],46:[function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString,s="[object Function]";t.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==s)throw new TypeError(n+t);for(var r,a=o.call(arguments,1),l=function(){if(this instanceof r){var n=t.apply(this,a.concat(o.call(arguments)));return Object(n)===n?n:this}return t.apply(e,a.concat(o.call(arguments)))},u=Math.max(0,t.length-a.length),c=[],f=0;f<u;f++)c.push("$"+f);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),t.prototype){var p=function(){};p.prototype=t.prototype,r.prototype=new p,p.prototype=null}return r}},{}],47:[function(e,t,r){"use strict";var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":46}],48:[function(e,t,r){"use strict";var n,o=SyntaxError,i=Function,s=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new s},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,f=e("has-symbols")(),p=e("has-proto")(),h=Object.getPrototypeOf||(p?function(e){return e.__proto__}:null),d={},m="undefined"!=typeof Uint8Array&&h?h(Uint8Array):n,y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f&&h?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&h?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f&&h?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f&&h?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&h?h(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(h)try{null.error}catch(e){var g=h(h(e));y["%Error.prototype%"]=g}var v=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&h&&(r=h(o.prototype))}return y[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=e("function-bind"),_=e("has"),x=w.call(Function.call,Array.prototype.concat),j=w.call(Function.apply,Array.prototype.splice),O=w.call(Function.call,String.prototype.replace),A=w.call(Function.call,String.prototype.slice),E=w.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,R=function(e){var t=A(e,0,1),r=A(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return O(e,S,(function(e,t,r,o){n[n.length]=r?O(o,k,"$1"):t||e})),n},$=function(e,t){var r,n=e;if(_(b,n)&&(n="%"+(r=b[n])[0]+"%"),_(y,n)){var i=y[n];if(i===d&&(i=v(n)),void 0===i&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=R(e),n=r.length>0?r[0]:"",i=$("%"+n+"%",t),a=i.name,u=i.value,c=!1,f=i.alias;f&&(n=f[0],j(r,x([0,1],f)));for(var p=1,h=!0;p<r.length;p+=1){var d=r[p],m=A(d,0,1),g=A(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==d&&h||(c=!0),_(y,a="%"+(n+="."+d)+"%"))u=y[a];else if(null!=u){if(!(d in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&p+1>=r.length){var v=l(u,d);u=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[d]}else h=_(u,d),u=u[d];h&&!c&&(y[a]=u)}}return u}},{"function-bind":47,has:52,"has-proto":49,"has-symbols":50}],49:[function(e,t,r){"use strict";var n={foo:{}},o=Object;t.exports=function(){return{__proto__:n}.foo===n.foo&&!({__proto__:null}instanceof o)}},{}],50:[function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=e("./shams");t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},{"./shams":51}],51:[function(e,t,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},{}],52:[function(e,t,r){"use strict";var n=e("function-bind");t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":47}],53:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=r?o-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=p,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=p,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=u}return(h?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,l,u=8*i-o-1,c=(1<<u)-1,f=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+f>=1?p/l:p*Math.pow(2,1-f))*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*l-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+h]=255&s,h+=d,s/=256,u-=8);e[r+h-d]|=128*m}},{}],54:[function(e,t,r){t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},{}],55:[function(e,t,r){var n,o;n=self,o=()=>{return e={7629:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(9474),s=r(1687),a=r(8652),l=r(8160),u=r(3292),c=r(6354),f=r(8901),p=r(9708),h=r(6914),d=r(2294),m=r(6133),y=r(1152),g=r(8863),v=r(2036),b={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new d.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return n("function"==typeof p.describe,"Manifest functionality disabled"),p.describe(this)}allow(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"allow"),this._values(t,"_valids")}alter(e){n(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),n(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const r in e){const o=e[r];n("function"==typeof o,"Alteration adjuster for",r,"must be a function"),t.$_terms.alterations.push({target:r,adjuster:o})}return t.$_temp.ruleset=!1,t}artifact(e){return n(void 0!==e,"Artifact cannot be undefined"),n(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return n(!1===e||"string"==typeof e,"Invalid to value"),n(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return n(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return n(e,"Missing error"),n(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(n(!t,"Cannot combine options with description"),t=e.description,e=e.method),n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(n("string"==typeof e,"id must be a non-empty string"),n(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._values(t,"_invalids")}label(e){return n(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return n(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing notes");for(const e of t)n(e&&"string"==typeof e,"Notes must be non-empty strings");return this._inner("notes",t)}only(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){n(e,"Missing preferences"),n(void 0===e.context,"Cannot override context"),n(void 0===e.externals,"Cannot override externals"),n(void 0===e.warnings,"Cannot override warnings"),n(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return n(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}result(e){return n(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),r=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:r}),t}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}tag(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing tags");for(const e of t)n(e&&"string"==typeof e,"Tags must be non-empty strings");return this._inner("tags",t)}unit(e){return n(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l.verifyFlat(t,"valid");const n=this.allow(...t);return n.$_setFlag("only",!!n._valids,{clone:!1}),n}when(e,t){const r=this.clone();r.$_terms.whens||(r.$_terms.whens=[]);const o=u.when(r,e,t);if(!["any","link"].includes(r.type)){const e=o.is?[o]:o.switch;for(const t of e)n(!t.then||"any"===t.then.type||t.then.type===r.type,"Cannot combine",r.type,"with",t.then&&t.then.type),n(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===r.type,"Cannot combine",r.type,"with",t.otherwise&&t.otherwise.type)}return r.$_terms.whens.push(o),r.$_mutateRebuild()}cache(e){n(!this._inRuleset(),"Cannot set caching inside a ruleset"),n(!this._cache,"Cannot override schema cache"),n(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||a.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){n(l.isSchema(e),"Invalid schema object"),n("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),n(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),n(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const r=e.clone();for(const e of Object.keys(t))"type"!==e&&(r[e]=t[e]);t=r}t._ids.concat(e._ids),t._refs.register(e,m.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=v.merge(t._valids,e._valids,e._invalids),t._invalids=v.merge(t._invalids,e._invalids,e._valids);for(const r of e._singleRules.keys())t._singleRules.has(r)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==r)),t._singleRules.delete(r));for(const r of e._rules)e._definition.rules[r.method].multi||t._singleRules.set(r.name,r),t._rules.push(r);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const r=Object.assign({},e._flags);delete r.empty,s(t._flags,r)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const r=Object.assign({},e._flags);delete r.empty,s(t._flags,r)}else s(t._flags,e._flags);for(const r in e.$_terms){const n=e.$_terms[r];n?t.$_terms[r]?t.$_terms[r]=t.$_terms[r].concat(n):t.$_terms[r]=n.slice():t.$_terms[r]||(t.$_terms[r]=n)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return n(!e.base,"Cannot extend type with another base"),f.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){n(!this._inRuleset(),"Cannot fork inside a ruleset");let r=this;for(let n of[].concat(e))n=Array.isArray(n)?n:n.split("."),r=r._ids.fork(n,t,r);return r.$_temp.ruleset=!1,r}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),n(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const r=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;n(r>=0&&r<this._rules.length,"Cannot apply rules to empty ruleset");const i=this.clone();for(let s=r;s<i._rules.length;++s){const r=i._rules[s],a=o(r);for(const o in e)t.modifiers[o](a,e[o]),n(a.name===r.name,"Cannot change rule name");i._rules[s]=a,i._singleRules.get(a.name)===r&&i._singleRules.set(a.name,a)}return i.$_temp.ruleset=!1,i.$_mutateRebuild()}get ruleset(){n(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),n(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:r,adjuster:o}of this.$_terms.alterations)e.includes(r)&&(t=o(t),n(l.isSchema(t),"Alteration adjuster for",r,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return y.location?y.location(this):this}validate(e,t){return g.entry(e,this,t)}validateAsync(e,t){return g.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),n(e&&"object"==typeof e,"Invalid options"),n(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)n("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const r=this._definition.rules[t.method],o=t.args;n(r,"Unknown rule",t.method);const i=this.clone();if(o){n(1===Object.keys(o).length||Object.keys(o).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in o){let s=o[e];if(r.argsByName){const a=r.argsByName.get(e);if(a.ref&&l.isResolvable(s))t._resolve.push(e),i.$_mutateRegister(s);else if(a.normalize&&(s=a.normalize(s),o[e]=s),a.assert){const t=l.validateArg(s,e,a);n(!t,t,"or reference")}}void 0!==s?o[e]=s:delete o[e]}}return r.multi||(i._ruleRemove(t.name,{clone:!1}),i._singleRules.set(t.name,t)),!1===i.$_temp.ruleset&&(i.$_temp.ruleset=null),r.priority?i._rules.unshift(t):i._rules.push(t),i}$_compile(e,t){return u.schema(this.$_root,e,t)}$_createError(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=!1!==i.flags?this._flags:{},a=i.messages?h.merge(this._definition.messages,i.messages):this._definition.messages;return new c.Report(e,t,r,s,a,n,o)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,r,n){(r=Object.assign({},r)).abortEarly=!0,r._externals=!1,t.snapshot();const o=!g.validate(e,this,t,r,n).errors;return t.restore(),o}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),d.schema(this,e)||this}$_mutateRebuild(){return n(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,t)=>{let{source:r,name:n,path:o,key:i}=t;const s=this._definition[r][n]&&this._definition[r][n].register;!1!==s&&this.$_mutateRegister(e,{family:s,key:i})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e){let{family:t,key:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(e,t),this._ids.register(e,{key:r})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const o=this._definition.flags[e]||{};if(i(t,o.default)&&(t=void 0),i(t,this._flags[e]))return this;const s=!1!==r.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this[e][l.symbols.parent].call(this,...r)}$_validate(e,t,r){return g.validate(e,this,t,r)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=o(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const r in t){const n=t[r];e.$_terms[r]=n.init}return e.$_mutateRebuild()}_default(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.assertOptions(r,"literal"),n(void 0!==t,"Missing",e,"value"),n("function"==typeof t||!r.literal,"Only function value supports literal option"),"function"==typeof t&&r.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,r){if(!this.$_terms.whens)return{schema:this};const n=[],o=[];for(let i=0;i<this.$_terms.whens.length;++i){const s=this.$_terms.whens[i];if(s.concat){n.push(s.concat),o.push(`${i}.concat`);continue}const a=s.ref?s.ref.resolve(e,t,r):e,l=s.is?[s]:s.switch,u=o.length;for(let u=0;u<l.length;++u){const{is:c,then:f,otherwise:p}=l[u],h=`${i}${s.switch?"."+u:""}`;if(c.$_match(a,t.nest(c,`${h}.is`),r)){if(f){const i=t.localize([...t.path,`${h}.then`],t.ancestors,t.schemas),{schema:s,id:a}=f._generate(e,i,r);n.push(s),o.push(`${h}.then${a?`(${a})`:""}`);break}}else if(p){const i=t.localize([...t.path,`${h}.otherwise`],t.ancestors,t.schemas),{schema:s,id:a}=p._generate(e,i,r);n.push(s),o.push(`${h}.otherwise${a?`(${a})`:""}`);break}}if(s.break&&o.length>u)break}const i=o.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",i),!i)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[i])return{schema:this.$_temp.whens[i],id:i};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,r));for(const e of n)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...n]),this.$_temp.whens[i]=s,{schema:s,id:i}}_inner(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const o=this.clone();return o.$_terms[e]&&!r.override||(o.$_terms[e]=[]),r.single?o.$_terms[e].push(t):o.$_terms[e].push(...t),o.$_temp.ruleset=!1,o}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;const r=!1!==t.clone?this.clone():this;r._singleRules.delete(e);const n=[];for(let t=0;t<r._rules.length;++t){const o=r._rules[t];o.name!==e||o.keep?n.push(o):r._inRuleset()&&t<r.$_temp.ruleset&&--r.$_temp.ruleset}return r._rules=n,r}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const r=this.clone(),o=e[0]===l.symbols.override;if(o&&(e=e.slice(1)),!r[t]&&e.length?r[t]=new v:o&&(r[t]=e.length?new v:null,r.$_mutateRebuild()),!r[t])return r;o&&r[t].override();for(const o of e){n(void 0!==o,"Cannot call allow/valid/invalid with undefined"),n(o!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";r[e]&&(r[e].remove(o),r[e].length||(n("_valids"===t||!r._flags.only,"Setting invalid value",o,"leaves schema rejecting all values due to previous valid rule"),r[e]=null)),r[t].add(o,r._refs)}return r}}};b.Base.prototype[l.symbols.any]={version:l.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,e.exports=new b.Base},8652:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.assertOptions(e,["max"]),n(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let r=this._map.get(e);if(r)return r.value=t,void this._list.first(r);r=this._list.unshift({key:e,value:t}),this._map.set(e,r),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),o(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:r}=e;return t.prev=r,r&&(r.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,r)=>{"use strict";const n=r(375),o=r(7916),i=r(5934);let s,a;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=i.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";n(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const o=Object.keys(e).filter((e=>!t.includes(e)));n(0===o.length,`${r} contain unknown keys: ${o}`)},t.checkPreferences=function(e){a=a||r(3378);const t=a.preferences.validate(e);if(t.error)throw new o([t.error.details[0].message])},t.compare=function(e,t,r){switch(r){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e&&e[t.symbols.any];return!!o&&(n(r.legacy||o.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,n){s=s||r(6914),e=e||{},n=n||{};const o=Object.assign({},e,n);return n.errors&&e.errors&&(o.errors=Object.assign({},e.errors,n.errors),o.errors.wrap=Object.assign({},e.errors.wrap,n.errors.wrap)),n.messages&&(o.messages=s.compile(n.messages,e.messages)),delete o[t.symbols.prefs],o},t.tryWithPath=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,r.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,r,n){let{assert:o,message:i}=n;if(t.isSchema(o)){const t=o.validate(e);if(!t.error)return;return t.error.message}if(!o(e))return r?`${r} ${i}`:i},t.verifyFlat=function(e,t){for(const r of e)n(!Array.isArray(r),"Method no longer accepts array arguments:",t)}},3292:(e,t,r)=>{"use strict";const n=r(375),o=r(8160),i=r(6133),s={};t.schema=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.assertOptions(r,["appendPath","override"]);try{return s.schema(e,t,r)}catch(e){throw r.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,r){n(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(n(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const i=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return!1!==r.override?t.valid(e.override,...o):t.valid(...o)};if(s.simple(t))return i(e,t);if("function"==typeof t)return e.custom(t);if(n("object"==typeof t,"Invalid schema content:",typeof t),o.isResolvable(t))return i(e,t);if(o.isSchema(t))return t;if(Array.isArray(t)){for(const r of t)if(!s.simple(r))return e.alternatives().try(...t);return i(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?i(e.date(),t):(n(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return i.isRef(e)?e:i.create(e,t)},t.compile=function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.assertOptions(i,["legacy"]);const a=r&&r[o.symbols.any];if(a)return n(i.legacy||a.version===o.version,"Cannot mix different versions of joi schemas:",a.version,o.version),r;if("object"!=typeof r||!i.legacy)return t.schema(e,r,{appendPath:!0});const l=s.walk(r);return l?l.compile(l.root,r):t.schema(e,r,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[o.symbols.any];if(t)return{root:e[t.root],compile:t.compile};n(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const r=s.walk(e[t]);if(r)return r}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,r,a){if(void 0===a&&(n(r&&"object"==typeof r,"Missing options"),a=r,r=i.create(".")),Array.isArray(a)&&(a={switch:a}),o.assertOptions(a,["is","not","then","otherwise","switch","break"]),o.isSchema(r))return n(void 0===a.is,'"is" can not be used with a schema condition'),n(void 0===a.not,'"not" can not be used with a schema condition'),n(void 0===a.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:r,then:a.then,otherwise:a.otherwise,break:a.break});if(n(i.isRef(r)||"string"==typeof r,"Invalid condition:",r),n(void 0===a.not||void 0===a.is,'Cannot combine "is" with "not"'),void 0===a.switch){let l=a;void 0!==a.not&&(l={is:a.not,then:a.otherwise,otherwise:a.then,break:a.break});let u=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return n(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),n(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===a.is||i.isRef(a.is)||o.isSchema(a.is)||(u=u.required()),s.condition(e,{ref:t.ref(r),is:u,then:l.then,otherwise:l.otherwise,break:l.break})}n(Array.isArray(a.switch),'"switch" must be an array'),n(void 0===a.is,'Cannot combine "switch" with "is"'),n(void 0===a.not,'Cannot combine "switch" with "not"'),n(void 0===a.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(r),switch:[],break:a.break};for(let t=0;t<a.switch.length;++t){const r=a.switch[t],s=t===a.switch.length-1;o.assertOptions(r,s?["is","then","otherwise"]:["is","then"]),n(void 0!==r.is,'Switch statement missing "is"'),n(void 0!==r.then,'Switch statement missing "then"');const u={is:e.$_compile(r.is),then:e.$_compile(r.then)};if(i.isRef(r.is)||o.isSchema(r.is)||(u.is=u.is.required()),s){n(void 0===a.otherwise||void 0===r.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==a.otherwise?a.otherwise:r.otherwise;void 0!==t&&(n(void 0===l.break,"Cannot specify both otherwise and break"),u.otherwise=e.$_compile(t))}l.switch.push(u)}return l},s.condition=function(e,t){for(const r of["then","otherwise"])void 0===t[r]?delete t[r]:t[r]=e.$_compile(t[r]);return t}},6354:(e,t,r)=>{"use strict";const n=r(5688),o=r(8160),i=r(3328);t.Report=class{constructor(e,r,n,o,i,s,a){if(this.code=e,this.flags=o,this.messages=i,this.path=s.path,this.prefs=a,this.state=s,this.value=r,this.message=null,this.template=null,this.local=n||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,r){return t.template(this.value,e,r||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const r of e)"object"!=typeof r&&("string"==typeof r?(t&&(t+="."),t+=r):t+=`[${r}]`);return t},t.template=function(e,t,r,n,s){if(!t)return;if(i.isTemplate(t))return"root"!==r?t:null;let a=s.errors.language;if(o.isResolvable(a)&&(a=a.resolve(e,n,s)),a&&t[a]){if(void 0!==t[a][r])return t[a][r];if(void 0!==t[a]["*"])return t[a]["*"]}return t[r]?t[r]:t["*"]},t.label=function(e,r,n,o){if(e.label)return e.label;if(!n.errors.label)return"";let i=r.path;return"key"===n.errors.label&&r.path.length>1&&(i=r.path.slice(-1)),t.path(i)||t.template(null,n.messages,"root",r,n)||o&&t.template(null,o,"root",r,n)||"value"},t.process=function(e,r,n){if(!e)return null;const{override:o,message:i,details:s}=t.details(e);if(o)return o;if(n.errors.stack)return new t.ValidationError(i,s,r);const a=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(i,s,r);return Error.stackTraceLimit=a,l},t.details=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];const n=[];for(const o of e){if(o instanceof Error){if(!1!==t.override)return{override:o};const e=o.toString();r.push(e),n.push({message:e,type:"override",context:{error:o}});continue}const e=o.toString();r.push(e),n.push({message:e,path:o.path.filter((e=>"object"!=typeof e)),type:o.code,context:o.local})}return r.length>1&&(r=[...new Set(r)]),{message:r.join(". "),details:n}},t.ValidationError=class extends Error{constructor(e,t,r){super(e),this._original=r,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=n.error},8901:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(8160),s=r(6914),a={};t.type=function(e,t){const r=Object.getPrototypeOf(e),l=o(r),u=e._assign(Object.create(l)),c=Object.assign({},t);delete c.base,l._definition=c;const f=r._definition||{};c.messages=s.merge(f.messages,c.messages),c.properties=Object.assign({},f.properties,c.properties),u.type=c.type,c.flags=Object.assign({},f.flags,c.flags);const p=Object.assign({},f.terms);if(c.terms)for(const e in c.terms){const t=c.terms[e];n(void 0===u.$_terms[e],"Invalid term override for",c.type,e),u.$_terms[e]=t.init,p[e]=t}c.terms=p,c.args||(c.args=f.args),c.prepare=a.prepare(c.prepare,f.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=a.coerce(c.coerce,f.coerce),c.validate=a.validate(c.validate,f.validate);const h=Object.assign({},f.rules);if(c.rules)for(const e in c.rules){const t=c.rules[e];n("object"==typeof t,"Invalid rule definition for",c.type,e);let r=t.method;if(void 0===r&&(r=function(){return this.$_addRule(e)}),r&&(n(!l[e],"Rule conflict in",c.type,e),l[e]=r),n(!h[e],"Rule conflict in",c.type,e),h[e]=t,t.alias){const e=[].concat(t.alias);for(const r of e)l[r]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),n(!t.argsByName.has(e.name),"Duplicated argument name",e.name),i.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}c.rules=h;const d=Object.assign({},f.modifiers);if(c.modifiers)for(const e in c.modifiers){n(!l[e],"Rule conflict in",c.type,e);const t=c.modifiers[e];n("function"==typeof t,"Invalid modifier definition for",c.type,e);const r=function(t){return this.rule({[e]:t})};l[e]=r,d[e]=t}if(c.modifiers=d,c.overrides){l._super=r,u.$_super={};for(const e in c.overrides)n(r[e],"Cannot override missing",e),c.overrides[e][i.symbols.parent]=r[e],u.$_super[e]=r[e].bind(u);Object.assign(l,c.overrides)}c.cast=Object.assign({},f.cast,c.cast);const m=Object.assign({},f.manifest,c.manifest);return m.build=a.build(c.manifest&&c.manifest.build,f.manifest&&f.manifest.build),c.manifest=m,c.rebuild=a.rebuild(c.rebuild,f.rebuild),u},a.build=function(e,t){return e&&t?function(r,n){return t(e(r,n),n)}:e||t},a.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(r,n){let o;if((!t.from||t.from.includes(typeof r))&&(o=t.method(r,n),o)){if(o.errors||void 0===o.value)return o;r=o.value}if(!e.from||e.from.includes(typeof r)){const t=e.method(r,n);if(t)return t}return o}}:e||t},a.prepare=function(e,t){return e&&t?function(r,n){const o=e(r,n);if(o){if(o.errors||void 0===o.value)return o;r=o.value}return t(r,n)||o}:e||t},a.rebuild=function(e,t){return e&&t?function(r){t(r),e(r)}:e||t},a.validate=function(e,t){return e&&t?function(r,n){const o=t(r,n);if(o){if(o.errors&&(!Array.isArray(o.errors)||o.errors.length))return o;r=o.value}return e(r,n)||o}:e||t}},5107:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(8652),s=r(8160),a=r(3292),l=r(6354),u=r(8901),c=r(9708),f=r(6133),p=r(3328),h=r(1152);let d;const m={types:{alternatives:r(4946),any:r(8068),array:r(546),boolean:r(4937),date:r(7500),function:r(390),link:r(8785),number:r(3832),object:r(8966),string:r(7417),symbol:r(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(m.types))};for(const t of e._types)e[t]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n(!r.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),m.generate(this,m.types[t],r)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(){return this.any()[t](...arguments)};Object.assign(e,m.methods);for(const t in m.aliases){const r=m.aliases[t];e[t]=e[r]}return e.x=e.expression,h.setup&&h.setup(e),e}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:i.provider,assert(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];m.assert(e,t,!0,n)},attempt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return m.assert(e,t,!1,n)},build(e){return n("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return a.compile(this,e,t)},defaults(e){n("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const r of t._types){const o=e(t[r]());n(s.isSchema(o),"modifier must return a valid schema object"),t[r]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.generate(this,o,t)}}return t},expression(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new p(...t)},extend(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s.verifyFlat(t,"extend"),d=d||r(3378),n(t.length,"You need to provide at least one extension"),this.assert(t,d.extensions);const i=Object.assign({},this);i._types=new Set(i._types);for(let e of t){"function"==typeof e&&(e=e(i)),this.assert(e,d.extension);const t=m.expandExtension(e,i);for(const e of t){n(void 0===i[e.type]||i._types.has(e.type),"Cannot override name",e.type);const t=e.base||this.any(),r=u.type(t,e);i._types.add(e.type),i[e.type]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.generate(this,r,t)}}}return i},isError:l.ValidationError.isError,isExpression:p.isTemplate,isRef:f.isRef,isSchema:s.isSchema,in(){return f.in(...arguments)},override:s.symbols.override,ref(){return f.create(...arguments)},types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in m.aliases)e[t]=this[t]();return e}},m.assert=function(e,t,r,n){const i=n[0]instanceof Error||"string"==typeof n[0]?n[0]:null,a=null!==i?n[1]:n[0],u=t.validate(e,s.preferences({errors:{stack:!0}},a||{}));let c=u.error;if(!c)return u.value;if(i instanceof Error)throw i;const f=r&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof l.ValidationError==0&&(c=o(c)),c.message=i?`${i} ${f}`:f,c},m.generate=function(e,t,r){return n(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&r.length?t._definition.args(t,...r):t},m.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const r=[];for(const n of t._types)if(e.type.test(n)){const o=Object.assign({},e);o.type=n,o.base=t[n](),r.push(o)}return r},e.exports=m.root()},6914:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(3328);t.compile=function(e,t){if("string"==typeof e)return n(!t,"Cannot set single message string"),new i(e);if(i.isTemplate(e))return n(!t,"Cannot set single message template"),e;n("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?o(t):{};for(let r in e){const o=e[r];if("root"===r||i.isTemplate(o)){t[r]=o;continue}if("string"==typeof o){t[r]=new i(o);continue}n("object"==typeof o&&!Array.isArray(o),"Invalid message for",r);const s=r;for(r in t[s]=t[s]||{},o){const e=o[r];"root"===r||i.isTemplate(e)?t[s][r]=e:(n("string"==typeof e,"Invalid message for",r,"in",s),t[s][r]=new i(e))}}return t},t.decompile=function(e){const t={};for(let r in e){const n=e[r];if("root"===r){t.root=n;continue}if(i.isTemplate(n)){t[r]=n.describe({compact:!0});continue}const o=r;for(r in t[o]={},n){const e=n[r];"root"!==r?t[o][r]=e.describe({compact:!0}):t[o].root=e}}return t},t.merge=function(e,r){if(!e)return t.compile(r);if(!r)return e;if("string"==typeof r)return new i(r);if(i.isTemplate(r))return r;const s=o(e);for(let e in r){const t=r[e];if("root"===e||i.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new i(t);continue}n("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const o=e;for(e in s[o]=s[o]||{},t){const r=t[e];"root"===e||i.isTemplate(r)?s[o][e]=r:(n("string"==typeof r,"Invalid message for",e,"in",o),s[o][e]=new i(r))}}return s}},2294:(e,t,r)=>{"use strict";const n=r(375),o=r(8160),i=r(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,r]of e._byId.entries())n(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,r);for(const[t,r]of e._byKey.entries())n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,r)}fork(e,t,r){const i=this._collect(e);i.push({schema:r});const a=i.shift();let l={id:a.id,schema:t(a.schema)};n(o.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of i)l={id:e.id,schema:s.fork(e.schema,l.id,l.schema)};return l.schema}labels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e[0],n=this._get(r);if(!n)return[...t,...e].join(".");const o=e.slice(1);return t=[...t,n.schema._flags.label||r],o.length?n.schema._ids.labels(o,t):t.join(".")}reach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e[0],o=this._get(r);n(o,"Schema does not contain path",[...t,...e].join("."));const i=e.slice(1);return i.length?o.schema._ids.reach(i,[...t,r]):o.schema}register(e){let{key:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!o.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const r=e._flags.id;if(r){const t=this._byId.get(r);n(!t||t.schema===e,"Cannot add different schemas with the same id:",r),n(!this._byKey.has(r),"Schema id conflicts with existing key:",r),this._byId.set(r,{schema:e,id:r})}t&&(n(!this._byKey.has(t),"Schema already contains key:",t),n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=e[0],i=this._get(o);n(i,"Schema does not contain path",[...t,...e].join(".")),r=[i,...r];const s=e.slice(1);return s.length?i.schema._ids._collect(s,[...t,o],r):r}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,r,n){const o=t.schema(e,{each:(e,t)=>{let{key:o}=t;if(r===(e._flags.id||o))return n},ref:!1});return o?o.$_mutateRebuild():e},t.schema=function(e,t){let r;for(const n in e._flags){if("_"===n[0])continue;const o=s.scan(e._flags[n],{source:"flags",name:n},t);void 0!==o&&(r=r||e.clone(),r._flags[n]=o)}for(let n=0;n<e._rules.length;++n){const o=e._rules[n],i=s.scan(o.args,{source:"rules",name:o.name},t);if(void 0!==i){r=r||e.clone();const t=Object.assign({},o);t.args=i,r._rules[n]=t,r._singleRules.get(o.name)===o&&r._singleRules.set(o.name,t)}}for(const n in e.$_terms){if("_"===n[0])continue;const o=s.scan(e.$_terms[n],{source:"terms",name:n},t);void 0!==o&&(r=r||e.clone(),r.$_terms[n]=o)}return r},s.scan=function(e,t,r,n,a){const l=n||[];if(null===e||"object"!=typeof e)return;let u;if(Array.isArray(e)){for(let n=0;n<e.length;++n){const o="terms"===t.source&&"keys"===t.name&&e[n].key,i=s.scan(e[n],t,r,[n,...l],o);void 0!==i&&(u=u||e.slice(),u[n]=i)}return u}if(!1!==r.schema&&o.isSchema(e)||!1!==r.ref&&i.isRef(e)){const n=r.each(e,{...t,path:l,key:a});if(n===e)return;return n}for(const n in e){if("_"===n[0])continue;const o=s.scan(e[n],t,r,[n,...l],a);void 0!==o&&(u=u||Object.assign({},e),u[n]=o)}return u}},6133:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(9621),s=r(8160);let a;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),n(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const r=Object.assign({},l.defaults,t);delete r.prefix;const o=r.separator,i=l.context(e,o,t.prefix);if(r.type=i.type,e=i.key,"value"===r.type)if(i.root&&(n(!o||e[0]!==o,"Cannot specify relative path with root prefix"),r.ancestor="root",e||(e=null)),o&&o===e)e=null,r.ancestor=0;else if(void 0!==r.ancestor)n(!o||!e||e[0]!==o,"Cannot combine prefix with ancestor option");else{const[t,n]=l.ancestor(e,o);n&&""===(e=e.slice(n))&&(e=null),r.ancestor=t}return r.path=o?null===e?[]:e.split(o):[e],new l.Ref(r)},t.in=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,{...r,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},l.Ref=class{constructor(e){n("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),n([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),n(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),n(!e.map||Array.isArray(e.map),"options.map must be an array"),n(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),n("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n(!this.in||i.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(r.context,t,i):"local"===this.type?this._resolve(o,t,i):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,i):(n(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,i)):this._resolve(e,t,i)}_resolve(e,t,r){let n;if("value"===this.type&&t.mainstay.shadow&&!1!==r.shadow&&(n=t.mainstay.shadow.get(this.absolute(t))),void 0===n&&(n=i(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){const e=this.map.get(n);void 0!==e&&(n=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,n),n}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),r){const n=void 0===r.global?"$":r.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};const o=void 0===r.local?"#":r.local;if(o!==t&&e.startsWith(o))return{key:e.slice(o.length),type:"local"};const i=void 0===r.root?"/":r.root;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let r=2;for(;e[r]===t;)++r;return[r-1,r]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,n){if(e)if(n=void 0===n?t.toParent:n,Array.isArray(e))for(const t of e)this.register(t,n);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-n>=0&&this.refs.push({ancestor:t.ancestor-n,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-n>=0&&this.refs.push({ancestor:e.ancestor-n,root:e.root}),a=a||r(3328),a.isTemplate(e)&&this.register(e.refs(),n)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=o(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,r)=>{"use strict";const n=r(5107),o={};o.wrap=n.string().min(1).max(2).allow(!1),t.preferences=n.object({allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),context:n.object(),convert:n.boolean(),dateFormat:n.valid("date","iso","string","time","utc"),debug:n.boolean(),errors:{escapeHtml:n.boolean(),label:n.valid("path","key",!1),language:[n.string(),n.object().ref()],render:n.boolean(),stack:n.boolean(),wrap:{label:o.wrap,array:o.wrap,string:o.wrap}},externals:n.boolean(),messages:n.object(),noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:n.valid("required","optional","forbidden"),skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()}).strict(),o.nameRx=/^[a-zA-Z0-9]\w*$/,o.rule=n.object({alias:n.array().items(n.string().pattern(o.nameRx)).single(),args:n.array().items(n.string(),n.object({name:n.string().pattern(o.nameRx).required(),ref:n.boolean(),assert:n.alternatives([n.function(),n.object().schema()]).conditional("ref",{is:!0,then:n.required()}),normalize:n.function(),message:n.string().when("assert",{is:n.function(),then:n.required()})})),convert:n.boolean(),manifest:n.boolean(),method:n.function().allow(!1),multi:n.boolean(),validate:n.function()}),t.extension=n.object({type:n.alternatives([n.string(),n.object().regex()]).required(),args:n.function(),cast:n.object().pattern(o.nameRx,n.object({from:n.function().maxArity(1).required(),to:n.function().minArity(1).maxArity(2).required()})),base:n.object().schema().when("type",{is:n.object().regex(),then:n.forbidden()}),coerce:[n.function().maxArity(3),n.object({method:n.function().maxArity(3).required(),from:n.array().items(n.string()).single()})],flags:n.object().pattern(o.nameRx,n.object({setter:n.string(),default:n.any()})),manifest:{build:n.function().arity(2)},messages:[n.object(),n.string()],modifiers:n.object().pattern(o.nameRx,n.function().minArity(1).maxArity(2)),overrides:n.object().pattern(o.nameRx,n.function()),prepare:n.function().maxArity(3),rebuild:n.function().arity(1),rules:n.object().pattern(o.nameRx,o.rule),terms:n.object().pattern(o.nameRx,n.object({init:n.array().allow(null).required(),manifest:n.object().pattern(/.+/,[n.valid("schema","single"),n.object({mapped:n.object({from:n.string().required(),to:n.string().required()}).required()})])})),validate:n.function().maxArity(3)}).strict(),t.extensions=n.array().items(n.object(),n.function().arity(1)).strict(),o.desc={buffer:n.object({buffer:n.string()}),func:n.object({function:n.function().required(),options:{literal:!0}}),override:n.object({override:!0}),ref:n.object({ref:n.object({type:n.valid("value","global","local"),path:n.array().required(),separator:n.string().length(1).allow(!1),ancestor:n.number().min(0).integer().allow("root"),map:n.array().items(n.array().length(2)).min(1),adjust:n.function(),iterables:n.boolean(),in:n.boolean(),render:n.boolean()}).required()}),regex:n.object({regex:n.string().min(3)}),special:n.object({special:n.valid("deep").required()}),template:n.object({template:n.string().required(),options:n.object()}),value:n.object({value:n.alternatives([n.object(),n.array()]).required()})},o.desc.entity=n.alternatives([n.array().items(n.link("...")),n.boolean(),n.function(),n.number(),n.string(),o.desc.buffer,o.desc.func,o.desc.ref,o.desc.regex,o.desc.special,o.desc.template,o.desc.value,n.link("/")]),o.desc.values=n.array().items(null,n.boolean(),n.function(),n.number().allow(1/0,-1/0),n.string().allow(""),n.symbol(),o.desc.buffer,o.desc.func,o.desc.override,o.desc.ref,o.desc.regex,o.desc.template,o.desc.value),o.desc.messages=n.object().pattern(/.+/,[n.string(),o.desc.template,n.object().pattern(/.+/,[n.string(),o.desc.template])]),t.description=n.object({type:n.string().required(),flags:n.object({cast:n.string(),default:n.any(),description:n.string(),empty:n.link("/"),failover:o.desc.entity,id:n.string(),label:n.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:n.boolean(),unit:n.string()}).unknown(),preferences:{allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),convert:n.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:n.boolean(),label:["path","key"],language:[n.string(),o.desc.ref],wrap:{label:o.wrap,array:o.wrap}},externals:n.boolean(),messages:o.desc.messages,noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:["required","optional","forbidden"],skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()},allow:o.desc.values,invalid:o.desc.values,rules:n.array().min(1).items({name:n.string().required(),args:n.object().min(1),keep:n.boolean(),message:[n.string(),o.desc.messages],warn:n.boolean()}),keys:n.object().pattern(/.*/,n.link("/")),link:o.desc.ref}).pattern(/^[a-z]\w*$/,n.any())},493:(e,t,r)=>{"use strict";const n=r(8571),o=r(9621),i=r(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,r){this.path=e,this.ancestors=t,this.mainstay=r.mainstay,this.schemas=r.schemas,this.debug=null}localize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=new s.State(e,t,this);return r&&n.schemas&&(n.schemas=[s.schemas(r),...n.schemas]),n}nest(e,t){const r=new s.State(this.path,this.ancestors,this);return r.schemas=r.schemas&&[s.schemas(e),...r.schemas],r.debug=t,r}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=n(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return i.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,r){if(!e.length)return;if("strip"===r&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let n=this._values;for(let t=0;t<e.length;++t){const r=e[t];let o=n.get(r);o||(o=new Map,n.set(r,o)),n=o}n[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return o(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const r=e.slice(0,-1),n=e[e.length-1],i=o(this._values,r,{iterables:!0});t?i.set(n,t):i&&i.delete(n)}}},3328:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(5277),s=r(1447),a=r(8160),l=r(6354),u=r(6133),c={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=c.Template=class{constructor(e,t){n("string"==typeof e,"Template source must be a string"),n(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=o(t),this._parse()}_parse(){if(!this.source.includes("{"))return;const e=c.encode(this.source),t=c.split(e);let r=!1;const n=[],o=t.shift();o&&n.push(o);for(const e of t){const t="{"!==e[0],o=t?"}":"}}",i=e.indexOf(o);if(-1===i||"{"===e[1]){n.push(`{${c.decode(e)}`);continue}let s=e.slice(t?0:1,i);const a=":"===s[0];a&&(s=s.slice(1));const l=this._ref(c.decode(s),{raw:t,wrapped:a});n.push(l),"string"!=typeof l&&(r=!0);const u=e.slice(i+o.length);u&&n.push(c.decode(u))}r?this._template=n:this.rendered=n.join("")}static date(e,t){return c.dateFormat[t.dateFormat].call(e)}describe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new c.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[a.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,r,n){return this._template&&1===this._template.length?this._part(this._template[0],e,t,r,n,{}):this.render(e,t,r,n)}_part(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.ref?e.ref.resolve(...r):e.formula.evaluate(r)}render(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;const s=[];for(const a of this._template)if("string"==typeof a)s.push(a);else{const l=this._part(a,e,t,r,n,o),u=c.stringify(l,e,t,r,n,o);if(void 0!==u){const e=a.raw||!1===(o.errors&&o.errors.escapeHtml)?u:i(u);s.push(c.wrap(e,a.wrapped&&r.errors.wrap.label))}}return s.join("")}_ref(e,t){let{raw:r,wrapped:n}=t;const o=[],i=e=>{const t=u.create(e,this._settings);return o.push(t),e=>t.resolve(...e)};try{var a=new s.Parser(e,{reference:i,functions:c.functions,constants:c.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(a.single){if("reference"===a.single.type){const e=o[0];return{ref:e,raw:r,refs:o,wrapped:n||"local"===e.type&&"label"===e.key}}return c.stringify(a.single.value)}return{formula:a,raw:r,refs:o}}toString(){return this.source}},c.Template.prototype[a.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>c.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>c.closes.slice(0,t.length)))},c.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(e){const t=[];let r="";for(let n=0;n<e.length;++n){const o=e[n];if("{"===o){let o="";for(;n+1<e.length&&"{"===e[n+1];)o+="{",++n;t.push(r),r=o}else r+=o}return t.push(r),t},c.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},c.stringify=function(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=typeof e,a=n&&n.errors&&n.errors.wrap||{};let l=!1;if(u.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,r,n,o,{in:e.in,...i})),null===e)return"null";if("string"===s)return c.wrap(e,i.arrayItems&&a.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return c.Template.date(e,n);if(e instanceof Map){const t=[];for(const[r,n]of e.entries())t.push(`${r.toString()} -> ${n.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const f=[];for(const s of e)f.push(c.stringify(s,t,r,n,o,{arrayItems:!0,...i}));return c.wrap(f.join(", "),!l&&a.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(e,t,r)=>e?t:r,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,r,n,o,i]=this,s=i.messages;if(!s)return"";const a=l.template(t,s[0],e,r,n)||l.template(t,s[1],e,r,n);return a?a.render(t,r,n,o,i):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,r)=>{"use strict";const n=r(375),o=r(1687),i=r(8068),s=r(8160),a=r(3292),l=r(6354),u=r(6133),c={};e.exports=i.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 1===r.length&&Array.isArray(r[0])?e.try(...r[0]):e.try(...r)},validate(e,t){const{schema:r,error:n,state:i,prefs:s}=t;if(r._flags.match){const t=[],a=[];for(let n=0;n<r.$_terms.matches.length;++n){const o=r.$_terms.matches[n],l=i.nest(o.schema,`match.${n}`);l.snapshot();const u=o.schema.$_validate(e,l,s);u.errors?(a.push(u.errors),l.restore()):(t.push(u.value),l.commit())}if(0===t.length)return{errors:n("alternatives.any",{details:a.map((e=>l.details(e,{override:!1})))})};if("one"===r._flags.match)return 1===t.length?{value:t[0]}:{errors:n("alternatives.one")};if(t.length!==r.$_terms.matches.length)return{errors:n("alternatives.all",{details:a.map((e=>l.details(e,{override:!1})))})};const u=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&u(e.schema)));return u(r)?{value:t.reduce(((e,t)=>o(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const a=[];for(let t=0;t<r.$_terms.matches.length;++t){const n=r.$_terms.matches[t];if(n.schema){const r=i.nest(n.schema,`match.${t}`);r.snapshot();const o=n.schema.$_validate(e,r,s);if(!o.errors)return r.commit(),o;r.restore(),a.push({schema:n.schema,reports:o.errors});continue}const o=n.ref?n.ref.resolve(e,i,s):e,l=n.is?[n]:n.switch;for(let r=0;r<l.length;++r){const a=l[r],{is:u,then:c,otherwise:f}=a,p=`match.${t}${n.switch?"."+r:""}`;if(u.$_match(o,i.nest(u,`${p}.is`),s)){if(c)return c.$_validate(e,i.nest(c,`${p}.then`),s)}else if(f)return f.$_validate(e,i.nest(f,`${p}.otherwise`),s)}}return c.errors(a,t)},rules:{conditional:{method(e,t){n(!this._flags._endedSwitch,"Unreachable condition"),n(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),n(void 0===t.break,"Cannot use break option with alternatives conditional");const r=this.clone(),o=a.when(r,e,t),i=o.is?[o]:o.switch;for(const e of i)if(e.then&&e.otherwise){r.$_setFlag("_endedSwitch",!0,{clone:!1});break}return r.$_terms.matches.push(o),r.$_mutateRebuild()}},match:{method(e){if(n(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)n(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t.length,"Missing alternative schemas"),s.verifyFlat(t,"try"),n(!this._flags._endedSwitch,"Unreachable condition");const o=this.clone();for(const e of t)o.$_terms.matches.push({schema:o.$_compile(e)});return o.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,r)=>"is"!==r.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const r of t.matches){const{schema:t,ref:n,is:o,not:i,then:s,otherwise:a}=r;e=t?e.try(t):n?e.conditional(n,{is:o,then:s,not:i,otherwise:a,switch:r.switch}):e.conditional(o,{then:s,otherwise:a})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(e,t){let{error:r,state:n}=t;if(!e.length)return{errors:r("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const o=new Set,i=[];for(const{reports:t,schema:s}of e){if(t.length>1)return c.unmatched(e,r);const a=t[0];if(a instanceof l.Report==0)return c.unmatched(e,r);if(a.state.path.length!==n.path.length){i.push({type:s.type,report:a});continue}if("any.only"===a.code){for(const e of a.local.valids)o.add(e);continue}const[u,f]=a.code.split(".");"base"===f?o.add(u):i.push({type:s.type,report:a})}return i.length?1===i.length?{errors:i[0].report}:c.unmatched(e,r):{errors:r("alternatives.types",{types:[...o]})}},c.unmatched=function(e,t){const r=[];for(const t of e)r.push(...t.reports);return{errors:t("alternatives.match",l.details(r,{override:!1}))}}},8068:(e,t,r)=>{"use strict";const n=r(375),o=r(7629),i=r(8160),s=r(6914);e.exports=o.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,r){let{method:n}=r;try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){n(i.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return n(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate(e,t,r){let{code:n,local:o}=r;return t.error(n,o)},args:["code","local"],multi:!0}},modifiers:{keep(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message(e,t){e.message=s.compile(t)},warn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build(e,t){for(const r in t){const n=t[r];if(["examples","externals","metas","notes","tags"].includes(r))for(const t of n)e=e[r.slice(0,-1)](t);else if("alterations"!==r)if("whens"!==r){if("shared"===r)for(const t of n)e=e.shared(t)}else for(const t of n){const{ref:r,is:n,not:o,then:i,otherwise:s,concat:a}=t;e=a?e.concat(a):r?e.when(r,{is:n,not:o,then:i,otherwise:s,switch:t.switch,break:t.break}):e.when(n,{then:i,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:r}of n)t[e]=r;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,r)=>{"use strict";const n=r(375),o=r(9474),i=r(9621),s=r(8068),a=r(8160),l=r(3292),u={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,t){let{schema:r,state:n,prefs:o}=t;if(!Array.isArray(e))return;const i=r.$_getRule("sort");return i?u.sort(r,e,i.args.options,n,o):void 0}},validate(e,t){let{schema:r,error:n}=t;if(!Array.isArray(e)){if(r._flags.single){const t=[e];return t[a.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(r.$_getRule("items")||r.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,t,r){let{state:n,prefs:o,error:i}=t,{schema:s}=r;const a=[e,...n.ancestors];for(let t=0;t<e.length;++t){const r=n.localize([...n.path,t],a,s);if(s.$_match(e[t],r,o))return e}const l=s._flags.label;return l?i("array.hasKnown",{patternLabel:l}):i("array.hasUnknown",null)},multi:!0},items:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.verifyFlat(t,"items");const n=this.$_addRule("items");for(let e=0;e<t.length;++e){const r=a.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});n.$_terms.items.push(r)}return n.$_mutateRebuild()},validate(e,t){let{schema:r,error:n,state:o,prefs:i,errorsArray:s}=t;const l=r.$_terms._requireds.slice(),c=r.$_terms.ordered.slice(),f=[...r.$_terms._inclusions,...l],p=!e[a.symbols.arraySingle];delete e[a.symbols.arraySingle];const h=s();let d=e.length;for(let t=0;t<d;++t){const s=e[t];let a=!1,m=!1;const y=p?t:new Number(t),g=[...o.path,y];if(!r._flags.sparse&&void 0===s){if(h.push(n("array.sparse",{key:y,path:g,pos:t,value:void 0},o.localize(g))),i.abortEarly)return h;c.shift();continue}const v=[e,...o.ancestors];for(const e of r.$_terms._exclusions)if(e.$_match(s,o.localize(g,v,e),i,{presence:"ignore"})){if(h.push(n("array.excludes",{pos:t,value:s},o.localize(g))),i.abortEarly)return h;a=!0,c.shift();break}if(a)continue;if(r.$_terms.ordered.length){if(c.length){const a=c.shift(),l=a.$_validate(s,o.localize(g,v,a),i);if(l.errors){if(h.push(...l.errors),i.abortEarly)return h}else if("strip"===a._flags.result)u.fastSplice(e,t),--t,--d;else{if(!r._flags.sparse&&void 0===l.value){if(h.push(n("array.sparse",{key:y,path:g,pos:t,value:void 0},o.localize(g))),i.abortEarly)return h;continue}e[t]=l.value}continue}if(!r.$_terms.items.length){if(h.push(n("array.orderedLength",{pos:t,limit:r.$_terms.ordered.length})),i.abortEarly)return h;break}}const b=[];let w=l.length;for(let a=0;a<w;++a){const c=o.localize(g,v,l[a]);c.snapshot();const f=l[a].$_validate(s,c,i);if(b[a]=f,!f.errors){if(c.commit(),e[t]=f.value,m=!0,u.fastSplice(l,a),--a,--w,!r._flags.sparse&&void 0===f.value&&(h.push(n("array.sparse",{key:y,path:g,pos:t,value:void 0},o.localize(g))),i.abortEarly))return h;break}c.restore()}if(m)continue;const _=i.stripUnknown&&!!i.stripUnknown.arrays||!1;w=f.length;for(const c of f){let f;const p=l.indexOf(c);if(-1!==p)f=b[p];else{const l=o.localize(g,v,c);if(l.snapshot(),f=c.$_validate(s,l,i),!f.errors){l.commit(),"strip"===c._flags.result?(u.fastSplice(e,t),--t,--d):r._flags.sparse||void 0!==f.value?e[t]=f.value:(h.push(n("array.sparse",{key:y,path:g,pos:t,value:void 0},o.localize(g))),a=!0),m=!0;break}l.restore()}if(1===w){if(_){u.fastSplice(e,t),--t,--d,m=!0;break}if(h.push(...f.errors),i.abortEarly)return h;a=!0;break}}if(!a&&(r.$_terms._inclusions.length||r.$_terms._requireds.length)&&!m){if(_){u.fastSplice(e,t),--t,--d;continue}if(h.push(n("array.includes",{pos:t,value:s},o.localize(g))),i.abortEarly)return h}}return l.length&&u.fillMissedErrors(r,h,l,e,o,i),c.length&&(u.fillOrderedErrors(r,h,c,e,o,i),h.length||u.fillDefault(c,e,o,i)),h.length?h:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,r,n){let{limit:o}=r,{name:i,operator:s,args:l}=n;return a.compare(e.length,o,s)?e:t.error("array."+i,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.verifyFlat(t,"ordered");const n=this.$_addRule("items");for(let e=0;e<t.length;++e){const r=a.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});u.validateSingle(r,n),n.$_mutateRegister(r),n.$_terms.ordered.push(r)}return n.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return n(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),n(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,t,r){let{error:n,state:o,prefs:i,schema:s}=t,{options:a}=r;const{value:l,errors:c}=u.sort(s,e,a,o,i);if(c)return c;for(let t=0;t<e.length;++t)if(e[t]!==l[t])return n("array.sort",{order:a.order,by:a.by?a.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),a.assertOptions(t,["ignoreUndefined","separator"]);const r={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const n=a.default(t.separator,".");r.path=n?e.split(n):[e]}else r.comparator=e;return this.$_addRule(r)},validate(e,t,r,s){let{state:a,error:l,schema:u}=t,{comparator:c,options:f}=r,{comparator:p,path:h}=s;const d={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=p||o,y=f.ignoreUndefined;for(let t=0;t<e.length;++t){const r=h?i(e[t],h):e[t],o=p?d.custom:d[typeof r];if(n(o,"Failed to find unique map container for type",typeof r),o instanceof Map){const n=o.entries();let i;for(;!(i=n.next()).done;)if(m(i.value[0],r)){const r=a.localize([...a.path,t],[e,...a.ancestors]),n={pos:t,value:e[t],dupePos:i.value[1],dupeValue:e[i.value[1]]};return h&&(n.path=c),l("array.unique",n,r)}o.set(r,t)}else{if((!y||void 0!==r)&&void 0!==o[r]){const n={pos:t,value:e[t],dupePos:o[r],dupeValue:e[o[r]]};return h&&(n.path=c),l("array.unique",n,a.localize([...a.path,t],[e,...a.ancestors]))}o[r]=t}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)u.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)u.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(e,t,r,n,o,i){const s=[];let a=0;for(const e of r){const t=e._flags.label;t?s.push(t):++a}s.length?a?t.push(e.$_createError("array.includesRequiredBoth",n,{knownMisses:s,unknownMisses:a},o,i)):t.push(e.$_createError("array.includesRequiredKnowns",n,{knownMisses:s},o,i)):t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:a},o,i))},u.fillOrderedErrors=function(e,t,r,n,o,i){const s=[];for(const e of r)"required"===e._flags.presence&&s.push(e);s.length&&u.fillMissedErrors(e,t,s,n,o,i)},u.fillDefault=function(e,t,r,n){const o=[];let i=!0;for(let s=e.length-1;s>=0;--s){const a=e[s],l=[t,...r.ancestors],u=a.$_validate(void 0,r.localize(r.path,l,a),n).value;if(i){if(void 0===u)continue;i=!1}o.unshift(u)}o.length&&t.push(...o)},u.fastSplice=function(e,t){let r=t;for(;r<e.length;)e[r++]=e[r];--e.length},u.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(n(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},u.sort=function(e,t,r,n,o){const i="ascending"===r.order?1:-1,s=-1*i,a=i,l=(l,c)=>{let f=u.compare(l,c,s,a);if(null!==f)return f;if(r.by&&(l=r.by.resolve(l,n,o),c=r.by.resolve(c,n,o)),f=u.compare(l,c,s,a),null!==f)return f;const p=typeof l;if(p!==typeof c)throw e.$_createError("array.sort.mismatching",t,null,n,o);if("number"!==p&&"string"!==p)throw e.$_createError("array.sort.unsupported",t,{type:p},n,o);return"number"===p?(l-c)*i:l<c?s:a};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},u.compare=function(e,t,r,n){return e===t?0:void 0===e?1:void 0===t?-1:null===e?n:null===t?r:null}},4937:(e,t,r)=>{"use strict";const n=r(375),o=r(8068),i=r(8160),s=r(2036),a={isBool:function(e){return"boolean"==typeof e}};e.exports=o.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,t){let{schema:r}=t;if("boolean"!=typeof e){if("string"==typeof e){const t=r._flags.sensitive?e:e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e&&(e=r.$_terms.truthy&&r.$_terms.truthy.has(e,null,null,!r._flags.sensitive)||(!r.$_terms.falsy||!r.$_terms.falsy.has(e,null,null,!r._flags.sensitive))&&e),{value:e}}},validate(e,t){let{error:r}=t;if("boolean"!=typeof e)return{value:e,errors:r("boolean.base")}},rules:{truthy:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.verifyFlat(t,"truthy");const o=this.clone();o.$_terms.truthy=o.$_terms.truthy||new s;for(let e=0;e<t.length;++e){const r=t[e];n(void 0!==r,"Cannot call truthy with undefined"),o.$_terms.truthy.add(r)}return o}},falsy:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.verifyFlat(t,"falsy");const o=this.clone();o.$_terms.falsy=o.$_terms.falsy||new s;for(let e=0;e<t.length;++e){const r=t[e];n(void 0!==r,"Cannot call falsy with undefined"),o.$_terms.falsy.add(r)}return o}},sensitive:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:a.isBool,to:(e,t)=>e?1:0},string:{from:a.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,r)=>{"use strict";const n=r(375),o=r(8068),i=r(8160),s=r(3328),a={isDate:function(e){return e instanceof Date}};e.exports=o.extend({type:"date",coerce:{from:["number","string"],method(e,t){let{schema:r}=t;return{value:a.parse(e,r._flags.format)||e}}},validate(e,t){let{schema:r,error:n,prefs:o}=t;if(e instanceof Date&&!isNaN(e.getTime()))return;const i=r._flags.format;return o.convert&&i&&"string"==typeof e?{value:e,errors:n("date.format",{format:i})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,r,n){let{date:o}=r,{name:s,operator:a,args:l}=n;const u="now"===o?Date.now():o.getTime();return i.compare(e.getTime(),u,a)?e:t.error("date."+s,{limit:l.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:a.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return n(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return n(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:a.isDate,to:(e,t)=>e.getTime()},string:{from:a.isDate,to(e,t){let{prefs:r}=t;return s.date(e,r)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),a.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return i.isIsoDate(e)?a.date(e.toString()):null;const r=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return a.date(1*e);if("unix"===t)return a.date(1e3*e);if("string"==typeof r)return null}return a.date(e)},a.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,r)=>{"use strict";const n=r(375),o=r(7824);e.exports=o.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,r){let{n:n}=r;return e.length===n?e:t.error("function.arity",{n:n})}},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return n(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,r){let{n:n}=r;return e.length>=n?e:t.error("function.minArity",{n:n})}},maxArity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,r){let{n:n}=r;return e.length<=n?e:t.error("function.maxArity",{n:n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,r)=>{"use strict";const n=r(978),o=r(375),i=r(8571),s=r(3652),a=r(8068),l=r(8160),u=r(3292),c=r(6354),f=r(6133),p=r(3328),h={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=a.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,t){let{schema:r,error:n,state:o,prefs:i}=t;if(!e||typeof e!==r.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:r.$_property("typeof")})};if(!(r.$_terms.renames||r.$_terms.dependencies||r.$_terms.keys||r.$_terms.patterns||r.$_terms.externals))return;e=h.clone(e,i);const s=[];if(r.$_terms.renames&&!h.rename(r,e,o,i,s))return{value:e,errors:s};if(!r.$_terms.keys&&!r.$_terms.patterns&&!r.$_terms.dependencies)return{value:e,errors:s};const a=new Set(Object.keys(e));if(r.$_terms.keys){const t=[e,...o.ancestors];for(const n of r.$_terms.keys){const r=n.key,l=e[r];a.delete(r);const u=o.localize([...o.path,r],t,n),c=n.schema.$_validate(l,u,i);if(c.errors){if(i.abortEarly)return{value:e,errors:c.errors};void 0!==c.value&&(e[r]=c.value),s.push(...c.errors)}else"strip"===n.schema._flags.result||void 0===c.value&&void 0!==l?delete e[r]:void 0!==c.value&&(e[r]=c.value)}}if(a.size||r._flags._hasPatternMatch){const t=h.unknown(r,e,a,s,o,i);if(t)return t}if(r.$_terms.dependencies)for(const t of r.$_terms.dependencies){if(null!==t.key&&!1===h.isPresent(t.options)(t.key.resolve(e,o,i,null,{shadow:!1})))continue;const n=h.dependencies[t.rel](r,t,e,o,i);if(n){const t=r.$_createError(n.code,e,n.context,o,i);if(i.abortEarly)return{value:e,errors:t};s.push(t)}}return{value:e,errors:s}},rules:{and:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"and"),h.dependency(this,"and",null,t)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,r){p.isTemplate(e)||(e=u.ref(e)),o(void 0===r||"string"==typeof r,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:r}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate(e,t,r){let{error:n,prefs:o,state:i}=t,{subject:s,schema:a,message:l}=r;const u=s.resolve(e,i,o),c=f.isRef(s)?s.absolute(i):[];return a.$_match(u,i.localize(c,[e,...i.ancestors],a),o)?e:n("object.assert",{subject:s,message:l})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return o("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,r){let{constructor:n,name:o}=r;return e instanceof n?e:t.error("object.instance",{type:o,value:e})},args:["constructor","name"]},keys:{method(e){o(void 0===e||"object"==typeof e,"Object schema must be a valid object"),o(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new h.Keys;for(const r in e)l.tryWithPath((()=>t.$_terms.keys.push({key:r,schema:this.$_compile(e[r])})),r)}else t.$_terms.keys=new h.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,r,n){let{limit:o}=r,{name:i,operator:s,args:a}=n;return l.compare(Object.keys(e).length,o,s)?e:t.error("object."+i,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"nand"),h.dependency(this,"nand",null,t)}},or:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"or"),h.dependency(this,"or",null,t)}},oxor:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h.dependency(this,"oxor",null,t)}},pattern:{method(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e instanceof RegExp;n||(e=this.$_compile(e,{appendPath:!0})),o(void 0!==t,"Invalid rule"),l.assertOptions(r,["fallthrough","matches"]),n&&o(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const i=this.clone();i.$_terms.patterns=i.$_terms.patterns||[];const s={[n?"regex":"schema"]:e,rule:t};return r.matches&&(s.matches=this.$_compile(r.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),i.$_mutateRegister(s.matches),i.$_setFlag("_hasPatternMatch",!0,{clone:!1})),r.fallthrough&&(s.fallthrough=!0),i.$_terms.patterns.push(s),i.$_mutateRegister(t),i}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>f.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),o("string"==typeof t||t instanceof p,"Invalid rename to argument"),o(t!==e,"Cannot rename key to same name:",e),l.assertOptions(r,["alias","ignoreUndefined","override","multiple"]);const i=this.clone();i.$_terms.renames=i.$_terms.renames||[];for(const t of i.$_terms.renames)o(t.from!==e,"Cannot rename the same key multiple times");return t instanceof p&&i.$_mutateRegister(t),i.$_terms.renames.push({from:e,to:t,options:n(h.renameDefaults,r)}),i}},schema:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,r){let{type:n}=r;return!l.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e}},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.dependency(this,"with",e,t,r)}},without:{method(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.dependency(this,"without",e,t,r)}},xor:{method(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return l.verifyFlat(t,"xor"),h.dependency(this,"xor",null,t)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const r of e.$_terms.keys)l.tryWithPath((()=>t.add(r,{after:r.schema.$_rootReferences(),group:r.key})),r.key);e.$_terms.keys=new h.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:r,key:n=null,peers:o,options:i}of t.dependencies)e=h.dependency(e,r,n,o,i);if(t.patterns)for(const{regex:r,schema:n,rule:o,fallthrough:i,matches:s}of t.patterns)e=e.pattern(r||n,o,{fallthrough:i,matches:s});if(t.renames)for(const{from:r,to:n,options:o}of t.renames)e=e.rename(r,n,o);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),h.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return i(e,{shallow:!0});const r=Object.create(Object.getPrototypeOf(e));return Object.assign(r,e),r}const r=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)};return r.prototype=i(e.prototype),Object.defineProperty(r,"name",{value:e.name,writable:!1}),Object.defineProperty(r,"length",{value:e.length,writable:!1}),Object.assign(r,e),r},h.dependency=function(e,t,r,n,i){o(null===r||"string"==typeof r,t,"key must be a strings"),i||(i=n.length>1&&"object"==typeof n[n.length-1]?n.pop():{}),l.assertOptions(i,["separator","isPresent"]),n=[].concat(n);const s=l.default(i.separator,"."),a=[];for(const e of n)o("string"==typeof e,t,"peers must be strings"),a.push(u.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==r&&(r=u.ref(r,{separator:s,ancestor:0,prefix:!1}));const c=e.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new h.Dependency(t,r,a,n,i)),c},h.dependencies={and(e,t,r,n,o){const i=[],s=[],a=t.peers.length,l=h.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(r,n,o,null,{shadow:!1}))?i.push(e.key):s.push(e.key);if(i.length!==a&&s.length!==a)return{code:"object.and",context:{present:s,presentWithLabels:h.keysToLabels(e,s),missing:i,missingWithLabels:h.keysToLabels(e,i)}}},nand(e,t,r,n,o){const i=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(r,n,o,null,{shadow:!1}))&&i.push(e.key);if(i.length!==t.peers.length)return;const a=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:h.keysToLabels(e,a),peers:l,peersWithLabels:h.keysToLabels(e,l)}}},or(e,t,r,n,o){const i=h.isPresent(t.options);for(const e of t.peers)if(i(e.resolve(r,n,o,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)}}},oxor(e,t,r,n,o){const i=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(r,n,o,null,{shadow:!1}))&&i.push(e.key);if(!i.length||1===i.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return a.present=i,a.presentWithLabels=h.keysToLabels(e,i),{code:"object.oxor",context:a}},with(e,t,r,n,o){const i=h.isPresent(t.options);for(const s of t.peers)if(!1===i(s.resolve(r,n,o,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},without(e,t,r,n,o){const i=h.isPresent(t.options);for(const s of t.peers)if(i(s.resolve(r,n,o,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:h.keysToLabels(e,s.key)}}},xor(e,t,r,n,o){const i=[],s=h.isPresent(t.options);for(const e of t.peers)s(e.resolve(r,n,o,null,{shadow:!1}))&&i.push(e.key);if(1===i.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return 0===i.length?{code:"object.missing",context:a}:(a.present=i,a.presentWithLabels=h.keysToLabels(e,i),{code:"object.xor",context:a})}},h.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},h.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},h.rename=function(e,t,r,n,o){const i={};for(const s of e.$_terms.renames){const a=[],l="string"!=typeof s.from;if(l)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const r=s.from.exec(e);r&&a.push({from:e,to:s.to,match:r})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||a.push(s);for(const u of a){const a=u.from;let c=u.to;if(c instanceof p&&(c=c.render(t,r,n,u.match)),a!==c){if(!s.options.multiple&&i[c]&&(o.push(e.$_createError("object.rename.multiple",t,{from:a,to:c,pattern:l},r,n)),n.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,c)&&!s.options.override&&!i[c]&&(o.push(e.$_createError("object.rename.override",t,{from:a,to:c,pattern:l},r,n)),n.abortEarly))return!1;void 0===t[a]?delete t[c]:t[c]=t[a],i[c]=!0,s.options.alias||delete t[a]}}}return!0},h.unknown=function(e,t,r,n,o,i){if(e.$_terms.patterns){let s=!1;const a=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),l=[t,...o.ancestors];for(const s of r){const u=t[s],c=[...o.path,s];for(let f=0;f<e.$_terms.patterns.length;++f){const p=e.$_terms.patterns[f];if(p.regex){const e=p.regex.test(s);if(o.mainstay.tracer.debug(o,"rule",`pattern.${f}`,e?"pass":"error"),!e)continue}else if(!p.schema.$_match(s,o.nest(p.schema,`pattern.${f}`),i))continue;r.delete(s);const h=o.localize(c,l,{schema:p.rule,key:s}),d=p.rule.$_validate(u,h,i);if(d.errors){if(i.abortEarly)return{value:t,errors:d.errors};n.push(...d.errors)}if(p.matches&&a[f].push(s),t[s]=d.value,!p.fallthrough)break}}if(s)for(let r=0;r<a.length;++r){const s=a[r];if(!s)continue;const u=e.$_terms.patterns[r].matches,f=o.localize(o.path,l,u),p=u.$_validate(s,f,i);if(p.errors){const r=c.details(p.errors,{override:!1});r.matches=s;const a=e.$_createError("object.pattern.match",t,r,o,i);if(i.abortEarly)return{value:t,errors:a};n.push(a)}}}if(r.size&&(e.$_terms.keys||e.$_terms.patterns)){if(i.stripUnknown&&!e._flags.unknown||i.skipFunctions){const e=!(!i.stripUnknown||!0!==i.stripUnknown&&!i.stripUnknown.objects);for(const n of r)e?(delete t[n],r.delete(n)):"function"==typeof t[n]&&r.delete(n)}if(!l.default(e._flags.unknown,i.allowUnknown))for(const s of r){const r=o.localize([...o.path,s],[]),a=e.$_createError("object.unknown",t[s],{child:s},r,i,{flags:!1});if(i.abortEarly)return{value:t,errors:a};n.push(a)}}},h.Dependency=class{constructor(e,t,r,n,o){this.rel=e,this.key=t,this.peers=r,this.paths=n,this.options=o}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},h.Keys=class extends Array{concat(e){const t=this.slice(),r=new Map;for(let e=0;e<t.length;++e)r.set(t[e].key,e);for(const n of e){const e=n.key,o=r.get(e);void 0!==o?t[o]={key:e,schema:t[o].schema.concat(n.schema)}:t.push(n)}return t}}},8785:(e,t,r)=>{"use strict";const n=r(375),o=r(8068),i=r(8160),s=r(3292),a=r(6354),l={};e.exports=o.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,t){let{schema:r,state:o,prefs:i}=t;n(r.$_terms.link,"Uninitialized link schema");const s=l.generate(r,e,o,i),a=r.$_terms.link[0].ref;return s.$_validate(e,o.nest(s,`link:${a.display}:${s.type}`),i)},generate:(e,t,r,n)=>l.generate(e,t,r,n),rules:{ref:{method(e){n(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),n("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),n("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat(e){n(this.$_terms.link,"Uninitialized link schema"),n(i.isSchema(e),"Invalid schema object"),n("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(n(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,r,n){let o=r.mainstay.links.get(e);if(o)return o._generate(t,r,n).schema;const i=e.$_terms.link[0].ref,{perspective:s,path:a}=l.perspective(i,r);l.assert(s,"which is outside of schema boundaries",i,e,r,n);try{o=a.length?s.$_reach(a):s}catch(t){l.assert(!1,"to non-existing schema",i,e,r,n)}return l.assert("link"!==o.type,"which is another link",i,e,r,n),e._flags.relative||r.mainstay.links.set(e,o),o._generate(t,r,n).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:r,key:n}of t.schemas){if((r._flags.id||n)===e.path[0])return{perspective:r,path:e.path.slice(1)};if(r.$_terms.shared)for(const t of r.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,r,o,i,s){e||n(!1,`"${a.label(o._flags,i,s)}" contains link reference "${r.display}" ${t}`)}},3832:(e,t,r)=>{"use strict";const n=r(375),o=r(8068),i=r(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=o.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,t){let{schema:r,error:n}=t;if(!e.match(s.numberRx))return;e=e.trim();const o={value:parseFloat(e)};if(0===o.value&&(o.value=0),!r._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(o.value)))return o.errors=n("number.unsafe"),o}else{const t=o.value.toString();if(t.match(/e/i))return o;if(t!==s.normalizeDecimal(e))return o.errors=n("number.unsafe"),o}return o}},validate(e,t){let{schema:r,error:n,prefs:o}=t;if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!i.isNumber(e))return{value:e,errors:n("number.base")};const s={value:e};if(o.convert){const e=r.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);s.value=Math.round(s.value*t)/t}}return 0===s.value&&(s.value=0),!r._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=n("number.unsafe")),s},rules:{compare:{method:!1,validate(e,t,r,n){let{limit:o}=r,{name:s,operator:a,args:l}=n;return i.compare(e,o,a)?e:t.error("number."+s,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:i.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,r,n){let{base:o}=r;return e*(1/o)%1==0?e:t.error("number.multiple",{multiple:n.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return n(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,r){let{limit:n}=r;const o=e.toString().match(s.precisionRx);return Math.max((o[1]?o[1].length:0)-(o[2]?parseInt(o[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return n(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,r){let{sign:n}=r;return"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)}},unsafe:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,r)=>{"use strict";const n=r(7824);e.exports=n.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,r)=>{"use strict";const n=r(375),o=r(5380),i=r(1745),s=r(9959),a=r(6064),l=r(9926),u=r(5752),c=r(8068),f=r(8160),p={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,t){let{schema:r,state:n,prefs:o}=t;const i=r.$_getRule("normalize");i&&(e=e.normalize(i.args.form));const s=r.$_getRule("case");s&&(e="upper"===s.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=r.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),r.$_terms.replacements)for(const t of r.$_terms.replacements)e=e.replace(t.pattern,t.replacement);const l=r.$_getRule("hex");if(l&&l.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),r.$_getRule("isoDate")){const t=p.isoDate(e);t&&(e=t)}if(r._flags.truncate){const t=r.$_getRule("max");if(t){let i=t.args.limit;if(f.isResolvable(i)&&(i=i.resolve(e,n,o),!f.limit(i)))return{value:e,errors:r.$_createError("any.ref",i,{ref:t.args.limit,arg:"limit",reason:"must be a positive integer"},n,o)};e=e.slice(0,i)}}return{value:e}}},validate(e,t){let{schema:r,error:n}=t;if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const t=r.$_getRule("min");if(t&&0===t.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),n("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,r){let{options:n}=r;return p.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return n(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,r){let{direction:n}=r;return"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let r=e.length,n=0,o=1;for(;r--;){const t=e.charAt(r)*o;n+=t-9*(t>9),o^=3}return n>0&&n%10==0?e:t.error("string.creditCard")}},dataUri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,r){let{options:n}=r;const o=e.match(p.dataUriRegex);if(o){if(!o[2])return e;if("base64"!==o[2])return e;if(p.base64Regex[n.paddingRequired].false.test(o[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&f.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=p.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate(e,t,r,n){let{address:i}=n;return o.isValid(e,i)?e:t.error("string.domain")}},email:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),n(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=p.addressOptions(e),r=new RegExp(`\\s*[${e.separator?a(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:r,address:t})},validate(e,t,r,n){let{options:o}=r,{regex:s,address:a}=n;const l=o.multiple?e.split(s):[e],u=[];for(const e of l)i.isValid(e,a)||u.push(e);return u.length?t.error("string.email",{value:e,invalids:u}):e}},guid:{alias:"uuid",method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.assertOptions(e,["version","separator"]);let t="";if(e.version){const r=[].concat(e.version);n(r.length>=1,"version must have at least 1 valid version specified");const o=new Set;for(let e=0;e<r.length;++e){const i=r[e];n("string"==typeof i,"version at position "+e+" must be a string");const s=p.guidVersions[i.toLowerCase()];n(s,"version at position "+e+" must be one of "+Object.keys(p.guidVersions).join(", ")),n(!o.has(s),"version at position "+e+" must not be a duplicate"),t+=s,o.add(s)}}n(p.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const r=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,o=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${r})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:o})},validate(e,t,r,n){let{regex:o}=n;const i=o.exec(e);return i?p.guidBrackets[i[1]]!==i[i.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.assertOptions(e,["byteAligned"]),e={byteAligned:!1,...e},n("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,r){let{options:n}=r;return p.hexRegex.test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>o.isValid(e,{minDomainSegments:1})||p.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.assertOptions(e,["cidr","version"]);const{cidr:t,versions:r,regex:n}=s.regex(e),o=e.version?r:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:o}},regex:n})},validate(e,t,r,n){let{options:o}=r,{regex:i}=n;return i.test(e)?e:o.version?t.error("string.ipVersion",{value:e,cidr:o.cidr,version:o.version}):t.error("string.ip",{value:e,cidr:o.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,t){let{error:r}=t;return p.isoDate(e)?e:r("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>p.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return p.length(this,"length",e,"=",t)},validate(e,t,r,n){let{limit:o,encoding:i}=r,{name:s,operator:a,args:l}=n;const u=!i&&e.length;return f.compare(u,o,a)?e:t.error("string."+s,{limit:l.limit,value:e,encoding:i})},args:[{name:"limit",ref:!0,assert:f.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return p.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return p.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return n(p.normalizationForms.includes(e),"normalization form must be one of "+p.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,t,r){let{error:n}=t,{form:o}=r;return e===e.normalize(o)?e:n("string.normalize",{value:e,form:o})},convert:!0},pattern:{alias:"regex",method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(e instanceof RegExp,"regex must be a RegExp"),n(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),f.assertOptions(t,["invert","name"]);const r=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:r})},validate(e,t,r,n){let{regex:o,options:i}=r,{errorCode:s}=n;return o.test(e)^i.invert?e:t.error(s,{name:i.name,regex:o,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(a(e),"g")),n(e instanceof RegExp,"pattern must be a RegExp"),n("string"==typeof t,"replacement must be a String");const r=this.clone();return r.$_terms.replacements||(r.$_terms.replacements=[]),r.$_terms.replacements.push({pattern:e,replacement:t}),r}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,r){let{enabled:n}=r;return n&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&f.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:r}=u.regex(e),n=e.domain?p.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:n,scheme:r})},validate(e,t,r,n){let{options:i}=r,{regex:s,domain:a,scheme:l}=n;if(["http:/","https:/"].includes(e))return t.error("string.uri");const u=s.exec(e);if(u){const r=u[1]||u[2];return!a||i.allowRelative&&!r||o.isValid(r,a)?e:t.error("string.domain",{value:r})}return i.relativeOnly?t.error("string.uriRelativeOnly"):i.scheme?t.error("string.uriCustomScheme",{scheme:l,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:r,replacement:n}of t.replacements)e=e.replace(r,n);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),p.addressOptions=function(e){if(!e)return e;if(n(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),n(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return n(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds);n("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),n(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),n(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),p.validateTlds(e.tlds.deny,"tlds.deny"),e;const r=e.tlds.allow;return r?!0===r?(n(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds)):(Array.isArray(r)&&(e=Object.assign({},e,{tlds:{allow:new Set(r)}})),n(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),p.validateTlds(e.tlds.allow,"tlds.allow"),e):e},p.validateTlds=function(e,t){for(const r of e)n(o.isValid(r,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},p.isoDate=function(e){if(!f.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},p.length=function(e,t,r,o,i){return n(!i||!1,"Invalid encoding:",i),e.$_addRule({name:t,method:"length",args:{limit:r,encoding:i},operator:o})}},8826:(e,t,r)=>{"use strict";const n=r(375),o=r(8068),i={};i.Map=class extends Map{slice(){return new i.Map(this)}},e.exports=o.extend({type:"symbol",terms:{map:{init:new i.Map}},coerce:{method(e,t){let{schema:r,error:n}=t;const o=r.$_terms.map.get(e);return o&&(e=o),r._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:r.$_terms.map})}:{value:e}}},validate(e,t){let{error:r}=t;if("symbol"!=typeof e)return{value:e,errors:r("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),n(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),r=[];for(const o of e){n(o&&o[Symbol.iterator],"Entry must be an iterable");const[e,i]=o;n("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),n("symbol"==typeof i,"Value must be a Symbol"),t.$_terms.map.set(e,i),r.push(i)}return t.valid(...r)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(738),s=r(9621),a=r(8160),l=r(6354),u=r(493),c={result:Symbol("result")};t.entry=function(e,t,r){let o=a.defaults;r&&(n(void 0===r.warnings,"Cannot override warnings preference in synchronous validation"),n(void 0===r.artifacts,"Cannot override artifacts preference in synchronous validation"),o=a.preferences(a.defaults,r));const i=c.entry(e,t,o);n(!i.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:i.value};return i.error&&(s.error=i.error),i.mainstay.warnings.length&&(s.warning=l.details(i.mainstay.warnings)),i.mainstay.debug&&(s.debug=i.mainstay.debug),i.mainstay.artifacts&&(s.artifacts=i.mainstay.artifacts),s},t.entryAsync=async function(e,t,r){let n=a.defaults;r&&(n=a.preferences(a.defaults,r));const o=c.entry(e,t,n),i=o.mainstay;if(o.error)throw i.debug&&(o.error.debug=i.debug),o.error;if(i.externals.length){let t=o.value;const u=[];for(const o of i.externals){const f=o.state.path,p="link"===o.schema.type?i.links.get(o.schema):null;let h,d,m=t;const y=f.length?[t]:[],g=f.length?s(e,f):e;if(f.length){h=f[f.length-1];let e=t;for(const t of f.slice(0,-1))e=e[t],y.unshift(e);d=y[0],m=d[h]}try{const e=(e,t)=>(p||o.schema).$_createError(e,m,t,o.state,n),s=await o.method(m,{schema:o.schema,linked:p,state:o.state,prefs:r,original:g,error:e,errorsArray:c.errorsArray,warn:(e,t)=>i.warnings.push((p||o.schema).$_createError(e,m,t,o.state,n)),message:(e,t)=>(p||o.schema).$_createError("external",m,t,o.state,n,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(i.tracer.log(o.schema,o.state,"rule","external","error"),u.push(s),n.abortEarly)break;continue}if(Array.isArray(s)&&s[a.symbols.errors]){if(i.tracer.log(o.schema,o.state,"rule","external","error"),u.push(...s),n.abortEarly)break;continue}d?(i.tracer.value(o.state,"rule",m,s,"external"),d[h]=s):(i.tracer.value(o.state,"rule",t,s,"external"),t=s)}catch(e){throw n.errors.label&&(e.message+=` (${o.label})`),e}}if(o.value=t,u.length)throw o.error=l.process(u,e,n),i.debug&&(o.error.debug=i.debug),o.error}if(!n.warnings&&!n.debug&&!n.artifacts)return o.value;const u={value:o.value};return i.warnings.length&&(u.warning=l.details(i.warnings)),i.debug&&(u.debug=i.debug),i.artifacts&&(u.artifacts=i.artifacts),u},c.Mainstay=class{constructor(e,t,r){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=r,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},c.entry=function(e,r,n){const{tracer:o,cleanup:i}=c.tracer(r,n),s=n.debug?[]:null,a=r._ids._schemaChain?new Map:null,f=new c.Mainstay(o,s,a),p=r._ids._schemaChain?[{schema:r}]:null,h=new u([],[],{mainstay:f,schemas:p}),d=t.validate(e,r,h,n);i&&r.$_root.untrace();const m=l.process(d.errors,e,n);return{value:d.value,error:m,mainstay:f}},c.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(n(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:c.ignore}},t.validate=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,r,n).schema),t._preferences&&(n=c.prefs(t,n)),t._cache&&n.cache){const n=t._cache.get(e);if(r.mainstay.tracer.debug(r,"validate","cached",!!n),n)return n}const i=(o,i,s)=>t.$_createError(o,e,i,s||r,n),s={original:e,prefs:n,schema:t,state:r,error:i,errorsArray:c.errorsArray,warn:(e,t,n)=>r.mainstay.warnings.push(i(e,t,n)),message:(o,i)=>t.$_createError("custom",e,i,r,n,{messages:o})};r.mainstay.tracer.entry(t,r);const l=t._definition;if(l.prepare&&void 0!==e&&n.convert){const t=l.prepare(e,s);if(t){if(r.mainstay.tracer.value(r,"prepare",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(l.coerce&&void 0!==e&&n.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,s);if(t){if(r.mainstay.tracer.value(r,"coerced",e,t.value),t.errors)return c.finalize(t.value,[].concat(t.errors),s);e=t.value}}const u=t._flags.empty;u&&u.$_match(c.trim(e,t),r.nest(u),a.defaults)&&(r.mainstay.tracer.value(r,"empty",e,void 0),e=void 0);const f=o.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(void 0===e){if("forbidden"===f)return c.finalize(e,null,s);if("required"===f)return c.finalize(e,[t.$_createError("any.required",e,null,r,n)],s);if("optional"===f){if(t._flags.default!==a.symbols.deepDefault)return c.finalize(e,null,s);r.mainstay.tracer.value(r,"default",e,{}),e={}}}else if("forbidden"===f)return c.finalize(e,[t.$_createError("any.unknown",e,null,r,n)],s);const p=[];if(t._valids){const o=t._valids.get(e,r,n,t._flags.insensitive);if(o)return n.convert&&(r.mainstay.tracer.value(r,"valids",e,o.value),e=o.value),r.mainstay.tracer.filter(t,r,"valid",o),c.finalize(e,null,s);if(t._flags.only){const o=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},r,n);if(n.abortEarly)return c.finalize(e,[o],s);p.push(o)}}if(t._invalids){const o=t._invalids.get(e,r,n,t._flags.insensitive);if(o){r.mainstay.tracer.filter(t,r,"invalid",o);const i=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},r,n);if(n.abortEarly)return c.finalize(e,[i],s);p.push(i)}}if(l.validate){const t=l.validate(e,s);if(t&&(r.mainstay.tracer.value(r,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return p.push(t.errors),c.finalize(e,p,s);if(t.errors.length)return p.push(...t.errors),c.finalize(e,p,s)}}return t._rules.length?c.rules(e,p,s):c.finalize(e,p,s)},c.rules=function(e,t,r){const{schema:n,state:o,prefs:i}=r;for(const s of n._rules){const l=n._definition.rules[s.method];if(l.convert&&i.convert){o.mainstay.tracer.log(n,o,"rule",s.name,"full");continue}let u,f=s.args;if(s._resolve.length){f=Object.assign({},f);for(const t of s._resolve){const r=l.argsByName.get(t),s=f[t].resolve(e,o,i),c=r.normalize?r.normalize(s):s,p=a.validateArg(c,null,r);if(p){u=n.$_createError("any.ref",s,{arg:t,ref:f[t],reason:p},o,i);break}f[t]=c}}u=u||l.validate(e,r,f,s);const p=c.rule(u,s);if(p.errors){if(o.mainstay.tracer.log(n,o,"rule",s.name,"error"),s.warn){o.mainstay.warnings.push(...p.errors);continue}if(i.abortEarly)return c.finalize(e,p.errors,r);t.push(...p.errors)}else o.mainstay.tracer.log(n,o,"rule",s.name,"pass"),o.mainstay.tracer.value(o,"rule",e,p.value,s.name),e=p.value}return c.finalize(e,t,r)},c.rule=function(e,t){return e instanceof l.Report?(c.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[a.symbols.errors]?(e.forEach((e=>c.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},c.error=function(e,t){return t.message&&e._setTemplate(t.message),e},c.finalize=function(e,t,r){t=t||[];const{schema:o,state:i,prefs:s}=r;if(t.length){const n=c.default("failover",void 0,t,r);void 0!==n&&(i.mainstay.tracer.value(i,"failover",e,n),e=n,t=[])}if(t.length&&o._flags.error)if("function"==typeof o._flags.error){t=o._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)n(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[o._flags.error];if(void 0===e){const n=c.default("default",e,t,r);i.mainstay.tracer.value(i,"default",e,n),e=n}if(o._flags.cast&&void 0!==e){const t=o._definition.cast[o._flags.cast];if(t.from(e)){const n=t.to(e,r);i.mainstay.tracer.value(i,"cast",e,n,o._flags.cast),e=n}}if(o.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of o.$_terms.externals)i.mainstay.externals.push({method:e,schema:o,state:i,label:l.label(o._flags,i,s)});const a={value:e,errors:t.length?t:null};return o._flags.result&&(a.value="strip"===o._flags.result?void 0:r.original,i.mainstay.tracer.value(i,o._flags.result,e,a.value),i.shadow(e,o._flags.result)),o._cache&&!1!==s.cache&&!o._refs.length&&o._cache.set(r.original,a),void 0===e||a.errors||void 0===o._flags.artifact||(i.mainstay.artifacts=i.mainstay.artifacts||new Map,i.mainstay.artifacts.has(o._flags.artifact)||i.mainstay.artifacts.set(o._flags.artifact,[]),i.mainstay.artifacts.get(o._flags.artifact).push(i.path)),a},c.prefs=function(e,t){const r=t===a.defaults;return r&&e._preferences[a.symbols.prefs]?e._preferences[a.symbols.prefs]:(t=a.preferences(t,e._preferences),r&&(e._preferences[a.symbols.prefs]=t),t)},c.default=function(e,t,r,n){const{schema:i,state:s,prefs:l}=n,u=i._flags[e];if(l.noDefaults||void 0===u)return t;if(s.mainstay.tracer.log(i,s,"rule",e,"full"),!u)return u;if("function"==typeof u){const a=u.length?[o(s.ancestors[0]),n]:[];try{return u(...a)}catch(t){return void r.push(i.$_createError(`any.${e}`,null,{error:t},s,l))}}return"object"!=typeof u?u:u[a.symbols.literal]?u.literal:a.isResolvable(u)?u.resolve(t,s,l):o(u)},c.trim=function(e,t){if("string"!=typeof e)return e;const r=t.$_getRule("trim");return r&&r.args.enabled?e.trim():e},c.ignore={active:!1,debug:i,entry:i,filter:i,log:i,resolve:i,value:i},c.errorsArray=function(){const e=[];return e[a.symbols.errors]=!0,e}},2036:(e,t,r)=>{"use strict";const n=r(375),o=r(9474),i=r(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){i.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,r){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const r of[...t._values,...t._refs])e.add(r)}if(r)for(const t of[...r._values,...r._refs])e.remove(t);return e.length?e:null}remove(e){i.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,r,n){return!!this.get(e,t,r,n)}get(e,t,r,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&n){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(o(t,e))return{value:t};if(t)for(const i of this._refs){const s=i.resolve(e,t,r,null,{in:!0});if(void 0===s)continue;const a=i.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of a)if(typeof t==typeof e)if(n&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:i}}else if(o(t,e))return{value:t,ref:i}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){n(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[i.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const r of e)"string"==typeof r&&t.set(r.toLowerCase(),r);return t}},978:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(1687),s=r(9621),a={};e.exports=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(e&&"object"==typeof e,"Invalid defaults value: must be an object"),n(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),n("object"==typeof r,"Invalid options: must be an object"),!t)return null;if(r.shallow)return a.applyToDefaultsWithShallow(e,t,r);const s=o(e);if(!0===t)return s;const l=void 0!==r.nullOverride&&r.nullOverride;return i(s,t,{nullOverride:l,mergeArrays:!1})},a.applyToDefaultsWithShallow=function(e,t,r){const l=r.shallow;n(Array.isArray(l),"Invalid keys");const u=new Map,c=!0===t?null:new Set;for(let r of l){r=Array.isArray(r)?r:r.split(".");const n=s(e,r);n&&"object"==typeof n?u.set(n,c&&s(t,r)||n):c&&c.add(r)}const f=o(e,{},u);if(!c)return f;for(const e of c)a.reachCopy(f,t,e);const p=void 0!==r.nullOverride&&r.nullOverride;return i(f,t,{nullOverride:p,mergeArrays:!1})},a.reachCopy=function(e,t,r){for(const e of r){if(!(e in t))return;const r=t[e];if("object"!=typeof r||null===r)return;t=r}const n=t;let o=e;for(let e=0;e<r.length-1;++e){const t=r[e];"object"!=typeof o[t]&&(o[t]={}),o=o[t]}o[r[r.length-1]]=n}},375:(e,t,r)=>{"use strict";const n=r(7916);e.exports=function(e){if(!e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(1===r.length&&r[0]instanceof Error)throw r[0];throw new n(r)}}},8571:(e,t,r)=>{"use strict";const n=r(9621),o=r(4277),i=r(7043),s={needsProtoHack:new Set([o.set,o.map,o.weakSet,o.weakMap])};e.exports=s.clone=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;let n=s.clone,a=r;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);n=e=>e}else if(a){const t=a.get(e);if(t)return t}else a=new Map;const l=o.getInternalProto(e);if(l===o.buffer)return!1;if(l===o.date)return new Date(e.getTime());if(l===o.regex)return new RegExp(e);const u=s.base(e,l,t);if(u===e)return e;if(a&&a.set(e,u),l===o.set)for(const r of e)u.add(n(r,t,a));else if(l===o.map)for(const[r,o]of e)u.set(r,n(o,t,a));const c=i.keys(e,t);for(const r of c){if("__proto__"===r)continue;if(l===o.array&&"length"===r){u.length=e.length;continue}const i=Object.getOwnPropertyDescriptor(e,r);i?i.get||i.set?Object.defineProperty(u,r,i):i.enumerable?u[r]=n(e[r],t,a):Object.defineProperty(u,r,{enumerable:!1,writable:!0,configurable:!0,value:n(e[r],t,a)}):Object.defineProperty(u,r,{enumerable:!0,writable:!0,configurable:!0,value:n(e[r],t,a)})}return u},s.cloneWithShallow=function(e,t){const r=t.shallow;(t=Object.assign({},t)).shallow=!1;const o=new Map;for(const t of r){const r=n(e,t);"object"!=typeof r&&"function"!=typeof r||o.set(r,r)}return s.clone(e,t,o)},s.base=function(e,t,r){if(!1===r.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===o.array?[]:{};const n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===o.array){const e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(s.needsProtoHack.has(t)){const e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)}},9474:(e,t,r)=>{"use strict";const n=r(4277),o={mismatched:null};e.exports=function(e,t,r){return r=Object.assign({prototype:!0},r),!!o.isDeepEqual(e,t,r,[])},o.isDeepEqual=function(e,t,r,i){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const a=o.getSharedType(e,t,!!r.prototype);switch(a){case n.buffer:return!1;case n.promise:return e===t;case n.regex:return e.toString()===t.toString();case o.mismatched:return!1}for(let r=i.length-1;r>=0;--r)if(i[r].isSame(e,t))return!0;i.push(new o.SeenEntry(e,t));try{return!!o.isDeepEqualObj(a,e,t,r,i)}finally{i.pop()}},o.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?o.mismatched:n.getInternalProto(e);const i=n.getInternalProto(e);return i!==n.getInternalProto(t)?o.mismatched:i},o.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},o.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},o.isSetSimpleEqual=function(e,t){for(const r of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,r))return!1;return!0},o.isDeepEqualObj=function(e,t,r,i,s){const{isDeepEqual:a,valueOf:l,hasOwnEnumerableProperty:u}=o,{keys:c,getOwnPropertySymbols:f}=Object;if(e===n.array){if(!i.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!a(t[e],r[e],i,s))return!1;return!0}for(const e of t)for(const t of r)if(a(e,t,i,s))return!0}else if(e===n.set){if(t.size!==r.size)return!1;if(!o.isSetSimpleEqual(t,r)){const e=new Set(Set.prototype.values.call(r));for(const r of Set.prototype.values.call(t)){if(e.delete(r))continue;let t=!1;for(const n of e)if(a(r,n,i,s)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.map){if(t.size!==r.size)return!1;for(const[e,n]of Map.prototype.entries.call(t)){if(void 0===n&&!Map.prototype.has.call(r,e))return!1;if(!a(n,Map.prototype.get.call(r,e),i,s))return!1}}else if(e===n.error&&(t.name!==r.name||t.message!==r.message))return!1;const p=l(t),h=l(r);if((t!==p||r!==h)&&!a(p,h,i,s))return!1;const d=c(t);if(!i.part&&d.length!==c(r).length&&!i.skip)return!1;let m=0;for(const e of d)if(i.skip&&i.skip.includes(e))void 0===r[e]&&++m;else{if(!u(r,e))return!1;if(!a(t[e],r[e],i,s))return!1}if(!i.part&&d.length-m!==c(r).length)return!1;if(!1!==i.symbols){const e=f(t),n=new Set(f(r));for(const o of e){if(!i.skip||!i.skip.includes(o))if(u(t,o)){if(!u(r,o))return!1;if(!a(t[o],r[o],i,s))return!1}else if(u(r,o))return!1;n.delete(o)}for(const e of n)if(u(r,e))return!1}return!0},o.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,r)=>{"use strict";const n=r(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let r="";for(let n=0;n<e.length;++n){const o=e.charCodeAt(n);t.isSafe(o)?r+=e[n]:r+=t.escapeHtmlChar(o)}return r},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,r)=>{"use strict";const n=r(375),o=r(8571),i=r(7043),s={};e.exports=s.merge=function(e,t,r){if(n(e&&"object"==typeof e,"Invalid target value: must be an object"),n(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(r=Object.assign({nullOverride:!0,mergeArrays:!0},r),Array.isArray(t)){n(Array.isArray(e),"Cannot merge array onto an object"),r.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(o(t[n],{symbols:r.symbols}));return e}const a=i.keys(t,r);for(let n=0;n<a.length;++n){const i=a[n];if("__proto__"===i||!Object.prototype.propertyIsEnumerable.call(t,i))continue;const l=t[i];if(l&&"object"==typeof l){if(e[i]===l)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[i]=o(l,{symbols:r.symbols}):s.merge(e[i],l,r)}else(null!=l||r.nullOverride)&&(e[i]=l)}return e}},9621:(e,t,r)=>{"use strict";const n=r(375),o={};e.exports=function(e,t,r){if(!1===t||null==t)return e;"string"==typeof(r=r||{})&&(r={separator:r});const i=Array.isArray(t);n(!i||!r.separator,"Separator option is not valid for array-based chain");const s=i?t:t.split(r.separator||".");let a=e;for(let e=0;e<s.length;++e){let i=s[e];const l=r.iterables&&o.iterables(a);if(Array.isArray(a)||"set"===l){const e=Number(i);Number.isInteger(e)&&(i=e<0?a.length+e:e)}if(!a||"function"==typeof a&&!1===r.functions||!l&&void 0===a[i]){n(!r.strict||e+1===s.length,"Missing segment",i,"in reach path ",t),n("object"==typeof a||!0===r.functions||"function"!=typeof a,"Invalid segment",i,"in reach path ",t),a=r.default;break}a=l?"set"===l?[...a][i]:a.get(i):a[i]}return a},o.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(){try{return JSON.stringify(...arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const r={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},r.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return r.typeMap.get(n)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,r)=>{"use strict";const n=r(375),o={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const r=[].concat((t=t||{}).before||[]),o=[].concat(t.after||[]),i=t.group||"?",s=t.sort||0;n(!r.includes(i),`Item cannot come before itself: ${i}`),n(!r.includes("?"),"Item cannot come before unassociated items"),n(!o.includes(i),`Item cannot come after itself: ${i}`),n(!o.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:r,after:o,group:i,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();n(e,"item","?"!==i?`added into group ${i}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(o.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return n(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return n(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),r=Object.create(null);for(const n of this._items){const o=n.seq,i=n.group;r[i]=r[i]||[],r[i].push(o),e[o]=n.before;for(const e of n.after)t[e]=t[e]||[],t[e].push(o)}for(const t in e){const n=[];for(const o in e[t]){const i=e[t][o];r[i]=r[i]||[],n.push(...r[i])}e[t]=n}for(const n in t)if(r[n])for(const o of r[n])e[o].push(...t[n]);const n={};for(const t in e){const r=e[t];for(const e of r)n[e]=n[e]||[],n[e].push(t)}const o={},i=[];for(let e=0;e<this._items.length;++e){let t=e;if(n[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===o[e])continue;n[e]||(n[e]=[]);const r=n[e].length;let i=0;for(let t=0;t<r;++t)o[n[e][t]]&&++i;if(i===r){t=e;break}}}null!==t&&(o[t]=!0,i.push(t))}if(i.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of i){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},o.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,r)=>{"use strict";const n=r(443),o=r(2178),i={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:n.URL||URL};t.analyze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return o.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return o.code("DOMAIN_TOO_LONG");if(i.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return o.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(i.domainControlRx.test(e))return o.code("DOMAIN_INVALID_CHARS");e=i.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const r=t.minDomainSegments||i.minDomainSegments,n=e.split(".");if(n.length<r)return o.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return o.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=n[n.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return o.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<n.length;++e){const t=n[e];if(!t.length)return o.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return o.code("DOMAIN_LONG_SEGMENT");if(e<n.length-1){if(!i.domainSegmentRx.test(t))return o.code("DOMAIN_INVALID_CHARS")}else if(!i.tldSegmentRx.test(t))return o.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,r){return!t.analyze(e,r)},i.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new i.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,r)=>{"use strict";const n=r(9848),o=r(5380),i=r(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(n.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return i.code("EMPTY_STRING");const r=!s.nonAsciiRx.test(e);if(!r){if(!1===t.allowUnicode)return i.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const n=e.split("@");if(2!==n.length)return n.length>2?i.code("MULTIPLE_AT_CHAR"):i.code("MISSING_AT_CHAR");const[a,l]=n;if(!a)return i.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return i.code("ADDRESS_TOO_LONG");if(s.encoder.encode(a).length>64)return i.code("LOCAL_TOO_LONG")}return s.local(a,r)||o.analyze(l,t)},s.local=function(e,t){const r=e.split(".");for(const e of r){if(!e.length)return i.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return i.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return i.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,r)=>{"use strict";const n=r(375),o=r(5752);t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";n(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),n(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let r=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(r)||(r=[r]),n(r.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<r.length;++e)n("string"==typeof r[e],"options.version must only contain strings"),r[e]=r[e].toLowerCase(),n(["ipv4","ipv6","ipvfuture"].includes(r[e]),"options.version contains unknown version "+r[e]+" - must be one of ipv4, ipv6, ipvfuture");r=Array.from(new Set(r));const i=`(?:${r.map((e=>{if("forbidden"===t)return o.ip[e];const r=`\\/${"ipv4"===e?o.ip.v4Cidr:o.ip.v6Cidr}`;return"required"===t?`${o.ip[e]}${r}`:`${o.ip[e]}(?:${r})?`})).join("|")})`,s=new RegExp(`^${i}$`);return{cidr:t,versions:r,regex:s,raw:i}}},5752:(e,t,r)=>{"use strict";const n=r(375),o=r(6064),i={generate:function(){const e={},t="\\dA-Fa-f",r="["+t+"]",n="\\w-\\.~",o="!\\$&'\\(\\)\\*\\+,;=",i="%"+t,s=n+i+o+":@",a="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const u=r+"{1,4}",c="(?:"+u+":"+u+"|"+e.ipv4address+")",f="(?:"+u+":){6}"+c,p="::(?:"+u+":){5}"+c,h="(?:"+u+")?::(?:"+u+":){4}"+c,d="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,m="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,y="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,g="(?:(?:"+u+":){0,4}"+u+")?::"+c;e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+f+"|"+p+"|"+h+"|"+d+"|"+m+"|"+y+"|"+g+"|(?:(?:[\\dA-Fa-f]{1,4}:){0,5}[\\dA-Fa-f]{1,4})?::[\\dA-Fa-f]{1,4}|(?:(?:[\\dA-Fa-f]{1,4}:){0,6}[\\dA-Fa-f]{1,4})?::)",e.ipvFuture="v"+r+"+\\.["+n+o+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const v="["+n+i+o+":]*",b="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=]{1,255})",w="(?:"+v+"@)?"+b+"(?::\\d*)?",_="(?:"+v+"@)?("+b+")(?::\\d*)?",x=a+"*",j=a+"+",O="(?:\\/"+x+")*",A="\\/(?:"+j+O+")?",E=j+O,S="["+n+i+o+"@]+"+O;return e.hierPart="(?:(?:\\/\\/"+w+O+")|"+A+"|"+E+"|(?:\\/\\/\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*))",e.hierPartCapture="(?:(?:\\/\\/"+_+O+")|"+A+"|"+E+")",e.relativeRef="(?:(?:\\/\\/"+w+O+")|"+A+"|"+S+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+_+O+")|"+A+"|"+S+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};i.rfc3986=i.generate(),t.ip={v4Cidr:i.rfc3986.ipv4Cidr,v6Cidr:i.rfc3986.ipv6Cidr,ipv4:i.rfc3986.ipv4address,ipv6:i.rfc3986.ipv6address,ipvfuture:i.rfc3986.ipvFuture},i.createRegex=function(e){const t=i.rfc3986,r="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return i.wrap(s+r);let a="";if(e.scheme){n(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const r=[].concat(e.scheme);n(r.length>=1,"scheme must have at least 1 scheme specified");const i=[];for(let e=0;e<r.length;++e){const s=r[e];n(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?i.push(s.source.toString()):(n(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),i.push(o(s)))}a=i.join("|")}const l="(?:"+(a?"(?:"+a+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",u=e.allowRelative?"(?:"+l+"|"+s+")":l;return i.wrap(u+r,a)},i.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},i.uriRegex=i.createRegex({}),t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?i.createRegex(e):i.uriRegex}},1447:(e,t)=>{"use strict";const r={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t[r.settings]&&t.constants)for(const e in t.constants){const r=t.constants[e];if(null!==r&&!["boolean","number","string"].includes(typeof r))throw new Error(`Formula constant ${e} contains invalid ${typeof r} value type`)}this.settings=t[r.settings]?t:Object.assign({[r.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let n=[],o="",i=0,s=!1;const a=e=>{if(i)throw new Error("Formula missing closing parenthesis");const a=n.length?n[n.length-1]:null;if(s||o||e){if(a&&"reference"===a.type&&")"===e)return a.type="function",a.value=this._subFormula(o,a.value),void(o="");if(")"===e){const e=new t.Parser(o,this.settings);n.push({type:"segment",value:e})}else if(s){if("]"===s)return n.push({type:"reference",value:o}),void(o="");n.push({type:"literal",value:o})}else if(r.operatorCharacters.includes(o))a&&"operator"===a.type&&r.operators.includes(a.value+o)?a.value+=o:n.push({type:"operator",value:o});else if(o.match(r.numberRx))n.push({type:"constant",value:parseFloat(o)});else if(void 0!==this.settings.constants[o])n.push({type:"constant",value:this.settings.constants[o]});else{if(!o.match(r.tokenRx))throw new Error(`Formula contains invalid token: ${o}`);n.push({type:"reference",value:o})}o=""}};for(const t of e)s?t===s?(a(),s=!1):o+=t:i?"("===t?(o+=t,++i):")"===t?(--i,i?o+=t:a(t)):o+=t:t in r.literals?s=r.literals[t]:"("===t?(a(),++i):r.operatorCharacters.includes(t)?(a(),o=t,a()):" "!==t?o+=t:a();a(),n=n.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==n[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of n){if("operator"===e.type){if(r.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!r.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===n.length&&["reference","literal","constant"].includes(n[0].type)&&(this.single={type:"reference"===n[0].type?"reference":"value",value:n[0].value}),this._parts=n.map((e=>{if("operator"===e.type)return r.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):r.reference(e.value)}))}_subFormula(e,n){const o=this.settings.functions[n];if("function"!=typeof o)throw new Error(`Formula contains unknown function ${n}`);let i=[];if(e){let t="",o=0,s=!1;const a=()=>{if(!t)throw new Error(`Formula contains function ${n} with invalid arguments ${e}`);i.push(t),t=""};for(let n=0;n<e.length;++n){const i=e[n];s?(t+=i,i===s&&(s=!1)):i in r.literals&&!o?(t+=i,s=r.literals[i]):","!==i||o?(t+=i,"("===i?++o:")"===i&&--o):a()}a()}return i=i.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const r of i)t.push(r.evaluate(e));return o.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let n=t.length-2;n>=0;--n){const o=t[n];if(o&&"operator"===o.type){const i=t[n+1];t.splice(n+1,1);const s=r.evaluate(i,e);t[n]=r.single(o.value,s)}}return r.operatorsOrder.forEach((n=>{for(let o=1;o<t.length-1;)if(n.includes(t[o])){const n=t[o],i=r.evaluate(t[o-1],e),s=r.evaluate(t[o+1],e);t.splice(o,2);const a=r.calculate(n,i,s);t[o-1]=0===a?0:a}else o+=2})),r.evaluate(t[0],e)}},t.Parser.prototype[r.symbol]=!0,r.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},r.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[r.symbol]?e.evaluate(t):e},r.single=function(e,t){if("!"===e)return!t;const r=-t;return 0===r?0:r},r.calculate=function(e,t,n){if("??"===e)return r.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=r.exists(t)?t:"")+(r.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},r.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports={version:"17.9.2"}}},t={},function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(5107);var e,t},"object"==typeof r&&"object"==typeof t?t.exports=o():"object"==typeof r?r.joi=o():n.joi=o()},{}],56:[function(e,t,n){(function(r){(function(){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).memoizerific=e()}((function(){return function t(r,n,o){function i(a,l){if(!n[a]){if(!r[a]){var u="function"==typeof e&&e;if(!l&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};r[a][0].call(f.exports,(function(e){return i(r[a][1][e]||e)}),f,f.exports,t,r,n,o)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,r){t.exports=function(t){return"function"!=typeof Map||t?new(e("./similar")):new Map}},{"./similar":2}],2:[function(e,t,r){function n(){return this.list=[],this.lastItem=void 0,this.size=0,this}n.prototype.get=function(e){var t;return this.lastItem&&this.isEqual(this.lastItem.key,e)?this.lastItem.val:(t=this.indexOf(e))>=0?(this.lastItem=this.list[t],this.list[t].val):void 0},n.prototype.set=function(e,t){var r;return this.lastItem&&this.isEqual(this.lastItem.key,e)?(this.lastItem.val=t,this):(r=this.indexOf(e))>=0?(this.lastItem=this.list[r],this.list[r].val=t,this):(this.lastItem={key:e,val:t},this.list.push(this.lastItem),this.size++,this)},n.prototype.delete=function(e){var t;if(this.lastItem&&this.isEqual(this.lastItem.key,e)&&(this.lastItem=void 0),(t=this.indexOf(e))>=0)return this.size--,this.list.splice(t,1)[0]},n.prototype.has=function(e){var t;return!(!this.lastItem||!this.isEqual(this.lastItem.key,e))||(t=this.indexOf(e))>=0&&(this.lastItem=this.list[t],!0)},n.prototype.forEach=function(e,t){var r;for(r=0;r<this.size;r++)e.call(t||this,this.list[r].val,this.list[r].key,this)},n.prototype.indexOf=function(e){var t;for(t=0;t<this.size;t++)if(this.isEqual(this.list[t].key,e))return t;return-1},n.prototype.isEqual=function(e,t){return e===t||e!=e&&t!=t},t.exports=n},{}],3:[function(e,t,r){var n=e("map-or-similar");function o(e,t){var r,n,o,i,s,a=e.length,l=t.length;for(n=0;n<a;n++){for(r=!0,o=0;o<l;o++)if(i=e[n][o].arg,s=t[o].arg,i!==s&&(i==i||s==s)){r=!1;break}if(r)break}e.push(e.splice(n,1)[0])}function i(e){var t,r,n=e.length,o=e[n-1];for(o.cacheItem.delete(o.arg),r=n-2;r>=0&&(!(t=(o=e[r]).cacheItem.get(o.arg))||!t.size);r--)o.cacheItem.delete(o.arg)}t.exports=function(e){var t=new n(!1),r=[];return function(s){var a=function(){var l,u,c,f=t,p=arguments.length-1,h=Array(p+1),d=!0;if((a.numArgs||0===a.numArgs)&&a.numArgs!==p+1)throw new Error("Memoizerific functions should always be called with the same number of arguments");for(c=0;c<p;c++)h[c]={cacheItem:f,arg:arguments[c]},f.has(arguments[c])?f=f.get(arguments[c]):(d=!1,l=new n(!1),f.set(arguments[c],l),f=l);return d&&(f.has(arguments[p])?u=f.get(arguments[p]):d=!1),d||(u=s.apply(null,arguments),f.set(arguments[p],u)),e>0&&(h[p]={cacheItem:f,arg:arguments[p]},d?o(r,h):r.push(h),r.length>e&&i(r.shift())),a.wasMemoized=d,a.numArgs=p+1,u};return a.limit=e,a.wasMemoized=!1,a.cache=t,a.lru=r,a}}},{"map-or-similar":1}]},{},[3])(3)}))}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,s=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"==typeof l.get?l.get:null,c=a&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,m=Object.prototype.toString,y=Function.prototype.toString,g=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,x=RegExp.prototype.test,j=Array.prototype.concat,O=Array.prototype.join,A=Array.prototype.slice,E=Math.floor,S="function"==typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,$="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function C(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-E(-e):E(e);if(n!==e){var o=String(n),i=v.call(t,o.length+1);return b.call(o,r,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var L=e("./util.inspect"),T=L.custom,D=B(T)?T:null;function U(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function N(e){return b.call(String(e),/"/g,"&quot;")}function z(e){return!("[object Array]"!==V(e)||I&&"object"==typeof e&&I in e)}function F(e){return!("[object RegExp]"!==V(e)||I&&"object"==typeof e&&I in e)}function B(e){if($)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}t.exports=function e(t,r,n,o){var a=r||{};if(W(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!W(a,"customInspect")||a.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var m=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return G(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return m?C(t,w):w}if("bigint"==typeof t){var x=String(t)+"n";return m?C(t,x):x}var E=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=E&&E>0&&"object"==typeof t)return z(t)?"[Array]":"[Object]";var k,T=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=O.call(Array(e.indent+1)," ")}return{base:r,prev:O.call(Array(t+1),r)}}(a,n);if(void 0===o)o=[];else if(H(o,t)>=0)return"[Circular]";function q(t,r,i){if(r&&(o=A.call(o)).push(r),i){var s={depth:a.depth};return W(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,n+1,o)}return e(t,a,n+1,o)}if("function"==typeof t&&!F(t)){var J=function(e){if(e.name)return e.name;var t=g.call(y.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=Q(t,q);return"[Function"+(J?": "+J:" (anonymous)")+"]"+(ee.length>0?" { "+O.call(ee,", ")+" }":"")}if(B(t)){var te=$?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!=typeof t||$?te:K(te)}if((k=t)&&"object"==typeof k&&("undefined"!=typeof HTMLElement&&k instanceof HTMLElement||"string"==typeof k.nodeName&&"function"==typeof k.getAttribute)){for(var re="<"+_.call(String(t.nodeName)),ne=t.attributes||[],oe=0;oe<ne.length;oe++)re+=" "+ne[oe].name+"="+U(N(ne[oe].value),"double",a);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+"</"+_.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var ie=Q(t,q);return T&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ie)?"["+Y(ie,T)+"]":"[ "+O.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==V(e)||I&&"object"==typeof e&&I in e)}(t)){var se=Q(t,q);return"cause"in Error.prototype||!("cause"in t)||P.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+O.call(se,", ")+" }":"{ ["+String(t)+"] "+O.call(j.call("[cause]: "+q(t.cause),se),", ")+" }"}if("object"==typeof t&&l){if(D&&"function"==typeof t[D]&&L)return L(t,{depth:E-n});if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,r){ae.push(q(r,t,!0)+" => "+q(e,t))})),Z("Map",i.call(t),ae,T)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return c&&c.call(t,(function(e){le.push(q(e,t))})),Z("Set",u.call(t),le,T)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return X("WeakMap");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return X("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return X("WeakRef");if(function(e){return!("[object Number]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return K(q(Number(t)));if(function(e){if(!e||"object"!=typeof e||!S)return!1;try{return S.call(e),!0}catch(e){}return!1}(t))return K(q(S.call(t)));if(function(e){return!("[object Boolean]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return K(d.call(t));if(function(e){return!("[object String]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return K(q(String(t)));if(!function(e){return!("[object Date]"!==V(e)||I&&"object"==typeof e&&I in e)}(t)&&!F(t)){var ue=Q(t,q),ce=M?M(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",pe=!ce&&I&&Object(t)===t&&I in t?v.call(V(t),8,-1):fe?"Object":"",he=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(pe||fe?"["+O.call(j.call([],pe||[],fe||[]),": ")+"] ":"");return 0===ue.length?he+"{}":T?he+"{"+Y(ue,T)+"}":he+"{ "+O.call(ue,", ")+" }"}return String(t)};var q=Object.prototype.hasOwnProperty||function(e){return e in this};function W(e,t){return q.call(e,t)}function V(e){return m.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function G(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return G(v.call(e,0,t.maxStringLength),t)+n}return U(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,J),"single",t)}function J(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function K(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function Z(e,t,r,n){return e+" ("+t+") {"+(n?Y(r,n):O.call(r,", "))+"}"}function Y(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+O.call(e,","+r)+"\n"+t.prev}function Q(e,t){var r=z(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=W(e,o)?t(e[o],e):""}var i,s="function"==typeof k?k(e):[];if($){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in e)W(e,l)&&(r&&String(Number(l))===l&&l<e.length||$&&i["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof k)for(var u=0;u<s.length;u++)P.call(e,s[u])&&n.push("["+t(s[u])+"]: "+t(e[s[u]],e));return n}},{"./util.inspect":41}],58:[function(e,t,r){(function(e){(function(){"use strict";function r(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var r,n="",o=0,i=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",o=0):o=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=a,s=0;continue}}else if(2===n.length||1===n.length){n="",o=0,i=a,s=0;continue}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),o=a-i-1;i=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var o={resolve:function(){for(var t,o="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a;s>=0?a=arguments[s]:(void 0===t&&(t=e.cwd()),a=t),r(a),0!==a.length&&(o=a+"/"+o,i=47===a.charCodeAt(0))}return o=n(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(r(e),0===e.length)return".";var t=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!t)).length||t||(e="."),e.length>0&&o&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return r(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];r(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":o.normalize(e)},relative:function(e,t){if(r(e),r(t),e===t)return"";if((e=o.resolve(e))===(t=o.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var i=e.length,s=i-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,u=s<l?s:l,c=-1,f=0;f<=u;++f){if(f===u){if(l>u){if(47===t.charCodeAt(a+f))return t.slice(a+f+1);if(0===f)return t.slice(a+f)}else s>u&&(47===e.charCodeAt(n+f)?c=f:0===f&&(c=0));break}var p=e.charCodeAt(n+f);if(p!==t.charCodeAt(a+f))break;47===p&&(c=f)}var h="";for(f=n+c+1;f<=i;++f)f!==i&&47!==e.charCodeAt(f)||(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(a+c):(a+=c,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(r(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,i=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!i){o=s;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');r(e);var n,o=0,i=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!s){o=n+1;break}}else-1===l&&(s=!1,l=n+1),a>=0&&(u===t.charCodeAt(a)?-1==--a&&(i=n):(a=-1,i=l))}return o===i?i=l:-1===i&&(i=e.length),e.slice(o,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){o=n+1;break}}else-1===i&&(s=!1,i=n+1);return-1===i?"":e.slice(o,i)},extname:function(e){r(e);for(var t=-1,n=0,o=-1,i=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===o&&(i=!1,o=a+1),46===l?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){n=a+1;break}}return-1===t||-1===o||0===s||1===s&&t===o-1&&t===n+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){r(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,o=e.charCodeAt(0),i=47===o;i?(t.root="/",n=1):n=0;for(var s=-1,a=0,l=-1,u=!0,c=e.length-1,f=0;c>=n;--c)if(47!==(o=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===o?-1===s?s=c:1!==f&&(f=1):-1!==s&&(f=-1);else if(!u){a=c+1;break}return-1===s||-1===l||0===f||1===f&&s===l-1&&s===a+1?-1!==l&&(t.base=t.name=0===a&&i?e.slice(1,l):e.slice(a,l)):(0===a&&i?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(a,s),t.base=e.slice(a,l)),t.ext=e.slice(s,l)),a>0?t.dir=e.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,t.exports=o}).call(this)}).call(this,e("_process"))},{_process:60}],59:[function(e,t,r){"use strict";const n=e("quick-format-unescaped");t.exports=s;const o=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},i={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:y,res:y,err:d,errWithCause:d};function s(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||o;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);const p=Object.keys(e.customLevels||{}),d=["error","fatal","warn","info","debug","trace"].concat(p);"function"==typeof r&&d.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");const y=e.level||"info",g=Object.create(r);g.log||(g.log=v),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,l(b,g,"error","log"),l(b,g,"fatal","error"),l(b,g,"warn","error"),l(b,g,"info","log"),l(b,g,"debug","log"),l(b,g,"trace","log"),p.forEach((function(e){l(b,g,e,"log")}))}});const b={transmit:t,serialize:i,asObject:e.browser.asObject,levels:d,timestamp:m(e)};return g.levels=function(e){const t=e.customLevels||{};return{values:Object.assign({},s.levels.values,t),labels:Object.assign({},s.levels.labels,a(t))}}(e),g.level=y,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=v,g.serializers=n,g._serialize=i,g._stdErrSerialize=u,g.child=function(r,o){if(!r)throw new Error("missing bindings for child Pino");o=o||{},i&&r.serializers&&(o.serializers=r.serializers);const s=o.serializers;if(i&&s){var a=Object.assign({},n,s),l=!0===e.browser.serialize?Object.keys(a):i;delete r.serializers,c([r],l,a,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.error=f(e,r,"error"),this.fatal=f(e,r,"fatal"),this.warn=f(e,r,"warn"),this.info=f(e,r,"info"),this.debug=f(e,r,"debug"),this.trace=f(e,r,"trace"),a&&(this.serializers=a,this._serialize=l),t&&(this._logEvent=h([].concat(e._logEvent.bindings,r)))}return u.prototype=this,new u(this)},t&&(g._logEvent=h()),g}function a(e){const t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}function l(e,t,r,n){const i=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?v:i[r]?i[r]:o[r]||o[n]||v,function(e,t,r){var n;(e.transmit||t[r]!==v)&&(t[r]=(n=t[r],function(){const i=e.timestamp(),s=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===o?o:this;for(var l=0;l<s.length;l++)s[l]=arguments[l];if(e.serialize&&!e.asObject&&c(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(a,u(this,r,s,i)):n.apply(a,s),e.transmit){const n=e.transmit.level||t.level,o=t.levels.values[n],a=t.levels.values[r];if(a<o)return;p(this,{ts:i,methodLevel:r,methodValue:a,transmitLevel:n,transmitValue:t.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},s)}}))}(e,t,r)}function u(e,t,r,o){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const i=r.slice();let s=i[0];const a={};o&&(a.time=o),a.level=e.levels.values[t];let l=1+(0|e._childLevel);if(l<1&&(l=1),null!==s&&"object"==typeof s){for(;l--&&"object"==typeof i[0];)Object.assign(a,i.shift());s=i.length?n(i.shift(),i):void 0}else"string"==typeof s&&(s=n(i.shift(),i));return void 0!==s&&(a.msg=s),a}function c(e,t,r,n){for(const o in e)if(n&&e[o]instanceof Error)e[o]=s.stdSerializers.err(e[o]);else if("object"==typeof e[o]&&!Array.isArray(e[o]))for(const n in e[o])t&&t.indexOf(n)>-1&&n in r&&(e[o][n]=r[n](e[o][n]))}function f(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return e[r].apply(this,n)}}function p(e,t,r){const n=t.send,o=t.ts,i=t.methodLevel,s=t.methodValue,a=t.val,l=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=s,n(i,e._logEvent,a),e._logEvent=h(l)}function h(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function d(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}function m(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?b:w}function y(){return{}}function g(e){return e}function v(){}function b(){return!1}function w(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=i,s.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:w,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},{"quick-format-unescaped":67}],60:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,c=[],f=!1,p=-1;function h(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!f){var e=l(h);f=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||f||l(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],61:[function(e,t,n){(function(e){(function(){!function(r){var o="object"==typeof n&&n&&!n.nodeType&&n,i="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var a,l,u=2147483647,c=36,f=/^xn--/,p=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,y=String.fromCharCode;function g(e){throw new RangeError(d[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function b(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(h,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function _(e){return v(e,(function(e){var t="";return e>65535&&(t+=y((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+y(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function j(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=c)e=m(e/35);return m(n+36*e/(e+38))}function O(e){var t,r,n,o,i,s,a,l,f,p,h,d=[],y=e.length,v=0,b=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&g("not-basic"),d.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,s=1,a=c;o>=y&&g("invalid-input"),((l=(h=e.charCodeAt(o++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:c)>=c||l>m((u-v)/s))&&g("overflow"),v+=l*s,!(l<(f=a<=w?1:a>=w+26?26:a-w));a+=c)s>m(u/(p=c-f))&&g("overflow"),s*=p;w=j(v-i,t=d.length+1,0==i),m(v/t)>u-b&&g("overflow"),b+=m(v/t),v%=t,d.splice(v++,0,b)}return _(d)}function A(e){var t,r,n,o,i,s,a,l,f,p,h,d,v,b,_,O=[];for(d=(e=w(e)).length,t=128,r=0,i=72,s=0;s<d;++s)(h=e[s])<128&&O.push(y(h));for(n=o=O.length,o&&O.push("-");n<d;){for(a=u,s=0;s<d;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>m((u-r)/(v=n+1))&&g("overflow"),r+=(a-t)*v,t=a,s=0;s<d;++s)if((h=e[s])<t&&++r>u&&g("overflow"),h==t){for(l=r,f=c;!(l<(p=f<=i?1:f>=i+26?26:f-i));f+=c)_=l-p,b=c-p,O.push(y(x(p+_%b,0))),l=m(_/b);O.push(y(x(l,0))),i=j(r,v,n==o),r=0,++n}++r,++t}return O.join("")}if(a={version:"1.4.1",ucs2:{decode:w,encode:_},decode:O,encode:A,toASCII:function(e){return b(e,(function(e){return p.test(e)?"xn--"+A(e):e}))},toUnicode:function(e){return b(e,(function(e){return f.test(e)?O(e.slice(4).toLowerCase()):e}))}},o&&i)if(t.exports==o)i.exports=a;else for(l in a)a.hasOwnProperty(l)&&(o[l]=a[l]);else r.punycode=a}(this)}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],62:[function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i="RFC1738",s="RFC3986";t.exports={default:s,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}},RFC1738:i,RFC3986:s}},{}],63:[function(e,t,r){"use strict";var n=e("./stringify"),o=e("./parse"),i=e("./formats");t.exports={formats:i,parse:o,stringify:n}},{"./formats":62,"./parse":64,"./stringify":65}],64:[function(e,t,r){"use strict";var n=e("./utils"),o=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(i),u=a?i.slice(0,a.index):i,c=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var f=0;r.depth>0&&null!==(a=s.exec(i))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+i.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:l(t,r),i=e.length-1;i>=0;--i){var s,a=e[i];if("[]"===a&&r.parseArrays)s=[].concat(o);else{s=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=o:"__proto__"!==u&&(s[u]=o):s={0:o}}o=s}return o}(c,t,r,n)}};t.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,p=c.split(t.delimiter,f),h=-1,d=t.charset;if(t.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?d="utf-8":"utf8=%26%2310003%3B"===p[r]&&(d="iso-8859-1"),h=r,r=p.length);for(r=0;r<p.length;++r)if(r!==h){var m,y,g=p[r],v=g.indexOf("]="),b=-1===v?g.indexOf("="):v+1;-1===b?(m=t.decoder(g,s.decoder,d,"key"),y=t.strictNullHandling?null:""):(m=t.decoder(g.slice(0,b),s.decoder,d,"key"),y=n.maybeMap(l(g.slice(b+1),t),(function(e){return t.decoder(e,s.decoder,d,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===d&&(y=a(y)),g.indexOf("[]=")>-1&&(y=i(y)?[y]:y),o.call(u,m)?u[m]=n.combine(u[m],y):u[m]=y}return u}(e,r):e,f=r.plainObjects?Object.create(null):{},p=Object.keys(c),h=0;h<p.length;++h){var d=p[h],m=u(d,c[d],r,"string"==typeof e);f=n.merge(f,m,r)}return!0===r.allowSparse?f:n.compact(f)}},{"./utils":66}],65:[function(e,t,r){"use strict";var n=e("side-channel"),o=e("./utils"),i=e("./formats"),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=String.prototype.split,c=Array.prototype.push,f=function(e,t){c.apply(e,l(t)?t:[t])},p=Date.prototype.toISOString,h=i.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},m={},y=function e(t,r,i,s,a,c,p,h,y,g,v,b,w,_,x,j){for(var O=t,A=j,E=0,S=!1;void 0!==(A=A.get(m))&&!S;){var k=A.get(t);if(E+=1,void 0!==k){if(k===E)throw new RangeError("Cyclic object value");S=!0}void 0===A.get(m)&&(E=0)}if("function"==typeof h?O=h(r,O):O instanceof Date?O=v(O):"comma"===i&&l(O)&&(O=o.maybeMap(O,(function(e){return e instanceof Date?v(e):e}))),null===O){if(a)return p&&!_?p(r,d.encoder,x,"key",b):r;O=""}if("string"==typeof(M=O)||"number"==typeof M||"boolean"==typeof M||"symbol"==typeof M||"bigint"==typeof M||o.isBuffer(O)){if(p){var R=_?r:p(r,d.encoder,x,"key",b);if("comma"===i&&_){for(var $=u.call(String(O),","),I="",P=0;P<$.length;++P)I+=(0===P?"":",")+w(p($[P],d.encoder,x,"value",b));return[w(R)+(s&&l(O)&&1===$.length?"[]":"")+"="+I]}return[w(R)+"="+w(p(O,d.encoder,x,"value",b))]}return[w(r)+"="+w(String(O))]}var M,C,L=[];if(void 0===O)return L;if("comma"===i&&l(O))C=[{value:O.length>0?O.join(",")||null:void 0}];else if(l(h))C=h;else{var T=Object.keys(O);C=y?T.sort(y):T}for(var D=s&&l(O)&&1===O.length?r+"[]":r,U=0;U<C.length;++U){var N=C[U],z="object"==typeof N&&void 0!==N.value?N.value:O[N];if(!c||null!==z){var F=l(O)?"function"==typeof i?i(D,N):D:D+(g?"."+N:"["+N+"]");j.set(t,E);var B=n();B.set(m,j),f(L,e(z,F,i,s,a,c,p,h,y,g,v,b,w,_,x,B))}}return L};t.exports=function(e,t){var r,o=e,u=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!s.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=d.filter;return("function"==typeof e.filter||l(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):l(u.filter)&&(r=u.filter);var c,p=[];if("object"!=typeof o||null===o)return"";c=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=a[c];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===h&&t&&t.commaRoundTrip;r||(r=Object.keys(o)),u.sort&&r.sort(u.sort);for(var g=n(),v=0;v<r.length;++v){var b=r[v];u.skipNulls&&null===o[b]||f(p,y(o[b],b,h,m,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var w=p.join(u.delimiter),_=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),w.length>0?_+w:""}},{"./formats":62,"./utils":66,"side-channel":68}],66:[function(e,t,r){"use strict";var n=e("./formats"),o=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};t.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var u=a[l],c=s[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:s,prop:u}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",u=0;u<a.length;++u){var c=a.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===n.RFC1738&&(40===c||41===c)?l+=a.charAt(u):c<128?l+=s[c]:c<2048?l+=s[192|c>>6]+s[128|63&c]:c<55296||c>=57344?l+=s[224|c>>12]+s[128|c>>6&63]+s[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(u)),l+=s[240|c>>18]+s[128|c>>12&63]+s[128|c>>6&63]+s[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return i(t)&&!i(r)&&(s=a(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var s=t[i];s&&"object"==typeof s&&r&&"object"==typeof r?t[i]=e(s,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var s=r[i];return o.call(t,i)?t[i]=e(t[i],s,n):t[i]=s,t}),s)}}},{"./formats":62}],67:[function(e,t,r){"use strict";function n(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}t.exports=function(e,t,r){var o=r&&r.stringify||n;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var s=new Array(i);s[0]=o(e);for(var a=1;a<i;a++)s[a]=o(t[a]);return s.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,f=-1,p=e&&e.length||0,h=0;h<p;){if(37===e.charCodeAt(h)&&h+1<p){switch(f=f>-1?f:0,e.charCodeAt(h+1)){case 100:case 102:if(c>=l)break;if(null==t[c])break;f<h&&(u+=e.slice(f,h)),u+=Number(t[c]),f=h+2,h++;break;case 105:if(c>=l)break;if(null==t[c])break;f<h&&(u+=e.slice(f,h)),u+=Math.floor(Number(t[c])),f=h+2,h++;break;case 79:case 111:case 106:if(c>=l)break;if(void 0===t[c])break;f<h&&(u+=e.slice(f,h));var d=typeof t[c];if("string"===d){u+="'"+t[c]+"'",f=h+2,h++;break}if("function"===d){u+=t[c].name||"<anonymous>",f=h+2,h++;break}u+=o(t[c]),f=h+2,h++;break;case 115:if(c>=l)break;f<h&&(u+=e.slice(f,h)),u+=String(t[c]),f=h+2,h++;break;case 37:f<h&&(u+=e.slice(f,h)),u+="%",f=h+2,h++,c--}++c}++h}return-1===f?e:(f<p&&(u+=e.slice(f)),u)}},{}],68:[function(e,t,r){"use strict";var n=e("get-intrinsic"),o=e("call-bind/callBound"),i=e("object-inspect"),s=n("%TypeError%"),a=n("%WeakMap%",!0),l=n("%Map%",!0),u=o("WeakMap.prototype.get",!0),c=o("WeakMap.prototype.set",!0),f=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),d=o("Map.prototype.has",!0),m=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};t.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new s("Side channel does not contain "+i(e))},get:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return u(e,n)}else if(l){if(t)return p(t,n)}else if(r)return function(e,t){var r=m(e,t);return r&&r.value}(r,n)},has:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return f(e,n)}else if(l){if(t)return d(t,n)}else if(r)return function(e,t){return!!m(e,t)}(r,n);return!1},set:function(n,o){a&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new a),c(e,n,o)):l?(t||(t=new l),h(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=m(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},{"call-bind/callBound":44,"get-intrinsic":48,"object-inspect":57}],69:[function(e,t,r){(function(e){(function(){var o,i;o=this,i=function(r){"use strict";function o(e){return e.arrayBuffer?e.arrayBuffer():new Promise(((t,r)=>{const n=new FileReader;n.addEventListener("loadend",(()=>{t(n.result)})),n.addEventListener("error",r),n.readAsArrayBuffer(e)}))}async function i(e){const t=await o(e);return new Uint8Array(t)}function s(e){return"undefined"!=typeof Blob&&e instanceof Blob}function a(e){return"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}const l=void 0!==e&&e.versions&&void 0!==e.versions.node&&void 0===e.versions.electron;class u{constructor(e){this.typedArray=e instanceof ArrayBuffer||a(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}}class c{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){const r=this.blob.slice(e,e+t),n=await o(r);return new Uint8Array(n)}async sliceAsBlob(e,t,r=""){return this.blob.slice(e,e+t,r)}}function f(e,t){var r=e.length;if(t<=r)return e;var n=new Uint8Array(Math.max(r<<1,t));return n.set(e,0),n}function p(e,t,r,n,o,i){for(var s=g,a=b,l=0;l<r;){var u=e[a(n,o)&t];o+=15&u;var c=u>>>4;if(c<=15)i[l]=c,l++;else{var f=0,p=0;16==c?(p=3+s(n,o,2),o+=2,f=i[l-1]):17==c?(p=3+s(n,o,3),o+=3):18==c&&(p=11+s(n,o,7),o+=7);for(var h=l+p;l<h;)i[l]=f,l++}}return o}function h(e,t,r,n){for(var o=0,i=0,s=n.length>>>1;i<r;){var a=e[i+t];n[i<<1]=0,n[1+(i<<1)]=a,a>o&&(o=a),i++}for(;i<s;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return o}function d(e,t){for(var r,n,o,i,s=e.length,a=w.bl_count,l=0;l<=t;l++)a[l]=0;for(l=1;l<s;l+=2)a[e[l]]++;var u=w.next_code;for(r=0,a[0]=0,n=1;n<=t;n++)r=r+a[n-1]<<1,u[n]=r;for(o=0;o<s;o+=2)0!=(i=e[o+1])&&(e[o]=u[i],u[i]++)}function m(e,t,r){for(var n=e.length,o=w.rev15,i=0;i<n;i+=2)if(0!=e[i+1])for(var s=i>>1,a=e[i+1],l=s<<4|a,u=t-a,c=e[i]<<u,f=c+(1<<u);c!=f;)r[o[c]>>>15-t]=l,c++}function y(e,t){for(var r=w.rev15,n=15-t,o=0;o<e.length;o+=2){var i=e[o]<<t-e[o+1];e[o]=r[i]>>>n}}function g(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1}function v(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1}function b(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}const w=(_=Uint16Array,x=Uint32Array,{next_code:new _(16),bl_count:new _(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new _(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new x(32),flmap:new _(512),fltree:[],fdmap:new _(32),fdtree:[],lmap:new _(32768),ltree:[],ttree:[],dmap:new _(32768),dtree:[],imap:new _(512),itree:[],rev15:new _(32768),lhst:new x(286),dhst:new x(30),ihst:new x(19),lits:new x(15e3),strt:new _(65536),prev:new _(32768)});var _,x;!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,w.rev15[e]=(t>>>16|t<<16)>>>17}function r(e,t,r){for(;0!=t--;)e.push(0,r)}for(e=0;e<32;e++)w.ldef[e]=w.of0[e]<<3|w.exb[e],w.ddef[e]=w.df0[e]<<4|w.dxb[e];r(w.fltree,144,8),r(w.fltree,112,9),r(w.fltree,24,7),r(w.fltree,8,8),d(w.fltree,9),m(w.fltree,9,w.flmap),y(w.fltree,9),r(w.fdtree,32,5),d(w.fdtree,5),m(w.fdtree,5,w.fdmap),y(w.fdtree,5),r(w.itree,19,0),r(w.ltree,286,0),r(w.dtree,30,0),r(w.ttree,320,0)}();const j={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,n){for(var o=0;o<n;o++)e=j.table[255&(e^t[r+o])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^j.update(4294967295,e,t,r)}};function O(e,t){return function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var n=v,o=g,i=p,s=b,a=null==t;a&&(t=new r(e.length>>>2<<3));for(var l,u,c=0,y=0,_=0,x=0,j=0,O=0,A=0,E=0,S=0;0==c;)if(c=n(e,S,1),y=n(e,S+1,2),S+=3,0!=y){if(a&&(t=f(t,E+(1<<17))),1==y&&(l=w.flmap,u=w.fdmap,O=511,A=31),2==y){_=o(e,S,5)+257,x=o(e,S+5,5)+1,j=o(e,S+10,4)+4,S+=14;for(var k=0;k<38;k+=2)w.itree[k]=0,w.itree[k+1]=0;var R=1;for(k=0;k<j;k++){var $=o(e,S+3*k,3);w.itree[1+(w.ordr[k]<<1)]=$,$>R&&(R=$)}S+=3*j,d(w.itree,R),m(w.itree,R,w.imap),l=w.lmap,u=w.dmap,S=i(w.imap,(1<<R)-1,_+x,e,S,w.ttree);var I=h(w.ttree,0,_,w.ltree);O=(1<<I)-1;var P=h(w.ttree,_,x,w.dtree);A=(1<<P)-1,d(w.ltree,I),m(w.ltree,I,l),d(w.dtree,P),m(w.dtree,P,u)}for(;;){var M=l[s(e,S)&O];S+=15&M;var C=M>>>4;if(C>>>8==0)t[E++]=C;else{if(256==C)break;var L=E+C-254;if(C>264){var T=w.ldef[C-257];L=E+(T>>>3)+o(e,S,7&T),S+=7&T}var D=u[s(e,S)&A];S+=15&D;var U=D>>>4,N=w.ddef[U],z=(N>>>4)+n(e,S,15&N);for(S+=15&N,a&&(t=f(t,E+(1<<17)));E<L;)t[E]=t[E++-z],t[E]=t[E++-z],t[E]=t[E++-z],t[E]=t[E++-z];E=L}}}else{0!=(7&S)&&(S+=8-(7&S));var F=4+(S>>>3),B=e[F-4]|e[F-3]<<8;a&&(t=f(t,E+B)),t.set(new r(e.buffer,e.byteOffset+F,B),E),S=F+B<<3,E+=B}return t.length==E?t:t.slice(0,E)}(e,t)}const A={numWorkers:1,workerURL:"",useWorkers:!1};let E=0,S=0,k=!0;const R=[],$=[],I=[],P=new Map;function M(e){T(e.target);const{id:t,error:r,data:n}=e.data,o=P.get(t);P.delete(t),r?o.reject(r):o.resolve(n)}function C(e){return new Promise(((t,r)=>{const n=new Worker(e);n.onmessage=e=>{"start"===e.data?(n.onerror=void 0,n.onmessage=void 0,t(n)):r(new Error(`unexpected message: ${e.data}`))},n.onerror=r}))}const L=function(){if(l){const{Worker:n}=(r="worker_threads",(e=t).require?e.require(r):{});return{async createWorker(e){return new n(e)},addEventListener(e,t){e.on("message",(r=>{t({target:e,data:r})}))},async terminate(e){await e.terminate()}}}var e,r;return{async createWorker(e){try{return await C(e)}catch(t){n.warn("could not load worker:",e)}let t;try{const r=await fetch(e,{mode:"cors"});if(!r.ok)throw new Error(`could not load: ${e}`);t=await r.text(),e=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const n=await C(e);return A.workerURL=e,n}catch(t){n.warn("could not load worker via fetch:",e)}if(void 0!==t)try{e=`data:application/javascript;base64,${btoa(t)}`;const r=await C(e);return A.workerURL=e,r}catch(e){n.warn("could not load worker via dataURI")}throw n.warn("workers will not be used"),new Error("can not start workers")},addEventListener(e,t){e.addEventListener("message",t)},async terminate(e){e.terminate()}}}();function T(e){$.push(e),U()}function D(e,t,r,n){const o=new Uint8Array(t);O(e,o),n(r?new Blob([o],{type:r}):o.buffer)}async function U(){if(0!==I.length){if(A.useWorkers&&k){const e=await async function(){if(0===$.length&&S<A.numWorkers){++S;try{const e=await L.createWorker(A.workerURL);R.push(e),$.push(e),L.addEventListener(e,M)}catch(e){k=!1}}return $.pop()}();if(k){if(e){if(0===I.length)return void T(e);const{id:t,src:r,uncompressedSize:n,type:o,resolve:i,reject:s}=I.shift();P.set(t,{id:t,resolve:i,reject:s});const a=[];e.postMessage({type:"inflate",data:{id:t,type:o,src:r,uncompressedSize:n}},a)}return}}for(;I.length;){const{src:e,uncompressedSize:t,type:r,resolve:n}=I.shift();let o=e;s(e)&&(o=await i(e)),D(o,t,r,n)}}}function N(e,t,r){return new Promise(((n,o)=>{I.push({src:e,uncompressedSize:t,type:r,resolve:n,reject:o,id:E++}),U()}))}function z(e){e.splice(0,e.length)}class F{constructor(e,t){var r,n;this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=(r=t.lastModFileDate,n=t.lastModFileTime,new Date(1980+(r>>9&127),(r>>5&15)-1,31&r,n>>11&31,n>>5&63,2*(31&n),0)),this.isDirectory=0===t.uncompressedSize&&t.name.endsWith("/"),this.encrypted=!!(1&t.generalPurposeBitFlag),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await async function(e,t,r){const{decompress:n,fileDataStart:o}=await Y(e,t);if(!n){const n=await q(e,o,t.compressedSize,r);return s(n)?n:new Blob([a(n.buffer)?new Uint8Array(n):n],{type:r})}const i=await q(e,o,t.compressedSize);return await N(i,t.uncompressedSize,r)}(this._reader,this._rawEntry,e)}async arrayBuffer(){return await async function(e,t){const{decompress:r,fileDataStart:n}=await Y(e,t);if(!r){const r=await B(e,n,t.compressedSize);return 0===(o=r).byteOffset&&o.byteLength===o.buffer.byteLength?r.buffer:r.slice().buffer}var o;const i=await q(e,n,t.compressedSize);return await N(i,t.uncompressedSize)}(this._reader,this._rawEntry)}async text(){const e=await this.arrayBuffer();return K(new Uint8Array(e))}async json(){const e=await this.text();return JSON.parse(e)}}async function B(e,t,r){return await e.read(t,r)}async function q(e,t,r,n){return e.sliceAsBlob?await e.sliceAsBlob(t,r,n):await e.read(t,r)}const W={unsigned(){return 0}};function V(e,t){return e[t]+256*e[t+1]}function H(e,t){return e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function G(e,t){return H(e,t)+4294967296*H(e,t+4)}const J=new TextDecoder;function K(e,t){return a(e.buffer)&&(e=new Uint8Array(e)),J.decode(e)}async function X(e,t,r,n){const o=t-20,i=await B(e,o,20);if(117853008!==H(i,0))throw new Error("invalid zip64 end of central directory locator signature");const s=G(i,8),a=await B(e,s,56);if(101075792!==H(a,0))throw new Error("invalid zip64 end of central directory record signature");const l=G(a,32),u=G(a,40);return Z(e,G(a,48),u,l,r,n)}async function Z(e,t,r,n,o,i){let s=0;const a=await B(e,t,r),l=[];for(let e=0;e<n;++e){const e=a.subarray(s,s+46),t=H(e,0);if(33639248!==t)throw new Error(`invalid central directory file header signature: 0x${t.toString(16)}`);const r={versionMadeBy:V(e,4),versionNeededToExtract:V(e,6),generalPurposeBitFlag:V(e,8),compressionMethod:V(e,10),lastModFileTime:V(e,12),lastModFileDate:V(e,14),crc32:H(e,16),compressedSize:H(e,20),uncompressedSize:H(e,24),fileNameLength:V(e,28),extraFieldLength:V(e,30),fileCommentLength:V(e,32),internalFileAttributes:V(e,36),externalFileAttributes:H(e,38),relativeOffsetOfLocalHeader:H(e,42)};if(64&r.generalPurposeBitFlag)throw new Error("strong encryption is not supported");s+=46;const n=a.subarray(s,s+r.fileNameLength+r.extraFieldLength+r.fileCommentLength);r.nameBytes=n.slice(0,r.fileNameLength),r.name=K(r.nameBytes);const o=r.fileNameLength+r.extraFieldLength,i=n.slice(r.fileNameLength,o);r.extraFields=[];let u=0;for(;u<i.length-3;){const e=V(i,u+0),t=u+4,n=t+V(i,u+2);if(n>i.length)throw new Error("extra field length exceeds extra field buffer size");r.extraFields.push({id:e,data:i.slice(t,n)}),u=n}if(r.commentBytes=n.slice(o,o+r.fileCommentLength),r.comment=K(r.commentBytes),s+=n.length,4294967295===r.uncompressedSize||4294967295===r.compressedSize||4294967295===r.relativeOffsetOfLocalHeader){const e=r.extraFields.find((e=>1===e.id));if(!e)throw new Error("expected zip64 extended information extra field");const t=e.data;let n=0;if(4294967295===r.uncompressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include uncompressed size");r.uncompressedSize=G(t,n),n+=8}if(4294967295===r.compressedSize){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include compressed size");r.compressedSize=G(t,n),n+=8}if(4294967295===r.relativeOffsetOfLocalHeader){if(n+8>t.length)throw new Error("zip64 extended information extra field does not include relative header offset");r.relativeOffsetOfLocalHeader=G(t,n),n+=8}}const c=r.extraFields.find((e=>28789===e.id&&e.data.length>=6&&1===e.data[0]&&H(e.data,1)),W.unsigned(r.nameBytes));if(c&&(r.fileName=K(c.data.slice(5))),0===r.compressionMethod){let e=r.uncompressedSize;if(0!=(1&r.generalPurposeBitFlag)&&(e+=12),r.compressedSize!==e)throw new Error(`compressed size mismatch for stored file: ${r.compressedSize} != ${e}`)}l.push(r)}return{zip:{comment:o,commentBytes:i},entries:l.map((t=>new F(e,t)))}}async function Y(e,t){if(1&t.generalPurposeBitFlag)throw new Error("encrypted entries not supported");const r=await B(e,t.relativeOffsetOfLocalHeader,30),n=await e.getLength(),o=H(r,0);if(67324752!==o)throw new Error(`invalid local file header signature: 0x${o.toString(16)}`);const i=V(r,26),s=V(r,28),a=t.relativeOffsetOfLocalHeader+r.length+i+s;let l;if(0===t.compressionMethod)l=!1;else{if(8!==t.compressionMethod)throw new Error(`unsupported compression method: ${t.compressionMethod}`);l=!0}const u=a,c=u+t.compressedSize;if(0!==t.compressedSize&&c>n)throw new Error(`file data overflows file bounds: ${u} +  ${t.compressedSize}  > ${n}`);return{decompress:l,fileDataStart:u}}async function Q(e){let t;if("undefined"!=typeof Blob&&e instanceof Blob)t=new c(e);else if(e instanceof ArrayBuffer||e&&e.buffer&&e.buffer instanceof ArrayBuffer)t=new u(e);else if(a(e)||a(e.buffer))t=new u(e);else if("string"==typeof e){const r=await fetch(e);if(!r.ok)throw new Error(`failed http request ${e}, status: ${r.status}: ${r.statusText}`);const n=await r.blob();t=new c(n)}else{if("function"!=typeof e.getLength||"function"!=typeof e.read)throw new Error("unsupported source type");t=e}const r=await t.getLength();if(r>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${r}. Only file sizes up 4503599627370496 bytes are supported`);return await async function(e,t){const r=Math.min(65557,t),n=t-r,o=await B(e,n,r);for(let t=r-22;t>=0;--t){if(101010256!==H(o,t))continue;const r=new Uint8Array(o.buffer,o.byteOffset+t,o.byteLength-t),i=V(r,4);if(0!==i)throw new Error(`multi-volume zip files are not supported. This is volume: ${i}`);const s=V(r,10),a=H(r,12),l=H(r,16),u=V(r,20),c=r.length-22;if(u!==c)throw new Error(`invalid comment length. expected: ${c}, actual: ${u}`);const f=new Uint8Array(r.buffer,r.byteOffset+22,u),p=K(f);return 65535===s||4294967295===l?await X(e,n+t,p,f):await Z(e,l,a,s,p,f)}throw new Error("could not find end of central directory. maybe not zip file")}(t,r)}r.HTTPRangeReader=class{constructor(e){this.url=e}async getLength(){if(void 0===this.length){const e=await fetch(this.url,{method:"HEAD"});if(!e.ok)throw new Error(`failed http request ${this.url}, status: ${e.status}: ${e.statusText}`);if(this.length=parseInt(e.headers.get("content-length")),Number.isNaN(this.length))throw Error("could not get length")}return this.length}async read(e,t){if(0===t)return new Uint8Array(0);const r=await fetch(this.url,{headers:{Range:`bytes=${e}-${e+t-1}`}});if(!r.ok)throw new Error(`failed http request ${this.url}, status: ${r.status} offset: ${e} size: ${t}: ${r.statusText}`);const n=await r.arrayBuffer();return new Uint8Array(n)}},r.cleanup=function(){!async function(){for(const e of R)await L.terminate(e);z(R),z($),z(I),P.clear(),S=0,k=!0}()},r.setOptions=function(e){!function(e){A.workerURL=e.workerURL||A.workerURL,e.workerURL&&(A.useWorkers=!0),A.useWorkers=void 0!==e.useWorkers?e.useWorkers:A.useWorkers,A.numWorkers=e.numWorkers||A.numWorkers}(e)},r.unzip=async function(e){const{zip:t,entries:r}=await Q(e);return{zip:t,entries:Object.fromEntries(r.map((e=>[e.name,e])))}},r.unzipRaw=Q,Object.defineProperty(r,"__esModule",{value:!0})},i("object"==typeof r&&void 0!==t?r:(o="undefined"!=typeof globalThis?globalThis:o||self).unzipit={})}).call(this)}).call(this,e("_process"))},{_process:60}],70:[function(e,t,r){"use strict";var n=e("punycode");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=e("qs");function v(e,t,r){if(e&&"object"==typeof e&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(s);if(v=v.trim(),!r&&1===e.split("#").length){var b=a.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=i.exec(v);if(w){var _=(w=w[0]).toLowerCase();this.protocol=_,v=v.substr(w.length)}if(r||w||v.match(/^\/\/[^@/]+@[^@/]+/)){var x="//"===v.substr(0,2);!x||w&&m[w]||(v=v.substr(2),this.slashes=!0)}if(!m[w]&&(x||w&&!y[w])){for(var j,O,A=-1,E=0;E<f.length;E++)-1!==(S=v.indexOf(f[E]))&&(-1===A||S<A)&&(A=S);for(-1!==(O=-1===A?v.lastIndexOf("@"):v.lastIndexOf("@",A))&&(j=v.slice(0,O),v=v.slice(O+1),this.auth=decodeURIComponent(j)),A=-1,E=0;E<c.length;E++){var S;-1!==(S=v.indexOf(c[E]))&&(-1===A||S<A)&&(A=S)}-1===A&&(A=v.length),this.host=v.slice(0,A),v=v.slice(A),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var R=this.hostname.split(/\./),$=(E=0,R.length);E<$;E++){var I=R[E];if(I&&!I.match(p)){for(var P="",M=0,C=I.length;M<C;M++)I.charCodeAt(M)>127?P+="x":P+=I[M];if(!P.match(p)){var L=R.slice(0,E),T=R.slice(E+1),D=I.match(h);D&&(L.push(D[1]),T.unshift(D[2])),T.length&&(v="/"+T.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+U,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!d[_])for(E=0,$=u.length;E<$;E++){var z=u[E];if(-1!==v.indexOf(z)){var F=encodeURIComponent(z);F===z&&(F=escape(z)),v=v.split(z).join(F)}}var B=v.indexOf("#");-1!==B&&(this.hash=v.substr(B),v=v.slice(0,B));var q=v.indexOf("?");if(-1!==q?(this.search=v.substr(q),this.query=v.substr(q+1),t&&(this.query=g.parse(this.query)),v=v.slice(0,q)):t&&(this.search="",this.query={}),v&&(this.pathname=v),y[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(i=g.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if("string"==typeof e){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(r[u]=e[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var p=c[f];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",g=r.search||"";r.path=d+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||v||r.host&&e.pathname,_=w,x=r.pathname&&r.pathname.split("/")||[],j=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(j&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===x[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=h;else if(h.length)x||(x=[]),x.pop(),x=x.concat(h),r.search=e.search,r.query=e.query;else if(null!=e.search)return j&&(r.host=x.shift(),r.hostname=r.host,(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.hostname=k.shift(),r.host=r.hostname)),r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=x.slice(-1)[0],A=(r.host||e.host||x.length>1)&&("."===O||".."===O)||""===O,E=0,S=x.length;S>=0;S--)"."===(O=x[S])?x.splice(S,1):".."===O?(x.splice(S,1),E++):E&&(x.splice(S,1),E--);if(!w&&!_)for(;E--;E)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),A&&"/"!==x.join("/").substr(-1)&&x.push("");var k,R=""===x[0]||x[0]&&"/"===x[0].charAt(0);return j&&(r.hostname=R?"":x.length?x.shift():"",r.host=r.hostname,(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.hostname=k.shift(),r.host=r.hostname)),(w=w||r.host&&x.length)&&!R&&x.unshift(""),x.length>0?r.pathname=x.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},r.parse=v,r.resolve=function(e,t){return v(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},r.format=function(e){return"string"==typeof e&&(e=v(e)),e instanceof o?e.format():o.prototype.format.call(e)},r.Url=o},{punycode:61,qs:63}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return l.default}});var n=p(e("./v1.js")),o=p(e("./v3.js")),i=p(e("./v4.js")),s=p(e("./v5.js")),a=p(e("./nil.js")),l=p(e("./version.js")),u=p(e("./validate.js")),c=p(e("./stringify.js")),f=p(e("./parse.js"));function p(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":74,"./parse.js":75,"./stringify.js":79,"./v1.js":80,"./v3.js":81,"./v4.js":83,"./v5.js":84,"./validate.js":85,"./version.js":86}],72:[function(e,t,r){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function o(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,n,i,s){return o((a=o(o(t,e),o(n,s)))<<(l=i)|a>>>32-l,r);var a,l}function s(e,t,r,n,o,s,a){return i(t&r|~t&n,e,t,o,s,a)}function a(e,t,r,n,o,s,a){return i(t&n|r&~n,e,t,o,s,a)}function l(e,t,r,n,o,s,a){return i(t^r^n,e,t,o,s,a)}function u(e,t,r,n,o,s,a){return i(r^(t|~n),e,t,o,s,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let o=0;o<r;o+=8){const r=e[o>>5]>>>o%32&255,i=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,i=-271733879,c=-1732584194,f=271733878;for(let t=0;t<e.length;t+=16){const n=r,p=i,h=c,d=f;r=s(r,i,c,f,e[t],7,-680876936),f=s(f,r,i,c,e[t+1],12,-389564586),c=s(c,f,r,i,e[t+2],17,606105819),i=s(i,c,f,r,e[t+3],22,-1044525330),r=s(r,i,c,f,e[t+4],7,-176418897),f=s(f,r,i,c,e[t+5],12,1200080426),c=s(c,f,r,i,e[t+6],17,-1473231341),i=s(i,c,f,r,e[t+7],22,-45705983),r=s(r,i,c,f,e[t+8],7,1770035416),f=s(f,r,i,c,e[t+9],12,-1958414417),c=s(c,f,r,i,e[t+10],17,-42063),i=s(i,c,f,r,e[t+11],22,-1990404162),r=s(r,i,c,f,e[t+12],7,1804603682),f=s(f,r,i,c,e[t+13],12,-40341101),c=s(c,f,r,i,e[t+14],17,-1502002290),i=s(i,c,f,r,e[t+15],22,1236535329),r=a(r,i,c,f,e[t+1],5,-165796510),f=a(f,r,i,c,e[t+6],9,-1069501632),c=a(c,f,r,i,e[t+11],14,643717713),i=a(i,c,f,r,e[t],20,-373897302),r=a(r,i,c,f,e[t+5],5,-701558691),f=a(f,r,i,c,e[t+10],9,38016083),c=a(c,f,r,i,e[t+15],14,-660478335),i=a(i,c,f,r,e[t+4],20,-405537848),r=a(r,i,c,f,e[t+9],5,568446438),f=a(f,r,i,c,e[t+14],9,-1019803690),c=a(c,f,r,i,e[t+3],14,-187363961),i=a(i,c,f,r,e[t+8],20,1163531501),r=a(r,i,c,f,e[t+13],5,-1444681467),f=a(f,r,i,c,e[t+2],9,-51403784),c=a(c,f,r,i,e[t+7],14,1735328473),i=a(i,c,f,r,e[t+12],20,-1926607734),r=l(r,i,c,f,e[t+5],4,-378558),f=l(f,r,i,c,e[t+8],11,-2022574463),c=l(c,f,r,i,e[t+11],16,1839030562),i=l(i,c,f,r,e[t+14],23,-35309556),r=l(r,i,c,f,e[t+1],4,-1530992060),f=l(f,r,i,c,e[t+4],11,1272893353),c=l(c,f,r,i,e[t+7],16,-155497632),i=l(i,c,f,r,e[t+10],23,-1094730640),r=l(r,i,c,f,e[t+13],4,681279174),f=l(f,r,i,c,e[t],11,-358537222),c=l(c,f,r,i,e[t+3],16,-722521979),i=l(i,c,f,r,e[t+6],23,76029189),r=l(r,i,c,f,e[t+9],4,-640364487),f=l(f,r,i,c,e[t+12],11,-421815835),c=l(c,f,r,i,e[t+15],16,530742520),i=l(i,c,f,r,e[t+2],23,-995338651),r=u(r,i,c,f,e[t],6,-198630844),f=u(f,r,i,c,e[t+7],10,1126891415),c=u(c,f,r,i,e[t+14],15,-1416354905),i=u(i,c,f,r,e[t+5],21,-57434055),r=u(r,i,c,f,e[t+12],6,1700485571),f=u(f,r,i,c,e[t+3],10,-1894986606),c=u(c,f,r,i,e[t+10],15,-1051523),i=u(i,c,f,r,e[t+1],21,-2054922799),r=u(r,i,c,f,e[t+8],6,1873313359),f=u(f,r,i,c,e[t+15],10,-30611744),c=u(c,f,r,i,e[t+6],15,-1560198380),i=u(i,c,f,r,e[t+13],21,1309151649),r=u(r,i,c,f,e[t+4],6,-145523070),f=u(f,r,i,c,e[t+11],10,-1120210379),c=u(c,f,r,i,e[t+2],15,718787259),i=u(i,c,f,r,e[t+9],21,-343485551),r=o(r,n),i=o(i,p),c=o(c,h),f=o(f,d)}return[r,i,c,f]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=c},{}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n},{}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"},{}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i},{"./validate.js":85}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],77:[function(e,t,r){"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)};const o=new Uint8Array(16)},{}],78:[function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function o(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s);for(let t=0;t<s;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=a[e][t];for(let e=16;e<80;++e)i[e]=o(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let s=r[0],l=r[1],u=r[2],c=r[3],f=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=o(s,5)+n(r,l,u,c)+f+t[r]+i[e]>>>0;f=c,c=u,u=o(l,30)>>>0,l=s,s=a}r[0]=r[0]+s>>>0,r[1]=r[1]+l>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+c>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i},{}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=s;var n,o=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function s(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=s(e,t);if(!(0,o.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a},{"./validate.js":85}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./rng.js"))&&n.__esModule?n:{default:n},i=e("./stringify.js");let s,a,l=0,u=0;var c=function(e,t,r){let n=t&&r||0;const c=t||new Array(16);let f=(e=e||{}).node||s,p=void 0!==e.clockseq?e.clockseq:a;if(null==f||null==p){const t=e.random||(e.rng||o.default)();null==f&&(f=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=a=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:u+1;const m=h-l+(d-u)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||h>l)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,u=d,a=p,h+=122192928e5;const y=(1e4*(268435455&h)+d)%4294967296;c[n++]=y>>>24&255,c[n++]=y>>>16&255,c[n++]=y>>>8&255,c[n++]=255&y;const g=h/4294967296*1e4&268435455;c[n++]=g>>>8&255,c[n++]=255&g,c[n++]=g>>>24&15|16,c[n++]=g>>>16&255,c[n++]=p>>>8|128,c[n++]=255&p;for(let e=0;e<6;++e)c[n+e]=f[e];return t||(0,i.unsafeStringify)(c)};r.default=c},{"./rng.js":77,"./stringify.js":79}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),o=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v3",48,o.default);r.default=s},{"./md5.js":72,"./v35.js":82}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,s,a){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,i.default)(n)),16!==(null===(l=n)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=u[e];return s}return(0,o.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=s,n.URL=a,n};var n,o=e("./stringify.js"),i=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a},{"./parse.js":75,"./stringify.js":79}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./native.js")),o=s(e("./rng.js")),i=e("./stringify.js");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const s=(e=e||{}).random||(e.rng||o.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return(0,i.unsafeStringify)(s)};r.default=a},{"./native.js":73,"./rng.js":77,"./stringify.js":79}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("./v35.js")),o=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v5",80,o.default);r.default=s},{"./sha1.js":78,"./v35.js":82}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var i=function(e){return"string"==typeof e&&o.default.test(e)};r.default=i},{"./regex.js":76}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var i=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i},{"./validate.js":85}],87:[function(e,t,r){(function(r){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),s=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/defineProperty"));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e("./helpers/utils.js"),p=e("./error.js"),h=e("@coherentglobal/wasm-runner"),d=h.WasmRunner,m=h.CancellationToken,y=h.ModelExecuteCancelled,g=e("./validate.js"),v=e("./models.js"),b=e("./findModels.js"),w=e("./xcallTracker.js"),_=function(){function e(t){var n,o,i,a,l,u,c,p,h,d,m,y,g,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,e),this._registry=void 0,null!=v&&v.log&&(this.logger=v.log),this.config=this.validateConfig(t),this.tenant=null!==(n=null===(o=this.config)||void 0===o||null===(o=o.sparkEndpoint)||void 0===o?void 0:o.tenant)&&void 0!==n?n:"",this.authType=null!==(i=null===(a=this.config)||void 0===a||null===(a=a.sparkEndpoint)||void 0===a?void 0:a.authType)&&void 0!==i?i:"",this.token=null!==(l=null!==(u=null===(c=this.config)||void 0===c||null===(c=c.sparkEndpoint)||void 0===c?void 0:c.syntheticKey)&&void 0!==u?u:null===(p=this.config)||void 0===p||null===(p=p.sparkEndpoint)||void 0===p?void 0:p.bearerToken)&&void 0!==l?l:"",this.url=null!==(h=null===(d=this.config)||void 0===d||null===(d=d.sparkEndpoint)||void 0===d?void 0:d.url)&&void 0!==h?h:"",this.isCompatible=f.isWasmSupported(),this.priority=["model","onlineEndpoint"],this.model=this._models(null===(m=this.config)||void 0===m?void 0:m.nodeGenModels),this.modelCount=0,this._offlinePreventCleanupModels=[],this._offlineLastExecution={},this._offlineLastExecuting={},this.offlineMaxService=(null===(y=this.config)||void 0===y?void 0:y.offlineMaxService)||parseInt(r.env.OFFLINE_MAX_SERVICE)||20,this.timeout=(null===(g=this.config)||void 0===g?void 0:g.timeout)||parseInt(r.env.TIMEOUT_MS)||6e4}return(0,a.default)(e,[{key:"log",value:function(e){this.logger&&this.logger(e)}},{key:"_models",value:function(e){this.log({eventType:"spark._models",msg:"Parse models"});for(var t=[],r=0;r<e.length;r++){var n=Date.now();this.log({eventType:"spark._models.processModels.start",msg:"Start process model ".concat(r)});var o=v(e[r],r,this.log.bind(this)),i=Date.now();this.log({eventType:"spark._models.processModels.end",msg:"End process model ".concat(r),duration:i-n}),t.push(o)}return t}},{key:"validateConfig",value:function(e){var t=Date.now();this.log({eventType:"spark.validateconfig.start"});var r=g(e),n=r.value,o=r.error;if(o){var i=JSON.stringify(o.details),s=Date.now();throw this.log({eventType:"spark.validateconfig.startend.error",duration:s-t}),new Error("ValidationError: ".concat(i))}var a=Date.now();return this.log({eventType:"spark.validateconfig.startend",duration:a-t}),n}},{key:"_getModel",value:function(e){var t=this.model.find((function(t){return t.versionId===e}));if(!t)throw new p.MissingModelError(e);return t}},{key:"_getModelByMeta",value:function(e,t){var r=this.model.find((function(r){var n,o;return(null==r||null===(n=r.metaData)||void 0===n||null===(n=n.EngineInformation)||void 0===n?void 0:n.ProductName)===e&&(null==r||null===(o=r.metaData)||void 0===o||null===(o=o.EngineInformation)||void 0===o?void 0:o.ServiceName)===t}));if(!r)throw new p.MissingModelError(t);return r}},{key:"executeWithCancellationToken",value:function(e,t){var r=this,n=m.create();return setTimeout((function(){n.cancel()}),this.timeout),{cancellationToken:n,response:new Promise((function(o,i){r.execute(e,t,n).then((function(e){return o(e)})).catch((function(e){return i(e)}))}))}}},{key:"execute",value:(u=(0,i.default)(o.default.mark((function e(t,r,n){var i,s,a,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.model){e.next=2;break}throw new p.BadRequestError("Spark initialize is required. Please call initialize method");case 2:return a=r||(null==t||null===(i=t.request_meta)||void 0===i?void 0:i.version_id)||(null==t||null===(s=t.request_meta)||void 0===s?void 0:s.version_uuid),l={model:this.offlineModel.bind(this),onlineEndpoint:this.onlineModelEndpoint.bind(this)},e.next=6,l[this.priority[0]](t,a,this,"default",n);case 6:if(!((u=e.sent)instanceof Error&&void 0!==this.config.sparkEndpoint)){e.next=11;break}return e.next=10,l[this.priority[1]](t,a,this);case 10:u=e.sent;case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"offlineModel",value:(l=(0,i.default)(o.default.mark((function e(t,r,n){var s,a,l,u,c,h,m,g,v,_,x,j,O,A,E,S,k,R,$,I,P,M,C=this,L=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=L.length>3&&void 0!==L[3]?L[3]:"default",a=L.length>4?L[4]:void 0,e.prev=2,u=b(t.request_meta,this.model),l=r||u&&(null==u?void 0:u.versionId),null!=t&&t.request_meta||(t.request_meta={}),r&&(t.request_meta.version_id=l),void 0===this._registry&&(c=function(){var e=(0,i.default)(o.default.mark((function e(t){var r,n,i,s,a,l,c,f,p,h,d,m,y,g,v,b,_,x;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null==t?void 0:t.folder_name,s=null==t?void 0:t.service_name,null!=t&&t.service_uri?null===/folders\/(.+)\/services\/(.+)/gi.exec(null==t?void 0:t.service_uri)?(null==t?void 0:t.service_uri.indexOf("/"))>-1&&(i=null==t?void 0:t.service_uri.split("/")[0],s=null==t?void 0:t.service_uri.split("/")[1],a="folders/".concat(i,"/services/").concat(s)):a=null==t?void 0:t.service_uri:a="folders/".concat(i,"/services/").concat(s),(l=/folders\/(.+)\/services\/(.+)/gi.exec(a))&&(i=decodeURI(l[1]),s=decodeURI(l[2])),!(c=null==t?void 0:t.version_id)||C._registry.isExist(c)){e.next=14;break}return e.next=10,C._registry.append({id:c,url:u.binary,meta:{folder_name:null!==(f=null==u||null===(p=u.metaData)||void 0===p||null===(p=p.EngineInformation)||void 0===p?void 0:p.ProductName)&&void 0!==f?f:"",service_name:null!==(h=null==u||null===(d=u.metaData)||void 0===d||null===(d=d.EngineInformation)||void 0===d?void 0:d.ServiceName)&&void 0!==h?h:""}});case 10:C.modelCount=C.modelCount+1,C.log({EventType:"ModelCount.Callback",modelCount:C.modelCount,offlineMaxService:C.offlineMaxService,TextMessage:"Model count ".concat(C.modelCount)}),e.next=18;break;case 14:return b=C._getModelByMeta(i,s),c=null==b?void 0:b.versionId,e.next=18,C._registry.append({id:c,url:b.binary,meta:{folder_name:null!==(m=null==b||null===(y=b.metaData)||void 0===y||null===(y=y.EngineInformation)||void 0===y?void 0:y.ProductName)&&void 0!==m?m:"",service_name:null!==(g=null==b||null===(v=b.metaData)||void 0===v||null===(v=v.EngineInformation)||void 0===v?void 0:v.ServiceName)&&void 0!==g?g:""}});case 18:return null!=t&&null!==(r=t.context)&&void 0!==r&&r.xcallChainId&&null!=t&&null!==(n=t.context)&&void 0!==n&&n.upStreamId&&c&&w.track(null==t||null===(_=t.context)||void 0===_?void 0:_.xcallChainId,null==t||null===(x=t.context)||void 0===x?void 0:x.upStreamId,c),e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._registry=new d(void 0,c,""));case 8:if(!this._offlineLastExecuting[l]){e.next=13;break}return e.next=11,f.sleep(10);case 11:e.next=8;break;case 13:if(this._offlineLastExecuting[l]=!0,this._registry.isExist(l)){e.next=20;break}return _=b(t.request_meta,this.model),e.next=18,this._registry.append({id:l,url:_.binary,meta:{folder_name:null!==(h=null==_||null===(m=_.metaData)||void 0===m||null===(m=m.EngineInformation)||void 0===m?void 0:m.ProductName)&&void 0!==h?h:"",service_name:null!==(g=null==_||null===(v=_.metaData)||void 0===v||null===(v=v.EngineInformation)||void 0===v?void 0:v.ServiceName)&&void 0!==g?g:""}});case 18:this.modelCount=this.modelCount+1,_&&_.preventCleanup&&this._offlinePreventCleanupModels.push(null==_?void 0:_.versionId);case 20:x=0,j=3,O=!0,A=0;case 24:if(!(O&&x<=j)){e.next=50;break}return E=w.issueXcallChainId(),S=f.appendingContext(s,t,null,null,E,!0),e.next=29,this._registry.execute(S,l,(function(){}),a);case 29:if(!(k=e.sent).executeError){e.next=39;break}return x++,M=Date.now(),this._registry.remove(l),e.next=36,this._registry.append({id:l,url:u.binary,meta:{folder_name:null!==(R=null==u||null===($=u.metaData)||void 0===$||null===($=$.EngineInformation)||void 0===$?void 0:$.ProductName)&&void 0!==R?R:"",service_name:null!==(I=null==u||null===(P=u.metaData)||void 0===P||null===(P=P.EngineInformation)||void 0===P?void 0:P.ServiceName)&&void 0!==I?I:""}});case 36:A+=Date.now()-M,e.next=48;break;case 39:if(O=!1,x>0&&k.response_meta&&void 0!==k.response_meta.process_time&&(k.response_meta.process_time=k.response_meta.process_time+A),this._offlineLastExecution[l]=Date.now(),this._offlineLastExecuting[l]=!1,!(this.modelCount>this.offlineMaxService)){e.next=46;break}return e.next=46,this._cleanUp();case 46:return this.log({EventType:"ModelCount",modelCount:this.modelCount,offlineMaxService:this.offlineMaxService,TextMessage:"Model count ".concat(this.modelCount)}),e.abrupt("return",k);case 48:e.next=24;break;case 50:e.next=59;break;case 52:if(e.prev=52,e.t0=e.catch(2),this._offlineLastExecution[l]=Date.now(),this._offlineLastExecuting[l]=!1,!(e.t0 instanceof y)){e.next=58;break}throw new p.ExecuteCancelled(l);case 58:return e.abrupt("return",e.t0);case 59:case"end":return e.stop()}}),e,this,[[2,52]])}))),function(e,t,r){return l.apply(this,arguments)})},{key:"_cleanUp",value:(n=(0,i.default)(o.default.mark((function e(){var t,r,n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],Object.keys(this._offlineLastExecuting).forEach((function(e){!1===n._offlineLastExecuting[e]&&void 0===n._offlinePreventCleanupModels.find((function(t){return t===e}))&&t.push(e)})),!(t.length>0)){e.next=14;break}this.log({EventType:"CleanUp",InstanceId:this.instanceid,TextMessage:"Clean up non executing model ".concat(t)}),t=t.sort((function(e,t){return n._offlineLastExecution[e]-n._offlineLastExecution[t]})).reverse(),r=0;case 6:if(!(r<Math.min(t.length,10))){e.next=14;break}return this.log({EventType:"CleanUp",InstanceId:this.instanceid,TextMessage:"Clean up model ".concat(t[r])}),e.next=10,this._registry.remove(t[r]);case 10:this.modelCount=this.modelCount-1;case 11:r++,e.next=6;break;case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onlineModelEndpoint",value:(t=(0,i.default)(o.default.mark((function e(t,r){var n,i,s,a,l,u,h,d,m,y,g,v;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="public"===this.authType,i="",n){e.next=12;break}if("AsyncFunction"!==this.token.constructor.name){e.next=9;break}return e.next=6,this.token();case 6:i=e.sent,e.next=10;break;case 9:i="function"==typeof this.token?this.token():this.token;case 10:if(!f.isEmpty(this.token)){e.next=12;break}throw new p.UnauthorizedError;case 12:return s=t.request_meta.service_uri,e.prev=13,a=n?{}:f.getAuthHeaders(i,this.authType,this.tenant),l={method:"POST",body:JSON.stringify({request_data:{},request_meta:t.request_meta}),headers:c(c({},{"content-type":"application/json"}),a)},s&&(d=/folders\/(.+)\/services\/(.+)/gi.exec(s))&&(u=decodeURI(d[1]),h=decodeURI(d[2])),m=s?"/".concat(this.tenant,"/api/v3/").concat(n?"public/folders/".concat(u,"/services/").concat(h,"/execute"):"folders/".concat(u,"/services/").concat(h,"/execute")):"/".concat(this.tenant,"/api/v3/").concat(n?"public/execute":"execute"),y=new URL(m,this.url),e.next=21,fetch(y,l);case 21:return g=e.sent,e.next=24,g.json();case 24:return v=e.sent,e.abrupt("return",v);case 28:throw e.prev=28,e.t0=e.catch(13),e.t0;case 31:case"end":return e.stop()}}),e,this,[[13,28]])}))),function(e,r){return t.apply(this,arguments)})}]),e;var t,n,l,u}();(0,l.default)(_,"WasmRunnerErrors",p),t.exports=_}).call(this)}).call(this,e("_process"))},{"./error.js":90,"./findModels.js":91,"./helpers/utils.js":92,"./models.js":94,"./validate.js":95,"./xcallTracker.js":96,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/regenerator":25,"@coherentglobal/wasm-runner":27,_process:60}],88:[function(e,t,r){"use strict";t.exports=function(){return{maxXcallServiceCount:15}}},{}],89:[function(e,t,r){"use strict";t.exports={INSTANCE_SEPT:":ins:"}},{}],90:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/inherits")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf"));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.default)(this,r)}}var c=function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).status=500,n}return(0,i.default)(r,[{key:"v3",get:function(){return{error_category:this.name,error_type:this.type,message:this.message,severity:this.severity}}},{key:"modelInfo",get:function(){return{uuid:this.uuid,input:this.input}}}]),r}((0,n(e("@babel/runtime/helpers/wrapNativeSuper")).default)(Error)),f=function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).name="browser_error",n.type="error.BROWSER_ERROR",n.severity="low",n}return(0,i.default)(r)}(c),p=function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.default)(this,r),(n=t.call(this,"".concat(e," support is required"))).name="not_supported_error",n.type="error.NOT_SUPPORTED",n.severity="high",n.uuid=i,n.input=s,n}return(0,i.default)(r)}(f),h=function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,"Model ".concat(e," cannot be found."))).name="missing_model_error",n.uuid=e,n.type="error.MISSING_MODEL_ERROR",n.severity="low",n}return(0,i.default)(r)}(function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,e)).name="model_error",n.type="error.MODEL_ERROR",n.severity="low",n}return(0,i.default)(r)}(c)),d=function(e){(0,s.default)(r,e);var t=u(r);function r(e,n){var i;return(0,o.default)(this,r),(i=t.call(this,e||"Unauthorized")).status=n||401,i.name="unauthorized",i.type="error.UNAUTHORIZED",i}return(0,i.default)(r)}(c),m=function(e){(0,s.default)(r,e);var t=u(r);function r(e,n){var i;return(0,o.default)(this,r),(i=t.call(this,e)).status=n||400,i.name="bad_request_error",i.type="error.BAD_REQUEST_ERROR",i}return(0,i.default)(r)}(c),y=function(e){(0,s.default)(r,e);var t=u(r);function r(e){var n;return(0,o.default)(this,r),(n=t.call(this,"Model execution cancelled")).name="execution_cancelled",n.type="error.EXECUTION",n.uuid=e,n.severity="low",n}return(0,i.default)(r)}(c);t.exports={MissingModelError:h,BrowserError:f,NotSupportedError:p,UnauthorizedError:d,BadRequestError:m,ExecuteCancelled:y}},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":16,"@babel/runtime/helpers/wrapNativeSuper":24}],91:[function(e,t,r){"use strict";var n=e("./error"),o=e("./helpers/utils.js").serviceUriBuilder;t.exports=function(e,t){var r={};if(e.version_id)r=t.filter((function(t){return t.versionId===e.version_id}));else if(e.servicename&&e.version)r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceName===e.servicename&&r.EngineInformation.Revision===e.version}));else if(e.servicename&&e.transaction_date){if((r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceName===e.servicename&&new Date(e.transaction_date)>=new Date(r.EffectiveStartDate)&&new Date(e.transaction_date)<=new Date(r.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}else if(e.servicename){var i=new Date;if((r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceName===e.servicename&&i>=new Date(r.EffectiveStartDate)&&i<=new Date(r.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}else if(e.service_id&&e.version)r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceGuid===e.service_id&&r.EngineInformation.Revision===e.version}));else if(e.service_id&&e.transaction_date){if((r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceGuid===e.service_id&&new Date(e.transaction_date)>=new Date(r.EffectiveStartDate)&&new Date(e.transaction_date)<=new Date(r.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}else if(e.service_id){var s=new Date;if((r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ServiceGuid===e.service_id&&s>=new Date(r.EffectiveStartDate)&&s<=new Date(r.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}else if(e.service_uri&&e.transaction_date){var a=o(e.service_uri),l=a.folder,u=a.service;if((r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ProductName===l&&r.EngineInformation.ServiceName===u&&new Date(e.transaction_date)>=new Date(r.EffectiveStartDate)&&new Date(e.transaction_date)<=new Date(r.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}else if(e.service_uri&&e.version){var c=o(e.service_uri),f=c.folder,p=c.service;r=t.filter((function(t){var r=t.metaData;return r.EngineInformation.ProductName===f&&r.EngineInformation.ServiceName===p&&r.EngineInformation.Revision===e.version}))}else{if(!e.service_uri)throw new Error("Model not found. requestMeta: "+JSON.stringify(e));var h=new Date,d=o(e.service_uri),m=d.folder,y=d.service;if((r=t.filter((function(e){var t=e.metaData;return t.EngineInformation.ProductName===m&&t.EngineInformation.ServiceName===y&&h>=new Date(t.EffectiveStartDate)&&h<=new Date(t.EffectiveEndDate)}))).length>1)return r.sort((function(e,t){return e.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})).localCompare(t.metaData.EngineInformation.Revision.replace(/\d+/g,(function(e){return+e+1e5})))})).reverse()}if(0===r.length)throw new n.MissingModelError(null==e?void 0:e.version_id);return r[0]}},{"./error":90,"./helpers/utils.js":92}],92:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),s=n(e("@babel/runtime/helpers/typeof")),a=e("../error.js"),l=e("../xcallTracker.js");function u(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,s.default)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}function c(){return c=(0,i.default)(o.default.mark((function e(){var t,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:10,e.next=3,new Promise((function(e){return setTimeout(e,t)}));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}t.exports={isEmpty:function(e){[Object,Array].includes((e||{}).constructor)&&Object.entries(e||{}).length},isValidURL:function(e){try{return new URL(e),!0}catch(e){return!1}},isCompatible:function(){if(!u())throw new a.NotSupportedError("WebAssembly");return!0},isWasmSupported:u,isBrowser:function(){try{return window}catch(e){return!1}},getAuthHeaders:function(e,t,r){var n={};if("syntheticKey"===t)n["x-tenant-name"]=r,n["x-synthetic-key"]=e;else{if("bearerToken"!==t)throw new Error("Invalid auth type ".concat(t));n.authorization="Bearer ".concat(e)}return n},appendingContext:function(e,t,r,n,o){var i,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return r&&(t.request_data._parameters=r.parameters.Parameters,t.request_data._parameters_key=r.key),t.request_meta||(t.request_meta={}),t.request_meta._ctx||(t.request_meta._ctx={}),t.request_meta._ctx.tenant=e,t.request_meta._ctx.upstreamVersionId=n,t.request_meta._ctx.correlationId=null===(i=t.request_meta)||void 0===i?void 0:i.correlation_id,t.request_meta._ctx.xcallChainId=s?o:l.serialize(o),t},serviceUriBuilder:function(e){var t,r,n;if(regex=/folders\/(.+)\/services\/(.+)/gi,null===regex.exec(e)){if(e.indexOf("/")>-1){var o=e.split("/");t=o[0],r=o[1],n="folders/".concat(t,"/services/").concat(r)}}else n=e;regex=/folders\/(.+)\/services\/(.+)/gi;var i=regex.exec(n);return i&&(t=decodeURI(i[1]),r=decodeURI(i[2])),{folder:t,service:r}},sleep:function(){return c.apply(this,arguments)}}},{"../error.js":90,"../xcallTracker.js":96,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/typeof":22,"@babel/runtime/regenerator":25}],93:[function(e,t,r){(function(r){(function(){"use strict";var n=e("pino");t.exports=n({level:r.env.LOG_LEVEL||"info"})}).call(this)}).call(this,e("_process"))},{_process:60,pino:59}],94:[function(e,t,r){(function(r,n){(function(){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),i=o(e("@babel/runtime/regenerator")),s=o(e("@babel/runtime/helpers/asyncToGenerator")),a=o(e("@babel/runtime/helpers/typeof")),l=o(e("@babel/runtime/helpers/defineProperty"));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e("uuid").v4,p=e("fs"),h=e("path");t.exports=function e(t,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,d=Date.now();l&&l({eventType:"processModels.start",nodegenType:t.type});var m=c({},t),y=Date.now();switch(l&&l({eventType:"processModels.spread",nodegenType:t.type,duration:y-d}),t.type){case"binary":case"uint8array":case"base64":if(r.isBuffer(t.binary)){m.binary=t.binary;var g=Date.now();l&&l({eventType:"processModels.type.buffer",nodegenType:t.type,duration:g-d})}else if("object"===(0,a.default)(t.binary)){var v={servicename:t.binary.servicename,wasm:r.from(t.binary.wasm,"base64"),js:r.from(t.binary.js,"base64"),data:r.from(t.binary.data,"base64"),metadata:r.from(t.binary.metadata,"base64")},b=Date.now();l&&l({eventType:"processModels.type.object",nodegenType:t.type,duration:b-d}),m.binary=v}else if(void 0!==t.binaryPath)e.binaryPath=t.binaryPath;else if("undefined"==typeof window){if(t.binary){if(0===o){var w=h.join(n,"resolver_temp");try{p.accessSync(w)}catch(e){p.mkdirSync(w)}}var _=h.join(n,"resolver_temp/".concat(u,"_model_").concat(t.versionId||t.VersionId||f(),".binary"));p.writeFileSync(_,r.from(t.binary,"base64")),m.binaryPath=_,t.binaryPath=_,m.binary=void 0,t.binary=void 0}}else{var x=r.from(t.binary,"base64"),j=Date.now();l&&l({eventType:"processModels.type.bufferb64",nodegenType:t.type,duration:j-d}),m.binary=x}break;case"function":var O=t.binary;"AsyncFunction"===O.constructor.name?(0,s.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:m.binary=e.sent,n=r.from(t.binary,"base64"),m.binary=n;case 5:case"end":return e.stop()}}),e)})))():m.binary=O();break;case"url":m.binary=t.binary;var A=Date.now();l&&l({eventType:"processModels.type.url",nodegenType:t.type,duration:A-d})}var E=Date.now();return l&&l({eventType:"processModels.complete",nodegenType:t.type,duration:E-d}),m}}).call(this)}).call(this,e("buffer").Buffer,"/src")},{"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/typeof":22,"@babel/runtime/regenerator":25,buffer:43,fs:42,path:58,uuid:71}],95:[function(e,t,r){"use strict";var n=e("joi"),o=n.object({replica:n.number().integer().min(1),sparkEndpoint:n.object({url:n.string().uri({scheme:["http","https"]}).required(),tenant:n.string().pattern(/^[ A-Za-z0-9_./#&+-]+$/).required(),authType:n.string().valid("public","syntheticKey","bearerToken").required(),syntheticKey:[n.string().allow(""),n.function().allow("")],bearerToken:[n.string().allow(""),n.function().allow("")]}).and("url","tenant","authType"),nodeGenModels:n.array().items(n.object({versionId:n.string(),type:n.string(),binary:[n.string().allow(""),n.function().allow(""),n.object({servicename:n.string(),wasm:n.string(),js:n.string(),data:n.string()})],binaryPath:n.string(),metaData:n.object(),replica:n.number().integer().min(1),preventCleanup:n.boolean()})).required(),timeout:n.number().integer().min(1)}).required();t.exports=function(e){return o.validate(e)}},{joi:55}],96:[function(e,t,r){"use strict";var n=e("./config"),o=e("./error").ModelError,i=e("uuid").v4,s=e("./logger"),a=e("./constants").INSTANCE_SEPT,l={},u={};t.exports={track:function(e,t,r){var i=t;if(void 0!==e&&void 0!==t&&void 0!==r){-1!==i.indexOf(a)&&t.split(a)[0]!==r&&(i=t.split(a)[0]),s.trace({msg:"track xcallChainId",xcallChain:l,xCallChainTrack:u,xcallChainId:e,trueUpstream:i,downstream:r});var c=!0;if(u[e]?(s.trace({msg:"track xcallChainId",step:1}),u[e]["".concat(i,"||").concat(r)]?c=!1:u[e]["".concat(i,"||").concat(r)]=!0):(s.trace({msg:"track xcallChainId",step:2}),u[e]={},u[e]["".concat(i,"||").concat(r)]=!0),c&&(void 0===l[e]?l[e]=1:l[e]=l[e]+1),l[e]>=n().maxXcallServiceCount)throw new o("Your model has reached the execution limit of ".concat(n().maxXcallServiceCount," and cannot be further processed. Please simplify your model or seek for assistance from the Coherent support team."))}},issueXcallChainId:function(){var e=i();return l[e]=0,e},isError:function(e){if(l[e]>=n().maxXcallServiceCount)throw new o("Your model has reached the execution limit of ".concat(n().maxXcallServiceCount," and cannot be further processed. Please simplify your model or seek for assistance from the Coherent support team."))},removeTrack:function(e){delete l[e]},serialize:function(e){return JSON.stringify({xcallChainId:e,count:l[e]||0,tracker:u[e]||{}})},deserialize:function(e){var t=JSON.parse(e);return l[t.xcallChainId]=t.count,u[t.xcallChainId]=t.tracker,t.xcallChainId}}},{"./config":88,"./constants":89,"./error":90,"./logger":93,uuid:71}]},{},[87])(87)},583:function(e,t,r){"use strict";var n=r(162)();function o(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function i(e){return r.g.Buffer&&"function"==typeof r.g.Buffer.isBuffer?r.g.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(69),a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function f(e){return!i(e)&&"function"==typeof r.g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var p=e.exports=v,h=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(h);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function y(e){if(u||!s.isFunction(e))return s.inspect(e);var t=d(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,r,n,o){throw new p.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function v(e,t){e||g(e,!0,t,"==",p.ok)}function b(e,t,r,n){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return b(e=l.call(e),t=l.call(t),r);var a,u,c=j(e),f=j(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),u=c.length-1;u>=0;u--)if(c[u]!==f[u])return!1;for(u=c.length-1;u>=0;u--)if(!b(e[a=c[u]],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&g(o,r,"Missing expected exception"+n);var i="string"==typeof n,a=!e&&o&&!r;if((!e&&s.isError(o)&&i&&_(o,r)||a)&&g(o,r,"Got unwanted exception"+n),e&&o&&r&&!_(o,r)||!e&&o)throw o}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(y(e.actual),128)+" "+e.operator+" "+m(y(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=d(t),i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(p.AssertionError,Error),p.fail=g,p.ok=v,p.equal=function(e,t,r){e!=t&&g(e,t,r,"==",p.equal)},p.notEqual=function(e,t,r){e==t&&g(e,t,r,"!=",p.notEqual)},p.deepEqual=function(e,t,r){b(e,t,!1)||g(e,t,r,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,r){b(e,t,!0)||g(e,t,r,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,r){b(e,t,!1)&&g(e,t,r,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&g(t,r,n,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,r){e!==t&&g(e,t,r,"===",p.strictEqual)},p.notStrictEqual=function(e,t,r){e===t&&g(e,t,r,"!==",p.notStrictEqual)},p.throws=function(e,t,r){x(!0,e,t,r)},p.doesNotThrow=function(e,t,r){x(!1,e,t,r)},p.ifError=function(e){if(e)throw e},p.strict=n((function e(t,r){t||g(t,!0,r,"==",e)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var j=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}},76:function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},14:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},69:function(e,t,r){var n=r(155),o=r(108),i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<o;a=n[++r])y(a)||!_(a)?s+=" "+a:s+=" "+l(a);return s},t.deprecate=function(e,i){if(b(r.g.process))return function(){return t.deprecate(e,i).apply(this,arguments)};if(!0===n.noDeprecation)return e;var s=!1;return function(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?o.trace(i):o.error(i),s=!0}return e.apply(this,arguments)}};var s,a={};function l(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),f(n,e,n.depth)}function u(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function c(e,t){return e}function f(e,r,n){if(e.customInspect&&r&&O(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return v(o)||(o=f(e,o,n)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),j(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(O(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(j(r))return p(r)}var u,c="",_=!1,A=["{","}"];return d(r)&&(_=!0,A=["[","]"]),O(r)&&(c=" [Function"+(r.name?": "+r.name:"")+"]"),w(r)&&(c=" "+RegExp.prototype.toString.call(r)),x(r)&&(c=" "+Date.prototype.toUTCString.call(r)),j(r)&&(c=" "+p(r)),0!==s.length||_&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=_?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)R(t,String(s))?i.push(h(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(e,t,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return h(e,r,n,a,t,_)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,A)):A[0]+c+A[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,o,i){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),R(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(l.value)<0?(a=y(r)?f(e,l.value,null):f(e,l.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return _(e)&&"[object RegExp]"===A(e)}function _(e){return"object"==typeof e&&null!==e}function x(e){return _(e)&&"[object Date]"===A(e)}function j(e){return _(e)&&("[object Error]"===A(e)||e instanceof Error)}function O(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(b(s)&&(s=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);o.error("%s %d: %s",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=w,t.isObject=_,t.isDate=x,t.isError=j,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(14);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){o.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=r(76),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}},924:function(e,t,r){"use strict";var n=r(210),o=r(559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},559:function(e,t,r){"use strict";var n=r(612),o=r(210),i=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||n.call(s,i),l=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=a(n,s,arguments);if(l&&u){var r=l(t,"length");r.configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var f=function(){return a(n,i,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},108:function(e,t,r){var n=r(539),o=r(583);function i(){return(new Date).getTime()}var s,a=Array.prototype.slice,l={};s=void 0!==r.g&&r.g.console?r.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var u=[[function(){},"log"],[function(){s.log.apply(s,arguments)},"info"],[function(){s.log.apply(s,arguments)},"warn"],[function(){s.warn.apply(s,arguments)},"error"],[function(e){l[e]=i()},"time"],[function(e){var t=l[e];if(!t)throw new Error("No such label: "+e);delete l[e];var r=i()-t;s.log(e+": "+r+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments),s.error(e.stack)},"trace"],[function(e){s.log(n.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=a.call(arguments,1);o.ok(!1,n.format.apply(null,t))}},"assert"]],c=0;c<u.length;c++){var f=u[c],p=f[0],h=f[1];s[h]||(s[h]=p)}e.exports=s},29:function(e,t,r){"use strict";var n=r(320),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},a=function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},l=function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),"[object Array]"===o.call(e)?s(e,t,i):"string"==typeof e?a(e,t,i):l(e,t,i)}},648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var s,a=r.call(arguments,1),l=function(){if(this instanceof s){var t=i.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,a.concat(r.call(arguments)))},u=Math.max(0,i.length-a.length),c=[],f=0;f<u;f++)c.push("$"+f);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),i.prototype){var p=function(){};p.prototype=i.prototype,s.prototype=new p,p.prototype=null}return s}},612:function(e,t,r){"use strict";var n=r(648);e.exports=Function.prototype.bind||n},210:function(e,t,r){"use strict";var n,o=SyntaxError,i=Function,s=TypeError,a=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new s},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,f=r(405)(),p=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"==typeof Uint8Array?n:p(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},y=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=p(o.prototype))}return m[t]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(612),b=r(642),w=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),x=v.call(Function.call,String.prototype.replace),j=v.call(Function.call,String.prototype.slice),O=v.call(Function.call,RegExp.prototype.exec),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,S=function(e){var t=j(e,0,1),r=j(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return x(e,A,(function(e,t,r,o){n[n.length]=r?x(o,E,"$1"):t||e})),n},k=function(e,t){var r,n=e;if(b(g,n)&&(n="%"+(r=g[n])[0]+"%"),b(m,n)){var i=m[n];if(i===h&&(i=y(n)),void 0===i&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=S(e),n=r.length>0?r[0]:"",i=k("%"+n+"%",t),a=i.name,u=i.value,c=!1,f=i.alias;f&&(n=f[0],_(r,w([0,1],f)));for(var p=1,h=!0;p<r.length;p+=1){var d=r[p],y=j(d,0,1),g=j(d,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==d&&h||(c=!0),b(m,a="%"+(n+="."+d)+"%"))u=m[a];else if(null!=u){if(!(d in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&p+1>=r.length){var v=l(u,d);u=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[d]}else h=b(u,d),u=u[d];h&&!c&&(m[a]=u)}}return u}},405:function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},419:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},410:function(e,t,r){"use strict";var n=r(419);e.exports=function(){return n()&&!!Symbol.toStringTag}},642:function(e,t,r){"use strict";var n=r(612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},584:function(e,t,r){"use strict";var n=r(410)(),o=r(924)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},s=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},a=function(){return i(arguments)}();i.isLegacyArguments=s,e.exports=a?i:s},320:function(e){"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,s=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},a=function(e){try{return!s(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var p=document.all;l.call(p)===l.call(document.all)&&(f=function(e){if((c||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=o?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!s(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return a(e);if(s(e))return!1;var t=l.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t||a(e)}},662:function(e,t,r){"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r(410)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(s.test(i.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===o.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},692:function(e,t,r){"use strict";var n=r(29),o=r(83),i=r(924),s=i("Object.prototype.toString"),a=r(410)(),l="undefined"==typeof globalThis?r.g:globalThis,u=o(),c=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f=i("String.prototype.slice"),p={},h=r(882),d=Object.getPrototypeOf;a&&h&&d&&n(u,(function(e){var t=new l[e];if(Symbol.toStringTag in t){var r=d(t),n=h(r,Symbol.toStringTag);if(!n){var o=d(r);n=h(o,Symbol.toStringTag)}p[e]=n.get}})),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!a||!(Symbol.toStringTag in e)){var t=f(s(e),8,-1);return c(u,t)>-1}return!!h&&function(e){var t=!1;return n(p,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},987:function(e,t,r){"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=r(414),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{f(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=s(e),a=t&&"[object String]"===i.call(e),p=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var d=u&&r;if(a&&e.length>0&&!o.call(e,0))for(var m=0;m<e.length;++m)p.push(String(m));if(n&&e.length>0)for(var y=0;y<e.length;++y)p.push(String(y));else for(var g in e)d&&"prototype"===g||!o.call(e,g)||p.push(String(g));if(l)for(var v=function(e){if("undefined"==typeof window||!h)return f(e);try{return f(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)v&&"constructor"===c[b]||!o.call(e,c[b])||p.push(c[b]);return p}}e.exports=n},215:function(e,t,r){"use strict";var n=Array.prototype.slice,o=r(414),i=Object.keys,s=i?function(e){return i(e)}:r(987),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?a(n.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s},414:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},837:function(e,t,r){"use strict";var n=r(215),o=r(419)(),i=r(924),s=Object,a=i("Array.prototype.push"),l=i("Object.prototype.propertyIsEnumerable"),u=o?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var r=s(e);if(1===arguments.length)return r;for(var i=1;i<arguments.length;++i){var c=s(arguments[i]),f=n(c),p=o&&(Object.getOwnPropertySymbols||u);if(p)for(var h=p(c),d=0;d<h.length;++d){var m=h[d];l(c,m)&&a(f,m)}for(var y=0;y<f.length;++y){var g=f[y];if(l(c,g)){var v=c[g];r[g]=v}}}return r}},162:function(e,t,r){"use strict";var n=r(837);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var o=Object.assign({},r),i="";for(var s in o)i+=s;return e!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?n:Object.assign:n}},155:function(e){var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,l=[],u=!1,c=-1;function f(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},384:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},955:function(e,t,r){"use strict";var n=r(584),o=r(662),i=r(430),s=r(692);function a(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=a(Object.prototype.toString),f=a(Number.prototype.valueOf),p=a(String.prototype.valueOf),h=a(Boolean.prototype.valueOf);if(l)var d=a(BigInt.prototype.valueOf);if(u)var m=a(Symbol.prototype.valueOf);function y(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function g(e){return"[object Map]"===c(e)}function v(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function _(e){return"[object ArrayBuffer]"===c(e)}function x(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function j(e){return"[object DataView]"===c(e)}function O(e){return"undefined"!=typeof DataView&&(j.working?j(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||O(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},g.working="undefined"!=typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(g.working?g(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=x,j.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&j(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=O;var A="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function S(e){return void 0!==A&&(void 0===E.working&&(E.working=E(new A)),E.working?E(e):e instanceof A)}function k(e){return y(e,f)}function R(e){return y(e,p)}function $(e){return y(e,h)}function I(e){return l&&y(e,d)}function P(e){return u&&y(e,m)}t.isSharedArrayBuffer=S,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=k,t.isStringObject=R,t.isBooleanObject=$,t.isBigIntObject=I,t.isSymbolObject=P,t.isBoxedPrimitive=function(e){return k(e)||R(e)||$(e)||I(e)||P(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(x(e)||S(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},539:function(e,t,r){var n=r(155),o=r(108),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},s=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(e).replace(s,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<o;a=n[++r])v(a)||!j(a)?i+=" "+a:i+=" "+c(a);return i},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?o.trace(r):o.error(r),i=!0}return e.apply(this,arguments)}};var a={},l=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),l=new RegExp("^"+u+"$","i")}function c(e,r){var n={seen:[],stylize:p};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=f),h(n,e,n.depth)}function f(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function p(e,t){return e}function h(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return w(o)||(o=h(e,o,n)),o}var i=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(r);if(0===s.length){if(E(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(x(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return d(r)}var u,c="",f=!1,p=["{","}"];return y(r)&&(f=!0,p=["[","]"]),E(r)&&(c=" [Function"+(r.name?": "+r.name:"")+"]"),x(r)&&(c=" "+RegExp.prototype.toString.call(r)),O(r)&&(c=" "+Date.prototype.toUTCString.call(r)),A(r)&&(c=" "+d(r)),0!==s.length||f&&0!=r.length?n<0?x(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=f?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)I(t,String(s))?i.push(m(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(m(e,t,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return m(e,r,n,a,t,f)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,p)):p[0]+c+p[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,o,i){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),I(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(l.value)<0?(a=v(r)?h(e,l.value,null):h(e,l.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function y(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function b(e){return"number"==typeof e}function w(e){return"string"==typeof e}function _(e){return void 0===e}function x(e){return j(e)&&"[object RegExp]"===S(e)}function j(e){return"object"==typeof e&&null!==e}function O(e){return j(e)&&"[object Date]"===S(e)}function A(e){return j(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(l.test(e)){var r=n.pid;a[e]=function(){var n=t.format.apply(t,arguments);o.error("%s %d: %s",e,r,n)}}else a[e]=function(){};return a[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(955),t.isArray=y,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=w,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=x,t.types.isRegExp=x,t.isObject=j,t.isDate=O,t.types.isDate=O,t.isError=A,t.types.isNativeError=A,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(384);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){o.log("%s - %s",$(),t.format.apply(t,arguments))},t.inherits=r(717),t._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=P,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};e.apply(this,t).then((function(e){n.nextTick(s.bind(null,null,e))}),(function(e){n.nextTick(M.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},430:function(e,t,r){"use strict";var n=r(29),o=r(83),i=r(924),s=i("Object.prototype.toString"),a=r(410)(),l="undefined"==typeof globalThis?r.g:globalThis,u=o(),c=i("String.prototype.slice"),f={},p=r(882),h=Object.getPrototypeOf;a&&p&&h&&n(u,(function(e){if("function"==typeof l[e]){var t=new l[e];if(Symbol.toStringTag in t){var r=h(t),n=p(r,Symbol.toStringTag);if(!n){var o=h(r);n=p(o,Symbol.toStringTag)}f[e]=n.get}}}));var d=r(692);e.exports=function(e){return!!d(e)&&(a&&Symbol.toStringTag in e?function(e){var t=!1;return n(f,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}})),t}(e):c(s(e),8,-1))}},83:function(e,t,r){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},882:function(e,t,r){"use strict";var n=r(210)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=r(285),t=r.n(e),n=r(108);const o=new Map;let i;const s=new RegExp("^.+\\.js$"),a=new RegExp("^.+\\.wasm$"),l=new RegExp("^.+\\.data$"),u=new RegExp("^.+\\_static.json$"),c=new RegExp("^.+\\modelmetadata.json$"),f=e=>{var t=e;h(t),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.ready&&window.webkit.messageHandlers.ready.postMessage&&window.webkit.messageHandlers.ready.postMessage(t),t=void 0},p=e=>{var t=e;h(t),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.executeFinished&&window.webkit.messageHandlers.executeFinished.postMessage&&window.webkit.messageHandlers.executeFinished.postMessage(t),t=void 0},h=e=>{var t="object"==typeof e?JSON.stringify(e):e;n&&n.log(t),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.log&&window.webkit.messageHandlers.log.postMessage&&window.webkit.messageHandlers.log.postMessage({msg:t}),t=void 0};window.initialize=async e=>{var r=e;h({msg:"Initialization Started",filelist:r,eventType:"Initialize"});let n=o.get("sparkConfig");try{if(e){const r=e;let p={nodeGenModels:[]};if(n)p=n;else{h({msg:"Creating Service Map",eventType:"Initialize.create"});const t=e.filter((e=>c.test(e.toLowerCase()))),n=await Promise.all(t.map((async e=>{try{h({file:e,eventType:"Initialize.scanning"}),h({file:e,msg:`Fetching:${e}`,eventType:"Initialize.fetchMetadata"}),h({file:e,eventType:"metajson.fetch.start"});const t=Date.now(),n=await fetch(e,{headers:{"content-type":"application/json"}}),o=Date.now();h({file:e,eventType:"metajson.fetch.end",duration:o-t});const i=await n.json();h({meta:i,file:e,eventType:"Initialize.metadata"});const c={versionId:i.VersionId,type:"url",binary:"",metaData:i};let f=r.find((e=>e.includes(`${i.VersionId}.zip`)));if(f)return c.error={msg:`Error while processing model ${e}: Artifact file ${i.VersionId}.zip found. Please unzip and remove the zip file`},c;let p=r.filter((e=>e.includes(`${i.VersionId}`)));if(!p.find((e=>s.test(e))))return c.error={msg:`Error while processing model ${e}: Artifact ${i.VersionId} runtime js does not found`},c;if(!p.find((e=>a.test(e))))return c.error={msg:`Error while processing model ${e}: Artifact ${i.VersionId} wasm does not found`},c;const d={js:p.find((e=>s.test(e))),wasm:p.find((e=>a.test(e)))};return p.find((e=>l.test(e)))?d.data=p.find((e=>l.test(e))):h({file:e,msg:`Model:${i.VersionId} doesn't have data file or missing`,eventType:"Initialize.fetchModel"}),p.find((e=>u.test(e.toLowerCase())))?d.metadata=p.find((e=>u.test(e.toLowerCase()))):h({file:e,msg:`Model:${i.VersionId} doesn't have metadata file or missing`,eventType:"Initialize.fetchModel"}),h({file:d,eventType:"model.bundle"}),c.binary=d,c}catch(t){return{error:{msg:`Error while processing model ${e}: ${t.message}`}}}}))),i=n.filter((e=>void 0!==e.error)).map((e=>e.error));if(i.length>0)return h({msg:"Model Not Found",errors:i,sparkConfig:p,eventType:"Initialize.config"}),f({err:`Errors: ${i.map((e=>e.msg)).join(",")}`,result:!1}),!1;p={...p,nodeGenModels:n},h({msg:"Spark Config Created",eventType:"Initialize.config"}),o.set("sparkConfig",JSON.stringify(p))}return h({msg:"Initializing Spark Using Service Map Config",eventType:"Initialize.spark"}),i=new(t())(p,{log:h}),h({msg:"Call spark.initialize",eventType:"Initialize.spark"}),h({msg:"Spark Initialized",eventType:"Initialize.spark"}),void f({err:"",result:!0})}return f({err:"Something went wrong",result:!1}),!1}catch(e){h({err:e,eventType:"Initialize.error"}),f({err:e.message,result:!1})}finally{r=void 0}},window.execute=async(e,t)=>{var r,n=e,o=t;try{if(h({request_id:n,payload:o,eventType:"Execute"}),(r=await i.execute(o))instanceof Error)throw new Error(r.message);return h({request_id:n,results:r,eventType:"Execute.result"}),p({request_id:n,success:!0,error:"",result:r}),{request_id:n,results:r}}catch(e){h({error:e.message,eventType:"Execute.error"}),p({request_id:n,success:!1,error:e.message,result:""})}finally{n=void 0,r=void 0,o=void 0}},window.addEventListener("load",(e=>{var t,r;h("JS Script Loaded"),t=e.returnValue,h(r=t),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.readyJs&&window.webkit.messageHandlers.readyJs.postMessage&&window.webkit.messageHandlers.readyJs.postMessage(r),r=void 0}))}()}();